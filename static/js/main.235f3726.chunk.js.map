{"version":3,"sources":["assets/codemirror/toit.js","assets/theme.ts","components/ErrorPage.tsx","components/header/SearchBar.tsx","components/header/SearchResults.tsx","components/header/SearchView.tsx","containers/header/Search.ts","components/header/HeaderBar.tsx","components/main/WelcomeFolderPage.tsx","misc/util.ts","model/model.ts","components/general/CodeBlock.tsx","components/general/ExternalLink.tsx","components/doc/Toitdocs.tsx","components/main/SummaryView.tsx","containers/main/Summary.ts","components/main/WelcomePage.tsx","components/navigation/LibraryNavigation.tsx","components/navigation/NavigationView.tsx","components/ThemeProvider.tsx","components/general/DetailsList.tsx","components/doc/Type.tsx","components/doc/Fields.tsx","components/doc/Functions.tsx","components/general/TablePanel.tsx","components/main/ClassOverview.tsx","components/main/ClassInfoView.tsx","containers/main/ClassInfo.ts","components/doc/Classes.tsx","components/doc/Globals.tsx","components/main/LibraryInfoView.tsx","containers/main/LibraryInfo.ts","generator/convert.ts","generator/doc.ts","model/search.ts","redux/doc.ts","App.tsx","serviceWorker.ts","index.tsx","assets/images/logo.svg"],"names":["mod","CodeMirror","defineMode","config","last","array","length","subState","state","setSubState","makeJsObject","str","result","split","i","keywords","atoms","specialVars","IDENTIFIER","TYPE","OVERRIDABLE_OPERATOR","CONSTANT_HEURISTIC","TYPE_HEURISTIC","CONTROL","isKeyword","propertyIsEnumerable","isAtom","isSpecialVar","isReserved","tryComments","stream","match","skipToEnd","tokenizeMultilineComment","context","push","tokenizeMultilineCommentEnd","pop","next","tryString","tokenizeMultilineString","tokenizeSinglelineString","tokenizeDelimited","closing","expression_result","tryExpression","peek","tryDelimited","style","current","tokenizeIs","tokenizeIsAs","tokenizeType","tokenizeEscape","identifier_result","tryIdentifier","eatWhile","escape_result","eol","tryChar","tryNumber","localAnnotation","sub","allowPrefixedDot","backUp","id","allowNullable","tokenizeType2","indexOfDot","indexOf","tokenizeImport","comment_result","importError","tokenizeExport","tokenizeClassError","tokenizeClass","signatureError","nextSubState","tokenizeMemberDeclaration","MEMBER_DECLARATION_START","tokenizeFunctionBody","tokenizeFunctionSignature","currentSubState","matched_result","DEFAULT_VALUE_AFTER_IDENTIFIER","tokenizeDefaultValueContinuation","error","kind","lastIndentation","tryDefaultValue","isNamed","isSetting","prefix","name","slice","tryNamedArgument","tryOperator","tryIsAs","tryPostfixMemberOrIdentifier","tryPrimitive","tryControl","tokenizeTopLevel","tryImport","tryExport","tryClass","startOfLine","indentation","tryImpliedTopLevelFunction","tryToplevelDeclaration","tokenizeError","startState","basecolumn","readNonWhitespace","atColonIndentation","token","sol","eatSpace","tokenizer","indent","textAfter","Pass","closeBrackets","triples","lineComment","blockCommentStart","blockCommentEnd","fold","defineMIME","window","navigator","then","require","layout","sidebarWidth","headerHeight","footerHeight","theme","createMuiTheme","palette","type","background","paper","default","text","primary","main","secondary","typography","fontFamily","body1","body2","fontSize","h1","h2","h3","h4","h5","h6","sideBarTheme","ErrorBoundary","hasError","info","this","setState","console","log","Grid","item","className","props","classes","grid","to","children","React","Component","withStyles","createStyles","margin","spacing","useStyles","makeStyles","search","padding","display","alignItems","flex","input","marginLeft","clearIcon","marginRight","cursor","memo","Box","border","borderLeft","borderTop","borderRight","InputBase","placeholder","inputProps","onChange","event","onSearch","target","value","searchBy","onClick","onFocus","root","position","width","SEARCH_RESULTS_WIDTH","maxHeight","overflow","marginTop","SEARCH_BAR_WIDTH","listItem","flexDirection","color","emphText","dark","SearchResults","results","map","index","ResultItem","key","hideResults","Paper","square","List","from","ref","path","join","libraryRef","parameters","classRef","ListItem","button","component","href","url","Typography","variant","delayTimer","styles","searchBar","SearchView","libraries","interfaces","mixins","functions","methods","searchString","clearTimeout","setTimeout","model","m","inter","mixin","c","f","onClickAway","searchIn","Fuse","keys","threshold","distance","ClickAwayListener","connect","doc","searchableModel","StyledAppBar","styled","AppBar","HeaderBar","elevation","Toolbar","WelcomeFolderPage","header","section","PureComponent","paddingBottom","libraryFrom","libraryName","rootLibraries","library","undefined","libraryFromRef","methodFromRef","klass","offset","Object","values","exportedClasses","exportedInterfaces","exportedMixins","classFromRef","statics","getFunctionId","functionName","shape","shapeString","arity","totalBlockCount","namedBlockCount","names","encodeURIComponent","libraryUrl","baseUrl","classUrl","memberUrl","globalUrl","classUrlFromRef","libraryUrlFromRef","functionUrlFromRef","fhunction","exportedFunctions","functionFromRef","methodUrlFromRef","method","Wrapper","div","CodeBlock","code","replace","options","mode","readOnly","tabSize","ExternalLink","aria-hidden","statementParagraph","sectionTitle","paddingTop","otherDocRef","fontWeight","parameterDocRef","StatementCodeSection","ExpressionCode","ExpressionText","ExpressionLink","link","rel","StatementItemized","itemized","items","statements","statement","Statement","StatementParagraph","isHeader","expressions","expr","Expression","expression","ToitdocRef","holder","urlFromLinkRef","reference","Error","Section","level","title","Toitdocs","headerOnly","toitdoc","headerToitdoc","SummaryView","fundamentals","justThere","misc","forEach","lib","category","renderSection","libList","libEntry","WelcomePage","Summary","subLibraries","paddingLeft","openLibrary","LibraryNavigation","showSubLibraries","openSubLibrary","sort","a","b","localeCompare","subLibrary","Title","NavigationView","location","useSelector","alt","src","logo","height","params","ThemeProvider","details","element","divider","marginBottom","Signature","SignatureName","span","DetailsList","elements","concat","hash","description","isInherited","toitdocHeaderOnly","Divider","TypeView","isNone","isAny","isBlock","TypeReference","Fields","fields","field","defaultValue","getDescription","returnType","hideReturnTypes","includeDefaultValues","parameter","param","isRequired","Functions","fn","TablePanelGen","other","role","hidden","aria-labelledby","TablePanel","tabFieldData","active","tab","TableContainer","Table","size","aria-label","ariaLabel","methodsTable","TableBody","TableRow","TableCell","scope","tabData","a11yProps","ClassOverviewView","constructors","Tabs","textColor","indicatorColor","Tab","label","hiddenTab","minWidth","ClassInfoView","hashId","substring","document","getElementById","scrollIntoView","classInfo","classFrom","notFound","extends","ClassOverview","Classes","Globals","globals","global","LibraryInfoView","libName","importPath","isCoreExported","noImport","isCore","showImportHelp","viewMode","ViewMode","SDK","startsWith","exec","Package","Folder","heading","importingText","exportedGlobals","sdkPath","packagesPath","packageNames","endsWith","urlAndPathFrom","containsSdk","isSdkPath","containsPkgs","isPackagePath","urlPath","srcIndex","versionNumber","packageId","packageName","nestedPath","unshift","PACKAGES_URL","buildPackageUrlAndPath","len","shapeFrom","toitShape","total_block_count","named_block_count","linkRefKindFrom","toitDocRefKind","linkRefFrom","toitDocRef","docStatementFrom","toitStatement","object_type","toitExpression","docExpressionFrom","toitItem","s","docFrom","toitDoc","toitSection","docSectionFrom","referenceFrom","toitReference","typeFrom","toitType","is_none","is_any","is_block","parameterFrom","toitParameter","is_named","is_required","default_value","methodFrom","toitMethod","return_type","is_inherited","classKindFrom","toitClass","classId","extend","structure","toitField","fieldFrom","factories","constructor","statik","globalFrom","toitGlobal","functionFrom","toitFunction","categoryFrom","libraryFromModule","toitModule","libraryId","export_classes","export_interfaces","export_mixins","export_globals","export_functions","libraryFromLibrary","toitLibrary","libraryPath","librariesFromLibraries","libraryContent","modules","module","subLibraryName","libLibrary","otherLibrary","JSON","stringify","mergeLibraries","toitLibraries","parametersString","typeString","flattenMethod","flattenLibrary","flattenInterface","flattenMixin","flattenClass","flattenFunction","fetchDoc","createAsyncThunk","docPath","process","getMetaValue","fetch","response","json","initialState","sdkVersion","version","createSlice","reducers","extraReducers","builder","addCase","pending","action","fulfilled","payload","sdk_version","sdk_path","packages_path","package_names","contains_pkgs","contains_sdk","pkgName","pkg_name","setViewMode","flatten","rejected","message","body","boxSizing","textDecoration","appContainer","ContentWrapper","Content","Footer","footer","StyledCircularProgress","CircularProgress","def","obj","querySelector","getAttribute","baseURL","getBaseURL","newMode","App","basename","AppContent","FixedNavigationView","pathname","useLocation","useEffect","scrollTo","defaultURL","exact","render","routeProps","LibraryInfo","ClassInfo","disableShrink","dispatch","Boolean","hostname","rootReducer","combineReducers","reducer","store","createStore","applyMiddleware","thunkMiddleware","serviceWorker","ready","registration","unregister","exports"],"mappings":"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","file":"static/js/main.235f3726.chunk.js","sourcesContent":["/* eslint-disable */\n// Code copied from toitware/ide-tools. DO NOT EDIT.\n\n// Copyright (C) 2021 Toitware ApS. All rights reserved.\n// Use of this source code is governed by an MIT-style license that can be\n// found in the LICENSE file.\n\n(function (mod) {\n  if (typeof CodeMirror !== \"undefined\")  // Just use the variable if it already exits.\n    mod(CodeMirror);\n  if (typeof window === \"undefined\" || typeof window.navigator == 'undefined')\n    import(\"codemirror\").then(mod);\n  else if ( typeof module == \"object\" && module.hot)\n    import(\"codemirror\").then(mod);\n  else if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"toit\", function (config) {\n    function last(array) {\n      return array[array.length - 1];\n    }\n    function set_last(array, val) {\n      array[array.length - 1] = val;\n    }\n\n    function subState(state) {\n      return last(state.subState);\n    }\n    function setSubState(state, subState) {\n      state.subState[state.subState.length - 1] = subState;\n    }\n\n    function makeJsObject(str) {\n      var result = {};\n      var split = str.split(\"|\");\n      for (var i = 0; i < split.length; i++) result[split[i]] = true;\n      return result;\n    }\n    var keywords = makeJsObject(\n      \"assert|and|or|not|if|for|else|try|finally|\" +\n      \"while|break|continue|throw|static|abstract|return|unreachable\");\n    var atoms = makeJsObject(\"true|false|null\");\n    var specialVars = makeJsObject(\"this|super|it\");\n\n    var IDENTIFIER = /[a-zA-Z_]([\\w-]*\\w)?/;\n    var TYPE = /[a-zA-Z_]([\\w-]*\\w)?(\\.[a-zA-Z_]([\\w-]*\\w)?)?/;\n    var OVERRIDABLE_OPERATOR = /==|>=|<=|<<|>>>|>>|\\*|\\+|-|%|\\/|<|>|&|\\||\\^|~|\\[\\]\\=|\\[\\]|\\[\\.\\.\\]/\n\n    var CONSTANT_HEURISTIC = /^_?[A-Z][A-Z_0-9-]*$/;\n    var TYPE_HEURISTIC = /^_?[A-Z][\\w-]*[a-z][\\w-]*$/;\n    var CONTROL = /[?:;]/;\n\n    function isKeyword(str) {\n      return keywords.propertyIsEnumerable(str);\n    }\n    function isAtom(str) {\n      return atoms.propertyIsEnumerable(str);\n    }\n    function isSpecialVar(str) {\n      return specialVars.propertyIsEnumerable(str);\n    }\n    function isReserved(str) {\n      return isKeyword(str) || isAtom(str) || isSpecialVar(str);\n    }\n\n    function tryComments(stream, state) {\n      // TODO: once code-mirror supports doc-comments, adjust.\n      if (stream.match(\"//\")) {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n      if (stream.match(\"/*\")) {\n        return tokenizeMultilineComment(stream, state);\n      }\n      return null;\n    }\n\n    function tokenizeMultilineComment(stream, state) {\n      state.context.push([tokenizeMultilineCommentEnd, -1]);\n      state.subState.push(null);\n      return tokenizeMultilineCommentEnd(stream, state);\n    }\n\n    function tokenizeMultilineCommentEnd(stream, state) {\n      while (true) {\n        if (stream.match(\"/*\")) {\n          return tokenizeMultilineComment(stream, state);\n        }\n        if (stream.match(\"*/\")) {\n          state.context.pop();\n          state.subState.pop();\n          return \"comment\";\n        }\n        if (!stream.next()) {\n          // End of line.\n          return \"comment\";\n        }\n      }\n    }\n\n    var STRING_PART = 0;\n    var STRING_ESCAPE_DOLLAR = 1;\n    var STRING_ESCAPE_EXPRESSION = 2;\n    var STRING_ESCAPE_AFTER_PAREN = 3;\n    var STRING_ESCAPE_AFTER_IDENTIFIER = 4;\n    var STRING_ESCAPE_AFTER_FORMAT = 5;\n    function tryString(stream, state) {\n      if (stream.match('\"')) {\n        if (stream.match('\"\"')) {\n          // Multiline string.\n          state.context.push([tokenizeMultilineString, -1]);\n          state.subState.push(STRING_PART);\n          return tokenizeMultilineString(stream, state);\n        }\n        state.context.push([tokenizeSinglelineString, 9999]);\n        state.subState.push(STRING_PART);\n        return tokenizeSinglelineString(stream, state);\n      }\n      return null;\n    }\n\n    function tokenizeDelimited(stream, state) {\n      var closing = subState(state);\n      var expression_result = tryExpression(stream, state);\n      if (expression_result) return expression_result;\n      while (true) {\n        var peek = stream.peek();\n        if (!peek || peek == ' ') return \"enclosed\";\n        if (closing == \"]\" && stream.match(\"..\")) {\n          // We assume it's the slice operator.\n          return \"op_slice\";\n        }\n        var next = stream.next();\n        if (next == closing) {\n          state.context.pop();\n          state.subState.pop();\n          switch (closing) {\n            case \")\": return \"paren\";\n            case \"}\": return \"brace\";\n            case \"]\": return \"bracket\";\n          }\n          return \"error\";\n        } else if (next == ',') {\n          if (closing == \")\") return \"error\";\n          return \"separator\";\n        } else {\n          return \"error\";\n        }\n      }\n    }\n\n    function tryDelimited(stream, state) {\n      if (stream.match(/[({[]|#[[]/)) {\n        state.context.push([tokenizeDelimited, -1]);\n        // Abusing `subState` to store the delimiter.\n        var closing;\n        var style;\n        switch (stream.current()) {\n          case \"(\": closing = \")\"; style = \"paren\"; break;\n          case \"{\": closing = \"}\"; style = \"brace\"; break;\n          case \"[\": closing = \"]\"; style = \"bracket\"; break;\n          case \"#[\": closing = \"]\"; style = \"bracket\"; break;\n        }\n        state.subState.push(closing);\n        return style;\n      }\n    }\n\n    function tryControl(stream, state) {\n      if (stream.match(CONTROL)) {\n        return \"control\";\n      }\n    }\n\n    function tokenizeIs(stream, state) {\n      state.context.pop();\n      state.subState.pop();\n      state.context.push([tokenizeIsAs, -1]);\n      state.subState.push(null);\n      if (stream.match(/not(?!-\\w)\\b/)) {\n        return \"is_as\";\n      } else {\n        return tokenizeIsAs(stream, state)\n      }\n    }\n\n    function tokenizeIsAs(stream, state) {\n      state.context.pop();\n      state.subState.pop();\n      if (!stream.match(TYPE, false)) {\n        return \"is_as_error\";\n      }\n      return tokenizeType(stream, state);\n    }\n\n    function tryIsAs(stream, state) {\n      if (stream.match(/is(?!-\\w)\\b/)) {\n        state.context.push([tokenizeIs, -1]);\n        state.subState.push(null);\n        return \"is_as\";\n      }\n      if (stream.match(/as(?!-\\w)\\b/)) {\n        state.context.push([tokenizeIsAs, -1]);\n        state.subState.push(null);\n        return \"is_as\";\n      }\n    }\n\n    function tokenizeEscape(stream, state) {\n      switch (subState(state)) {\n        case STRING_ESCAPE_DOLLAR:\n          stream.next();\n          var peek = stream.peek();\n          if (!peek || (peek != \"(\" && !peek.match(/[a-zA-Z_]/))) {\n            setSubState(state, STRING_PART);\n            return \"missing_escape_expression\";\n          }\n          setSubState(state, STRING_ESCAPE_EXPRESSION);\n          return \"string_dollar\";\n\n        case STRING_ESCAPE_EXPRESSION:\n          if (stream.match('(')) {\n            setSubState(state, STRING_ESCAPE_AFTER_PAREN);\n            return \"paren\";\n          }\n          // Use `tryIdentifier` to get special handling of identifiers.\n          var identifier_result = tryIdentifier(stream, state);\n          // TODO(florian): this is brittle, since we might want to return\n          // different styles for different keywords.\n          if (identifier_result == \"keyword\") {\n            identifier_result = \"error\";\n          }\n          setSubState(state, STRING_ESCAPE_AFTER_IDENTIFIER);\n          return identifier_result;\n\n        case STRING_ESCAPE_AFTER_IDENTIFIER:\n          if (stream.match(/\\.[a-zA-Z_]/, false)) {\n            stream.next();\n            // We can use `STRING_ESCAPE_DOLLAR` as we know that we will\n            // hit an identifier.\n            setSubState(state, STRING_ESCAPE_EXPRESSION);\n            return \"dot\";\n          }\n          if (stream.match('[')) {\n            stream.next();\n            // Keeping the current substate, as we want to continue as if\n            // we just finished parsing an identifier.\n            state.context.push([tokenizeDelimited, -1]);\n            // Abusing `subState` to store the delimiter.\n            state.subState.push(\"]\");\n            return \"bracket\";\n          }\n          setSubState(state, STRING_PART);\n          return null;\n\n        case STRING_ESCAPE_AFTER_PAREN:\n          if (stream.peek() == '%') {\n            stream.eatWhile(/[^ ]/);\n            setSubState(state, STRING_ESCAPE_AFTER_FORMAT);\n            return \"string_format\";\n          }\n        // Fall through:\n        case STRING_ESCAPE_AFTER_FORMAT:\n          setSubState(state, STRING_PART);  // When we come back.\n          state.context.push([tokenizeDelimited, -1]);\n          // Abusing `subState` to store the delimiter.\n          state.subState.push(\")\");\n          return tokenizeDelimited(stream, state);\n\n        default:\n          throw \"INTERNAL ERROR\";\n      }\n    }\n\n    function tokenizeSinglelineString(stream, state) {\n      if (subState(state) != STRING_PART) {\n        var escape_result = tokenizeEscape(stream, state);\n        if (escape_result) return escape_result;\n        // Otherwise continue as string part.\n      }\n      while (true) {\n        stream.eatWhile(/[^\"$\\\\]/);\n        if (stream.eol()) return \"unfinished_string\";\n        // TODO: we could highlight escapes. (Especially \\x and \\u).\n        if (stream.match(\"\\\\\")) {\n          stream.next();  // Consume the escaped character.\n          continue;\n        }\n        if (stream.peek() == '$') {\n          setSubState(state, STRING_ESCAPE_DOLLAR);\n          return \"singleline_string\";\n        }\n        stream.match('\"');\n        state.context.pop();\n        state.subState.pop();\n        return \"singleline_string\";\n      }\n    }\n\n    function tokenizeMultilineString(stream, state) {\n      if (subState(state) != STRING_PART) {\n        var escape_result = tokenizeEscape(stream, state);\n        if (escape_result) return escape_result;\n        // Otherwise continue as string part.\n      }\n      while (true) {\n        stream.eatWhile(/[^\"$\\\\]/);\n        if (stream.eol()) return \"multiline_string\";\n        // TODO: we could highlight escapes. (Especially \\x and \\u).\n        if (stream.match(\"\\\\\")) stream.next();  // Consume the escaped character.\n        if (stream.peek() == '$') {\n          setSubState(state, STRING_ESCAPE_DOLLAR);\n          return \"multiline_string\";\n        }\n        stream.next();\n        if (stream.match('\"\"')) {\n          state.context.pop();\n          state.subState.pop();\n          return \"multiline_string\";\n        }\n      }\n    }\n\n    function tryChar(stream, state) {\n      if (stream.match(\"'\")) {\n        while (true) {\n          if (stream.match(\"'\")) {\n            return \"character\";\n          }\n          stream.match(\"\\\\\");  // If there is a backslash, consume it and the next character.\n          stream.next();\n          if (stream.eol()) {\n            return \"unfinished_character\";\n          }\n        }\n      }\n      return null;\n    }\n\n    function tryNumber(stream, state) {\n      if (stream.match(/(\\d(\\d|_\\d)*)?\\.\\d(\\d|_\\d)*([eE][+-]?\\d(\\d|_\\d)*)?/)) return \"float\";  // 0.5e10 and .5e+10\n      if (stream.match(/\\d(\\d|_\\d)*[eE][+-]?\\d(\\d|_\\d)*/)) return \"float\";  // 1e+10\n      if (stream.match(/0[xX]([\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*)?\\.[\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*[pP][+-]?\\d(\\d|_\\d)*/)) return \"hex_float\";  // 0x.D7P-3 and 0xAb.D7p+10\n      if (stream.match(/0[xX][\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*[pP][+-]?\\d(\\d|_\\d)*/)) return \"hex_float\";  // 0xap+10\n      if (stream.match(/0[xX][\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*/)) return \"hex\";\n      if (stream.match(/0[bB][01a-fA-F]([01a-fA-F]|_[01a-fA-F])*/)) return \"binary\";\n      if (stream.match(/\\d(\\d|_\\d)*/)) return \"integer\";\n      return null;\n    }\n\n    function tryNamedArgument(stream, state) {\n      if (stream.match(\"--\")) {\n        if (stream.match(IDENTIFIER)) return \"named_argument\";\n        stream.backUp(2);\n      }\n      return null;\n    }\n\n    function tryOperator(stream, state) {\n      if (stream.match(/\\*|\\+|-|%|\\/|<<|>>>|>>|&|\\||\\^|~/)) {\n        if (stream.match(\"=\")) {\n          return \"op_assig\";\n        }\n        return \"overridable_op\"\n      }\n      if (stream.match(/==|!=|>=|<=|<|>/)) {\n        return \"relational\";\n      }\n      if (stream.match(\"=\")) {\n        return \"assig\"\n      }\n      if (stream.match(/:=|::=/)) {\n        return \"define\";\n      }\n      return null;\n    }\n\n    var LOCAL_ANNOTATION_DIV = 0;\n    var LOCAL_ANNOTATION_TYPE = 1;\n    function localAnnotation(stream, state) {\n      var sub = subState(state);\n      if (sub == LOCAL_ANNOTATION_DIV) {\n        if (stream.match(\"/\")) {\n          setSubState(state, LOCAL_ANNOTATION_TYPE)\n          return \"type_div\";\n        }\n        throw \"Internal Error\"\n      }\n      if (sub != LOCAL_ANNOTATION_TYPE) {\n        throw \"Internal Error\"\n      }\n      state.context.pop();\n      state.subState.pop();\n      if (stream.match(TYPE, false)) {\n        return tokenizeType(stream, state, true);\n      }\n      return null;\n    }\n\n    function tryPostfixMemberOrIdentifier(stream, state) {\n      return tryIdentifier(stream, state, true);\n    }\n\n    function tryIdentifier(stream, state, allowPrefixedDot) {\n      // If we allow a prefixed dot, consume it (but put it back if\n      // it's not followed by an identifier).\n      if (allowPrefixedDot && stream.match(\".\")) {\n        if (!stream.match(IDENTIFIER, false)) {\n          stream.backUp(1);\n          return null;\n        }\n        return \"dot\";\n      }\n      if (!stream.match(IDENTIFIER)) return null;\n      var id = stream.current();\n      if (isKeyword(id)) return \"keyword\";\n      if (isSpecialVar(id)) return \"special_var\";\n      if (isAtom(id)) return \"atom\";\n      if (id.match(CONSTANT_HEURISTIC)) return \"constant\";\n      if (id.match(TYPE_HEURISTIC)) return \"type\";\n      if (stream.match(/[ ]*:?:=/, false)) return \"declaration\";\n\n      if (stream.match(/[ ]*[/][ ]*[\\w_.]+[?]?[ ]*:?:=/, false)) {\n        state.context.push([localAnnotation, -1]);\n        state.subState.push(LOCAL_ANNOTATION_DIV);\n        return \"declaration\";\n      }\n      return \"identifier\";\n    }\n\n    function tryPrimitive(stream, state) {\n      if (stream.match(/#primitive(?!-\\w)\\b/)) {\n        return \"primitive\";\n      }\n      return null;\n    }\n\n    var TYPE_START = 0;\n    var TYPE_START_NULLABLE = 1;\n    var TYPE_AFTER_PREFIX = 2;\n    var TYPE_AFTER_PREFIX_NULLABLE = 3;\n    // Assumes that we are currently at an identifier, or a prefixed identifier.\n    // Colors the prefix as prefix, and the last identifier as type.\n    function tokenizeType(stream, state, allowNullable) {\n      if (!stream.match(TYPE, false)) {\n        throw \"INTERNAL ERROR\";\n      }\n      if (stream.match(/any(?!-\\w)\\b/) || stream.match(/none(?!-\\w)\\b/)) {\n        return \"type_special\";\n      }\n      if (stream.match(/int(?!-\\w)\\b\\??/) || stream.match(/float(?!-\\w)\\b\\??/) || stream.match(/bool(?!-\\w)\\b\\??/) || stream.match(/string(?!-\\w)\\b\\??/)) {\n        return \"type_short\";\n      }\n      state.context.push([tokenizeType2, -1]);\n      state.subState.push(allowNullable ? TYPE_START_NULLABLE : TYPE_START);\n      return tokenizeType2(stream, state);\n    }\n\n    function tokenizeType2(stream, state) {\n      var sub = subState(state);\n      if (sub == TYPE_START || sub == TYPE_START_NULLABLE) {\n        stream.match(TYPE);\n        var indexOfDot = stream.current().indexOf('.');\n        if (indexOfDot >= 0) {\n          // Backup.\n          setSubState(state, sub == TYPE_START ? TYPE_AFTER_PREFIX : TYPE_AFTER_PREFIX_NULLABLE);\n          stream.backUp(stream.current().length - indexOfDot);\n          return \"type_prefix\";\n        }\n        if (sub == TYPE_START_NULLABLE) stream.match(\"?\");\n        state.context.pop();\n        state.subState.pop();\n        return \"type_name\";\n      }\n      if (stream.match(\".\")) return \"type_dot\";\n      state.context.pop();\n      state.subState.pop();\n      stream.match(IDENTIFIER);\n      if (sub == TYPE_AFTER_PREFIX_NULLABLE) stream.match(\"?\");\n      return \"type_name\";\n    }\n\n    var IMPORT_AFTER_IMPORT = 0;\n    var IMPORT_AFTER_PATH = 1;\n    var IMPORT_AFTER_SHOW = 2;\n    var IMPORT_AFTER_AS = 3;\n    var IMPORT_ERROR = 4;\n    function tryImport(stream, state) {\n      if (stream.match(/import(?!-\\w)\\b/)) {\n        state.context.push([tokenizeImport, 2]);\n        state.subState.push(IMPORT_AFTER_IMPORT);\n        return \"keyword\"\n      }\n      return null;\n    }\n    function tokenizeImport(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      function importError() {\n        setSubState(state, IMPORT_ERROR);\n        stream.skipToEnd();\n        return \"error\";\n      }\n\n      switch (subState(state)) {\n        case IMPORT_AFTER_IMPORT:\n          if (!stream.match(/\\.*(\\.?[-a-zA-Z_]\\w*)+/)) return importError();\n          setSubState(state, IMPORT_AFTER_PATH);\n          return \"import_path\";\n        case IMPORT_AFTER_PATH:\n          if (stream.match(/as(?!-\\w)\\b/)) {\n            setSubState(state, IMPORT_AFTER_AS);\n            return \"keyword\";\n          }\n          if (stream.match(/show(?!-\\w)\\b/)) {\n            setSubState(state, IMPORT_AFTER_SHOW);\n            return \"keyword\";\n          }\n          return importError();\n        case IMPORT_AFTER_AS:\n          if (!stream.match(IDENTIFIER)) return importError();\n          // Anything that follows is an error.\n          setSubState(state, IMPORT_ERROR);\n          return \"import_prefix_name\";\n        case IMPORT_AFTER_SHOW:\n          if (stream.match(\"*\")) {\n            setSubState(state, IMPORT_ERROR);\n            return \"import_star\";\n          }\n          if (!stream.match(IDENTIFIER)) return importError();\n          return \"import_show_identifier\";\n        case IMPORT_ERROR:\n        default:\n          stream.skipToEnd();\n          return \"import_error\";\n      }\n    }\n\n    var EXPORT_AFTER_EXPORT = 0;\n    var EXPORT_ERROR = 1;\n    function tryExport(stream, state) {\n      if (stream.match(/export(?!-\\w)\\b/)) {\n        state.context.push([tokenizeExport, 2]);\n        state.subState.push(EXPORT_AFTER_EXPORT);\n        return \"keyword\"\n      }\n      return null;\n    }\n    function tokenizeExport(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      switch (subState(state)) {\n        case EXPORT_AFTER_EXPORT:\n          if (stream.match(\"*\")) {\n            setSubState(state, EXPORT_ERROR);\n            return \"export_star\";\n          }\n          if (stream.match(IDENTIFIER)) {\n            return \"export_identifier\";\n          }\n          setSubState(state, EXPORT_ERROR);\n        // Fall through.\n        case EXPORT_ERROR:\n        default:\n          stream.skipToEnd();\n          return \"export_error\";\n      }\n    }\n\n    var CLASS_SIGNATURE_AFTER_CLASS = 0;\n    var CLASS_SIGNATURE_AFTER_NAME = 1;\n    var CLASS_SIGNATURE_AFTER_EXTENDS = 2;\n    var CLASS_SIGNATURE_AFTER_EXTENDS_TYPE = 3\n    var CLASS_SIGNATURE_AFTER_WITH = 4\n    var CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME = 5;\n    var CLASS_SIGNATURE_AFTER_IMPLEMENTS = 6;\n    var CLASS_SIGNATURE_AFTER_FIRST_IMPLEMENTS_NAME = 7;\n    var CLASS_BODY = 8;\n    function tryClass(stream, state) {\n      if (stream.match(/(abstract[ ]+)?class(?!-\\w)\\b/) || stream.match(/interface(?!-\\w)\\b/) || stream.match(/mixin(?!-\\w)\\b/) || stream.match(/monitor(?!-\\w)\\b/)) {\n        state.context.push([tokenizeClass, 2]);\n        state.subState.push(CLASS_SIGNATURE_AFTER_CLASS);\n        return \"keyword\"\n      }\n      return null;\n    }\n\n    function tokenizeClassError(stream, state) {\n      // This function will be popped by indentation.\n      stream.skipToEnd();\n      return \"class_error\";\n    }\n\n    function tokenizeClass(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      function signatureError() {\n        setSubState(state, CLASS_BODY); // Once the error function is popped.\n        // Eat everything until we are back to 2-indentation.\n        state.context.push([tokenizeClassError, 4]);\n        state.subState.push(null)\n        return tokenizeClassError(stream, state);\n      }\n\n      switch (subState(state)) {\n        case CLASS_SIGNATURE_AFTER_CLASS:\n          if (!stream.match(IDENTIFIER)) return signatureError();\n          setSubState(state, CLASS_SIGNATURE_AFTER_NAME);\n          return \"class_name\";\n\n        case CLASS_SIGNATURE_AFTER_NAME:\n          if (stream.match(/extends(?!-\\w)\\b/)) {\n            setSubState(state, CLASS_SIGNATURE_AFTER_EXTENDS);\n            return \"keyword\";\n          }\n          // Fall through.\n\n        case CLASS_SIGNATURE_AFTER_EXTENDS_TYPE:\n          if (stream.match(/with(?!-\\w)\\b/)) {\n            setSubState(state, CLASS_SIGNATURE_AFTER_WITH);\n            return \"keyword\";\n          }\n          if (stream.match(/implements(?!-\\w)\\b/)) {\n            setSubState(state, CLASS_SIGNATURE_AFTER_IMPLEMENTS);\n            return \"keyword\";\n          }\n          if (stream.match(\":\")) {\n            setSubState(state, CLASS_BODY);\n            return \"class_body_colon\";\n          }\n          return signatureError();\n\n        case CLASS_SIGNATURE_AFTER_EXTENDS:\n          if (!stream.match(TYPE, false)) return signatureError();\n          setSubState(state, CLASS_SIGNATURE_AFTER_EXTENDS_TYPE);\n          return tokenizeType(stream, state, false);\n\n        case CLASS_SIGNATURE_AFTER_WITH:\n        case CLASS_SIGNATURE_AFTER_IMPLEMENTS:\n          // The first *requires* an type.\n          if (!stream.match(TYPE, false)) return signatureError();\n          const nextSubState = subState(state) == CLASS_SIGNATURE_AFTER_WITH\n              ? CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME\n              : CLASS_SIGNATURE_AFTER_FIRST_IMPLEMENTS_NAME;\n          setSubState(state, nextSubState);\n          return tokenizeType(stream, state, false);\n\n        case CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME:\n        case CLASS_SIGNATURE_AFTER_FIRST_IMPLEMENTS_NAME:\n          if (stream.match(TYPE, false)) {\n            return tokenizeType(stream, state, false);\n          }\n          if (stream.match(\":\")) {\n            setSubState(state, CLASS_BODY);\n            return \"class_body_colon\";\n          }\n          if (subState(state) == CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME) {\n            if (stream.match(/implements(?!-\\w)\\b/)) {\n              setSubState(state, CLASS_SIGNATURE_AFTER_IMPLEMENTS);\n              return \"keyword\";\n            }\n          }\n          return signatureError();\n\n        case CLASS_BODY:\n          state.context.push([tokenizeMemberDeclaration, 4]);\n          state.subState.push(MEMBER_DECLARATION_START);\n          return tokenizeMemberDeclaration(stream, state);\n\n        default:\n          stream.skipToEnd();\n          return \"unformatted\";\n      }\n    }\n\n    var MEMBER_DECLARATION_START = 0;\n    var MEMBER_DECLARATION_AFTER_STATIC_ABSTRACT = 1;\n    var MEMBER_DECLARATION_AFTER_OPERATOR = 2;\n    var MEMBER_DECLARATION_AFTER_NAMED_CONSTRUCTOR = 3;\n    function tokenizeMemberDeclaration(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      if (subState(state) == MEMBER_DECLARATION_START) {\n        if (stream.match(/abstract(?!-\\w)\\b/) || stream.match(/static(?!-\\w)\\b/)) {\n          setSubState(state, MEMBER_DECLARATION_AFTER_STATIC_ABSTRACT);\n          return \"keyword\";\n        }\n        if (stream.match(/operator(?!-\\w)\\b/)) {\n          setSubState(state, MEMBER_DECLARATION_AFTER_OPERATOR);\n          return \"keyword\";\n        }\n        if (stream.match(/constructor(?!-\\w)\\b/)) {\n          if (stream.match(/\\.[a-zA-Z_]\\w*/, false)) {\n            setSubState(state, MEMBER_DECLARATION_AFTER_NAMED_CONSTRUCTOR);\n          } else {\n            state.context.push([tokenizeFunctionBody, 4]);\n            state.subState.push(null);\n            state.context.push([tokenizeFunctionSignature, 6]);\n            state.subState.push(null);\n          }\n          return \"constructor_keyword\"\n        }\n      } else if (subState(state) == MEMBER_DECLARATION_AFTER_NAMED_CONSTRUCTOR) {\n        stream.match(/\\.[a-zA-Z_]\\w*/);\n        state.context.push([tokenizeFunctionBody, 4]);\n        state.subState.push(null);\n        state.context.push([tokenizeFunctionSignature, 6]);\n        state.subState.push(null);\n        return \"member_named_constructor\"\n      }\n\n      var currentSubState = subState(state);\n\n      // Even if things go wrong, assume that we are going to parse the rest of\n      // the signature first, followed by the body.\n      // If we find a `:` we will pop the signature by hand.\n      state.context.push([tokenizeFunctionBody, 4]);\n      state.subState.push(null);\n      state.context.push([tokenizeFunctionSignature, 6]);\n      state.subState.push(null);\n      if (currentSubState == MEMBER_DECLARATION_AFTER_OPERATOR && stream.match(OVERRIDABLE_OPERATOR)) {\n        return \"member_operator_name\"\n      } else if (stream.match(IDENTIFIER)) {\n        if (isReserved(stream.current())) {\n          return \"member_name_error\";\n        }\n        if (stream.match(\".\")) {\n          if (stream.match(IDENTIFIER)) {\n            if (subState(state) == MEMBER_DECLARATION_AFTER_STATIC_ABSTRACT) {\n              return \"member_name_error\";\n            }\n            return \"named_constructor\";\n          }\n          return \"member_name_error\";\n        } else if (stream.match(\"=\")) {\n          return \"member_name_setter\";\n        } else {\n          return \"member_name\";\n        }\n      }\n      stream.eatWhile(/[^ ]/); // Skip to the next whitespace.\n      return \"member_name_error\";\n    }\n\n    function tokenizeFunctionBody(stream, state) {\n      var matched_result = tryExpression(stream, state);\n      if (matched_result) return matched_result;\n\n      stream.eatWhile(/[^ ]/);\n      return \"unformatted\";\n    }\n\n    function tryDefaultValue(stream, state) {\n      var expression_result = tryNumber(stream, state) ||\n        tryString(stream, state) ||\n        tryChar(stream, state) ||\n        tryDelimited(stream, state);\n      if (expression_result) return expression_result;\n      var identifier_result = tryIdentifier(stream, state);\n      if (identifier_result) {\n        var lastIndentation = last(state.context)[1];\n        state.context.push([tokenizeDefaultValueContinuation, lastIndentation]);\n        state.subState.push(DEFAULT_VALUE_AFTER_IDENTIFIER);\n        return identifier_result;\n      }\n      return null;\n    }\n\n    var DEFAULT_VALUE_AFTER_IDENTIFIER = 0;\n    var DEFAULT_VALUE_AFTER_DOT = 1;\n    function tokenizeDefaultValueContinuation(stream, state) {\n      switch (subState(state)) {\n        case DEFAULT_VALUE_AFTER_IDENTIFIER:\n          if (stream.match(\".\")) {\n            if (stream.match(IDENTIFIER, false)) {\n              setSubState(state, DEFAULT_VALUE_AFTER_DOT);\n              return \"dot\";\n            }\n            state.context.pop();\n            state.subState.pop();\n            return \"default_value_dot_error\";\n          }\n          if (stream.peek() == '[') {\n            setSubState(state, DEFAULT_VALUE_AFTER_IDENTIFIER);  // When we return;\n            return tryDelimited(stream, state);\n          }\n          // Not part of the default value anymore.\n          state.context.pop();\n          state.subState.pop();\n          return last(state.context)[0](stream, state);\n\n        case DEFAULT_VALUE_AFTER_DOT:\n          setSubState(state, DEFAULT_VALUE_AFTER_IDENTIFIER);\n          return tryIdentifier(stream, state);\n      }\n    }\n\n    var SIGNATURE_EXPECTING_DEFAULT_VALUE = 0;\n    var SIGNATURE_EXPECTING_TYPE = 1;\n    var SIGNATURE_AFTER_BRACKET_BLOCK = 2;\n    function tokenizeFunctionSignature(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      function error(kind) {\n        if (!result) {\n          stream.eatWhile(/[^ ]/); // Skip to the next whitespace.\n          result = kind || \"parameter_error\";\n        }\n      }\n\n      if (stream.match(\"::=\") || stream.match(\":=\")) {\n        state.context.pop();\n        state.subState.pop();\n        return \"field_assig\";\n      }\n      if (stream.match(\":\")) {\n        state.context.pop();\n        state.subState.pop();\n        return \"function_colon\";\n      }\n\n      switch (subState(state)) {\n        case SIGNATURE_EXPECTING_DEFAULT_VALUE:\n          setSubState(state, null);  // For when the sub-expression returns.\n          // TODO: tokenize default values.\n          var result = tryDefaultValue(stream, state);\n          if (!result) return error(\"default_value_error\");\n          return result;\n        case SIGNATURE_EXPECTING_TYPE:\n          setSubState(state, null);\n          if (!stream.match(TYPE, false)) return error();\n          return tokenizeType(stream, state, true);\n\n        default:\n        // Continue after the `switch`.\n      }\n      if (stream.match(\"/\")) {\n        setSubState(state, SIGNATURE_EXPECTING_TYPE);\n        return \"type_div\";\n      }\n      if (stream.match(\"->\")) {\n        setSubState(state, SIGNATURE_EXPECTING_TYPE);\n        return \"type_return\";\n      }\n      if (stream.match(\"=\")) {\n        setSubState(state, SIGNATURE_EXPECTING_DEFAULT_VALUE);\n        return \"default_equals\"\n      }\n      if (stream.match(\"[\")) {\n        setSubState(state, SIGNATURE_AFTER_BRACKET_BLOCK);\n        return \"bracket_block_open\";\n      }\n      if (stream.match(\"]\")) {\n        setSubState(state, null);\n        return \"bracket_block_close\";\n      }\n      var isNamed = false;\n      if (stream.match(\"--\")) {\n        isNamed = true;\n      }\n      var isSetting = false;\n      if (stream.match(\".\")) {\n        // Setting parameter.\n        isSetting = true;\n      }\n      var prefix = stream.current();\n      if (!stream.match(IDENTIFIER)) return error();\n      var name = stream.current().slice(prefix.length);\n      if (name == \"this\") {\n        if (isSetting || !stream.match(\".\") || !stream.match(IDENTIFIER)) {\n          return error();\n        }\n        name = stream.current().slice((name + \".\").length);\n        if (isReserved(name)) return error();\n        return \"parameter\";\n      }\n      if (isReserved(stream.current().slice(prefix.length))) {\n        return error();\n      }\n      if (isNamed) {\n        return \"named_parameter\";\n      } else {\n        return \"parameter\";\n      }\n    }\n\n    function tryToplevelDeclaration(stream, state) {\n      if (stream.match(IDENTIFIER)) {\n        state.context.push([tokenizeFunctionBody, 2]);\n        state.subState.push(null);\n        state.context.push([tokenizeFunctionSignature, 4]);\n        state.subState.push(null);\n        if (isReserved(stream.current())) {\n          return \"toplevel_name_error\";\n        }\n        if (stream.match(\"=\")) {\n          return \"toplevel_name_setter\";\n        }\n        if (stream.current().match(CONSTANT_HEURISTIC)) {\n          return \"toplevel_constant\";\n        }\n        return \"toplevel_name\";\n      }\n      return null;\n    }\n\n    // For code snippets that have an indent on the very first\n    // line we assume that we are implicitly inside a function\n    // like \"main\".\n    function tryImpliedTopLevelFunction(stream, state) {\n      if (state.startOfLine && stream.indentation() == 2) {\n        state.context.push([tokenizeFunctionBody, 2]);\n        state.subState.push(null);\n        return \"null\";\n      }\n      return null;\n    }\n\n\n    function tokenizeError(stream, state) {\n      // We could try to be more aggressive (like trying to highlight numbers,\n      // strings, ...), but the most important thing is that we make progress.\n      stream.skipToEnd();\n      return \"error\";\n    }\n\n    function tryExpression(stream, state) {\n      return tryComments(stream, state) ||\n        tryNumber(stream, state) ||\n        tryChar(stream, state) ||\n        tryNamedArgument(stream, state) ||\n        tryOperator(stream, state) ||\n        tryString(stream, state) ||\n        tryIsAs(stream, state) ||\n        // In theory we need to check whether the postfix member is\n        // prefixed by another expression but for the syntax highlighter we\n        // just assume that was the case.\n        tryPostfixMemberOrIdentifier(stream, state) ||\n        tryIdentifier(stream, state) ||\n        tryPrimitive(stream, state) ||\n        tryDelimited(stream, state) ||\n        tryControl(stream, state);\n    }\n\n    function tokenizeTopLevel(stream, state) {\n      return tryComments(stream, state) ||\n        tryImport(stream, state) ||\n        tryExport(stream, state) ||\n        tryClass(stream, state) ||\n        tryImpliedTopLevelFunction(stream, state) ||\n        tryToplevelDeclaration(stream, state) ||\n        tokenizeError(stream, state);\n    }\n\n    return {\n      startState: function (basecolumn) {\n        return {\n          startOfLine: true,\n          readNonWhitespace: false,\n          // If the last parsed token was a `:` stores the indentation at that point.\n          // Is reset every time we parse a non-whitespace token.\n          // Used for indentation.\n          atColonIndentation: -1,\n          context: [[tokenizeTopLevel, -1]],\n          subState: [null]\n        };\n      },\n\n      token: function (stream, state) {\n        if (stream.sol()) {\n          state.startOfLine = true;\n          state.readNonWhitespace = false;\n        } else if (state.readNonWhitespace) {\n          state.startOfLine = false;\n        }\n        if (stream.eatSpace()) return null;\n        if (stream.peek() == \":\") {\n          state.atColonIndentation = stream.indentation();\n        } else {\n          state.atColonIndentation = -1;\n        }\n        // Next time we aren't at the beginning of the line anymore.\n        state.readNonWhitespace = true;\n\n        if (state.startOfLine) {\n          // Drop contexts if there is a dedent.\n          while (last(state.context)[1] > stream.indentation()) {\n            state.context.pop();\n            state.subState.pop();\n          }\n        }\n\n        var tokenizer = last(state.context)[0];\n        var result = tokenizer(stream, state);\n        if (!result) return result;\n        // We have a more nuanced parsing, allowing for better highlighting\n        // (once that's supported, or if there is a better style).\n        // Simplify here, so that the standard CSS works.\n\n        // CodeMirror highlighting styles:\n        //  - meta\n        //  - keyword\n        //  - atom\n        //  - number\n        //  - def\n        //  - variable, variable-2, variable-3\n        //  - type\n        //  - property\n        //  - operator\n        //  - comment\n        //  - string, string-2\n        //  - qualifier\n        //  - builtin\n        //  - bracket\n        //  - tag\n        //  - attribute\n        //  - link\n        //  - error\n\n        switch (result) {\n          case \"unformatted\":\n          case \"import_path\":\n          case \"export_identifier\":\n            result = null;\n            break;\n\n          case \"type_special\":\n          case \"keyword\":\n          case \"is_as\":\n          case \"constructor_keyword\":\n          case \"control\":\n            result = \"keyword\";\n            break;\n\n          case \"atom\":\n          case \"constant\":\n          case \"toplevel_constant\":\n            result = \"atom\";\n            break;\n\n          case \"float\":\n          case \"hex_float\":\n          case \"integer\":\n          case \"hex\":\n          case \"binary\":\n            result = \"number\";\n            break;\n\n          case \"member_name\":\n          case \"member_name_setter\":\n          case \"member_named_constructor\":\n          case \"declaration\":\n          case \"toplevel_name\":\n          case \"toplevel_name_setter\":\n          case \"class_name\":\n          case \"member_operator_name\":\n              result = \"def\";\n            break;\n\n          case \"import_show_identifier\":\n          case \"named_constructor\":\n          case \"named_parameter\":\n          case \"parameter\":\n            result = \"variable\";\n            break;\n\n          case \"identifier\":\n            result = \"variable-2\";\n            break;\n\n          case \"type\":\n          case \"type_name\":\n          case \"type_short\":\n            result = \"type\";\n            break;\n\n          case \"import_star\":\n          case \"export_star\":\n          case \"type_dot\":\n          case \"default_equals\":\n          case \"function_colon\":\n          case \"field_assig\": // Also for globals.\n          case \"type_div\":\n          case \"type_return\":\n          case \"class_body_colon\":\n          case \"dot\":\n          case \"string_dollar\":\n          case \"colon\":\n          case \"relational\":\n          case \"op_assig\":\n          case \"overridable_op\":\n          case \"op_slice\":\n          case \"assig\":\n          case \"define\":\n          case \"separator\":\n            result = \"operator\";\n            break;\n\n          case \"singleline_string\":\n          case \"multiline_string\":\n          case \"character\":\n            result = \"string\";\n            break;\n\n          case \"unfinished_string\":\n          case \"missing_escape_expression\":\n          case \"unfinished_character\":\n            result = \"string error\";\n            break;\n\n          case \"string_format\":\n          case \"named_argument\":\n          case \"import_prefix_name\":\n          case \"type_prefix\":\n            result = \"qualifier\";\n            break;\n\n          case \"special_var\":\n          case \"primitive\":\n            result = \"builtin\";\n            break;\n\n          case \"bracket_block_open\":\n          case \"bracket_block_close\":\n          case \"paren\":\n          case \"bracket\":\n            result = \"bracket\";\n            break;\n\n          case \"import_error\":\n          case \"export_error\":\n          case \"class_error\":\n          case \"member_name_error\":\n          case \"parameter_error\":\n          case \"default_value_error\":\n          case \"toplevel_name_error\":\n          case \"default_value_dot_error\":\n          case \"is_as_error\":\n            result = \"error\"; // Might want to just not color.\n            break;\n\n          default:\n            /* do nothing. */\n            break;\n        }\n        return result;\n      },\n\n      indent: function (state, textAfter) {\n        if (state.atColonIndentation == -1) return CodeMirror.Pass;\n        // We don't use `config.indentUnit`. Toit is 2 chars.\n        return state.atColonIndentation + 2;\n      },\n\n      closeBrackets: { triples: \"\\\"\" },\n      lineComment: \"//\",\n      blockCommentStart: \"/*\",\n      blockCommentEnd: \"*/\",\n      fold: \"indent\",\n    };\n  });\n\n  CodeMirror.defineMIME(\"text/x-toit\", \"toit\");\n\n});\n","import { createMuiTheme } from \"@material-ui/core\";\n\nconst layout = {\n  sidebarWidth: \"18rem\",\n  headerHeight: 64,\n  footerHeight: \"6rem\",\n};\n\nexport const theme = createMuiTheme({\n  layout: layout,\n  palette: {\n    type: \"light\",\n    background: {\n      paper: \"#fff\",\n      default: \"#fff\",\n    },\n    text: {\n      primary: \"#000\",\n    },\n    primary: {\n      main: \"#5E6FDB\",\n    },\n    secondary: {\n      main: \"#55A398\",\n    },\n  },\n  typography: {\n    fontFamily: \"Roboto, Helvetica, sans-serif\",\n    body1: {},\n    body2: {\n      fontSize: \"0.80rem\",\n    },\n    h1: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"4.0rem\",\n    },\n    h2: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"3.0rem\",\n    },\n    h3: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"2.0rem\",\n    },\n    h4: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"1.5rem\",\n    },\n    h5: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"1.125rem\",\n    },\n    h6: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"1.07rem\",\n    },\n  },\n});\n\nexport const sideBarTheme = createMuiTheme({\n  layout: layout,\n  palette: {\n    type: \"dark\",\n    background: {\n      paper: \"#000\",\n      default: \"#000\",\n    },\n    text: {\n      primary: \"#fff\",\n    },\n    primary: {\n      main: \"#FAC864\",\n    },\n    secondary: {\n      main: \"#5E6FDB\",\n    },\n  },\n  typography: {\n    fontFamily: \"Roboto, Helvetica, sans-serif\",\n    body1: {},\n    body2: {\n      fontSize: \"0.80rem\",\n    },\n  },\n});\n\n/**\n * Since material-ui lengths can be defined as numbers (pixels) we need to\n * convert them sometimes.\n *\n * I've searched in the material-ui code for about an hour, since there must be\n * a util there, but I couldn't find it.\n */\nexport function length(length: number | string): string {\n  return typeof length === \"string\" ? length : `${length}px`;\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  Grid,\n  StyleRules,\n  Theme,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React, { ErrorInfo } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    grid: {\n      margin: theme.spacing(3),\n    },\n  });\n\ninterface ErrorBoundaryProps extends WithStyles<typeof styles> {\n  children: React.ReactNode;\n}\n\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps> {\n  state = {\n    hasError: false,\n  };\n\n  componentDidCatch(error: Error, info: ErrorInfo): void {\n    // Display fallback UI\n    this.setState({ hasError: true });\n  }\n\n  render(): JSX.Element {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      console.log(\"ERROR: In the object \");\n      return (\n        <Grid item className={this.props.classes.grid}>\n          <h1>Something went wrong.</h1>\n          <Link to={`/#`}>Home Page</Link>\n        </Grid>\n      );\n    } else {\n      return <>{this.props.children}</>;\n    }\n  }\n}\n\nexport default withStyles(styles)(ErrorBoundary);\n","import {\n  Box,\n  createStyles,\n  InputBase,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport React, { memo } from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    search: {\n      padding: \"2px 4px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      flex: 1,\n    },\n    input: {\n      marginLeft: theme.spacing(1),\n      flex: 1,\n    },\n    clearIcon: {\n      marginRight: theme.spacing(2),\n      cursor: \"pointer\",\n    },\n  })\n);\n\ninterface SearchBarProps {\n  searchBy: string;\n  onSearch: (searchString: string) => void;\n  onFocus?: () => void;\n}\n\nfunction SearchBar(props: SearchBarProps): JSX.Element {\n  const handleSearchStringChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ): void => {\n    props.onSearch(event.target.value);\n  };\n\n  const resetSearchString = (): void => {\n    if (props.searchBy) {\n      props.onSearch(\"\");\n    }\n  };\n\n  const classes = useStyles();\n\n  return (\n    <>\n      <Box\n        className={classes.search}\n        border={1}\n        borderLeft={0}\n        borderTop={0}\n        borderRight={0}\n      >\n        <SearchIcon />\n        <InputBase\n          className={classes.input}\n          placeholder=\"Search\"\n          inputProps={{ \"aria-label\": \"search devices\" }}\n          onChange={handleSearchStringChange}\n          value={props.searchBy}\n          onClick={(): void => {\n            if (props.onFocus) {\n              props.onFocus();\n            }\n          }}\n        />\n        <ClearIcon\n          fontSize=\"small\"\n          className={classes.clearIcon}\n          onClick={resetSearchString}\n        />\n      </Box>\n    </>\n  );\n}\n\nexport default memo(SearchBar);\n","import {\n  List,\n  ListItem,\n  makeStyles,\n  Paper,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport {\n  Searchable,\n  SearchableClass,\n  SearchableFunction,\n  SearchableInterface,\n  SearchableLibrary,\n  SearchableMethod,\n} from \"../../model/search\";\nimport { SEARCH_BAR_WIDTH, SEARCH_RESULTS_WIDTH } from \"./SearchView\";\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: \"fixed\",\n    width: SEARCH_RESULTS_WIDTH,\n    maxHeight: 500,\n    overflow: \"auto\",\n    marginTop: 2,\n    marginLeft: SEARCH_BAR_WIDTH - SEARCH_RESULTS_WIDTH,\n  },\n  listItem: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    flexDirection: \"column\",\n  },\n  text: {\n    display: \"inline\",\n    color: theme.palette.secondary.main,\n  },\n  emphText: {\n    display: \"inline\",\n    color: theme.palette.primary.dark,\n  },\n}));\n\ninterface SearchResultsProps {\n  results: Searchable[];\n  hideResults: boolean;\n}\n\nexport default function SearchResults(props: SearchResultsProps): JSX.Element {\n  const classes = useStyles();\n\n  const results = props.results.map((item, index) => (\n    <ResultItem item={item} key={\"resultItem\" + index} />\n  ));\n\n  return (\n    <>\n      {!props.hideResults && results.length > 0 && (\n        <Paper className={classes.root} square>\n          <List>{results}</List>\n        </Paper>\n      )}\n    </>\n  );\n}\n\nfunction ResultItem(props: { item: Searchable }): JSX.Element {\n  const classes = useStyles();\n\n  let name = \"\";\n  let from = \"\";\n\n  switch (props.item.type) {\n    case \"library\": {\n      const item = props.item as SearchableLibrary;\n      name = item.name;\n      from = item.ref.path.join(\".\");\n      break;\n    }\n    case \"interface\": {\n      const item = props.item as SearchableInterface;\n      name = item.name;\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"mixin\": {\n      const item = props.item as SearchableInterface;\n      name = item.name;\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"class\": {\n      const item = props.item as SearchableClass;\n      name = item.name;\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"function\": {\n      const item = props.item as SearchableFunction;\n      name = item.name + \" \" + item.parameters + \" \";\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"method\": {\n      const item = props.item as SearchableMethod;\n      name = item.name + \" \" + item.parameters + \" \";\n      from =\n        item.className + \" in \" + item.ref.classRef.libraryRef.path.join(\".\");\n      break;\n    }\n  }\n\n  return (\n    <ListItem\n      button\n      component=\"a\"\n      href={\".\" + props.item.url}\n      className={classes.listItem}\n    >\n      <div>\n        <Typography className={classes.text}>{name} </Typography>\n        <Typography className={classes.emphText}>{props.item.type}</Typography>\n      </div>\n      {from && (\n        <div>\n          <Typography variant=\"body2\" className={classes.emphText}>\n            from {from}\n          </Typography>\n        </div>\n      )}\n    </ListItem>\n  );\n}\n","import {\n  ClickAwayListener,\n  createStyles,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport Fuse from \"fuse.js\";\nimport React from \"react\";\nimport {\n  SearchableClass,\n  SearchableFunction,\n  SearchableInterface,\n  SearchableLibrary,\n  SearchableMethod,\n  SearchableMixin,\n  SearchableModel,\n} from \"../../model/search\";\nimport SearchBar from \"./SearchBar\";\nimport SearchResults from \"./SearchResults\";\n\nexport const SEARCH_BAR_WIDTH = 300;\nexport const SEARCH_RESULTS_WIDTH = 400;\n\nconst styles = createStyles({\n  searchBar: {\n    width: SEARCH_BAR_WIDTH,\n    marginLeft: \"auto\",\n  },\n});\n\nexport interface SearchProps extends WithStyles<typeof styles> {\n  model: SearchableModel;\n}\n\ninterface SearchState {\n  searchBy: string;\n  libraries: SearchableLibrary[];\n  classes: SearchableClass[];\n  interfaces: SearchableInterface[];\n  mixins: SearchableMixin[];\n  functions: SearchableFunction[];\n  methods: SearchableMethod[];\n  hideResults: boolean;\n}\n\nlet delayTimer: number;\n\nclass SearchView extends React.Component<SearchProps, SearchState> {\n  state = {\n    searchBy: \"\",\n    libraries: [],\n    classes: [],\n    interfaces: [],\n    mixins: [],\n    functions: [],\n    methods: [],\n    hideResults: false,\n  };\n\n  search<T extends { name: string }>(\n    searchIn: T[],\n    searchBy: string\n  ): Fuse.FuseResult<T>[] {\n    const options = {\n      keys: [\"name\"],\n      threshold: 0.01,\n      distance: 10000000,\n    };\n    return new Fuse(searchIn, options).search(searchBy);\n  }\n\n  onSearch = (searchString: string): void => {\n    this.setState({ searchBy: searchString });\n\n    clearTimeout(delayTimer);\n    delayTimer = window.setTimeout(\n      () => {\n        let libraries = [] as SearchableLibrary[];\n        let classes = [] as SearchableClass[];\n        let interfaces = [] as SearchableInterface[];\n        let mixins = [] as SearchableMixin[];\n        let functions = [] as SearchableFunction[];\n        let methods = [] as SearchableMethod[];\n\n        if (searchString && searchString.length > 1) {\n          libraries = this.search(this.props.model.libraries, searchString).map(\n            (m) => m.item\n          );\n          interfaces = this.search(\n            this.props.model.interfaces,\n            searchString\n          ).map((inter) => inter.item);\n          mixins = this.search(this.props.model.mixins, searchString).map(\n            (mixin) => mixin.item\n          );\n          classes = this.search(this.props.model.classes, searchString).map(\n            (c) => c.item\n          );\n          functions = this.search(this.props.model.functions, searchString).map(\n            (f) => f.item\n          );\n          methods = this.search(this.props.model.methods, searchString).map(\n            (m) => m.item\n          );\n        }\n\n        this.setState({\n          searchBy: searchString,\n          libraries: libraries,\n          interfaces: interfaces,\n          classes: classes,\n          mixins: mixins,\n          functions: functions,\n          methods: methods,\n        });\n      },\n      searchString ? 200 : 0\n    );\n  };\n\n  onFocus = (): void => {\n    this.setState({ hideResults: false });\n  };\n\n  onClickAway = (): void => {\n    this.setState({ hideResults: true });\n  };\n\n  render(): JSX.Element {\n    return (\n      <ClickAwayListener onClickAway={this.onClickAway}>\n        <div className={this.props.classes.searchBar}>\n          <SearchBar\n            searchBy={this.state.searchBy}\n            onSearch={this.onSearch}\n            onFocus={this.onFocus}\n          />\n          <SearchResults\n            results={[\n              ...this.state.classes,\n              ...this.state.interfaces,\n              ...this.state.functions,\n              ...this.state.methods,\n              ...this.state.libraries,\n            ]}\n            hideResults={this.state.hideResults}\n          />\n        </div>\n      </ClickAwayListener>\n    );\n  }\n}\n\nexport default withStyles(styles)(SearchView);\n","import { connect } from \"react-redux\";\nimport SearchView, { SearchProps } from \"../../components/header/SearchView\";\nimport { RootState } from \"../../redux/doc\";\n\nconst mapStateToProps = (state: RootState): Pick<SearchProps, \"model\"> => {\n  return {\n    model: state.doc.searchableModel || {\n      libraries: [],\n      classes: [],\n      interfaces: [],\n      mixins: [],\n      functions: [],\n      methods: [],\n    },\n  };\n};\n\nexport default connect(mapStateToProps)(SearchView);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport styled from \"@emotion/styled\";\nimport { AppBar } from \"@material-ui/core\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport React from \"react\";\nimport { length } from \"../../assets/theme\";\nimport Search from \"../../containers/header/Search\";\n\nconst StyledAppBar = styled(AppBar)`\n  height: ${({ theme }) => theme.layout.headerHeight};\n  left: ${({ theme }) => theme.layout.sidebarWidth};\n  width: calc(100% - ${({ theme }) => length(theme.layout.sidebarWidth)});\n  border-bottom: 1px solid black;\n  background: rgba(255, 255, 255, 0.6);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n`;\n\nexport function HeaderBar(): JSX.Element {\n  return (\n    <StyledAppBar color=\"default\" position=\"fixed\" elevation={0}>\n      <Toolbar>\n        <Search />\n      </Toolbar>\n    </StyledAppBar>\n  );\n}\n\nexport default HeaderBar;\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  StyleRules,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    header: {\n      paddingBottom: theme.spacing(4),\n    },\n    section: {\n      paddingBottom: theme.spacing(2),\n    },\n  });\n\ntype WelcomeFolderPageProps = WithStyles<typeof styles>;\n\nclass WelcomeFolderPage extends React.PureComponent<WelcomeFolderPageProps> {\n  render(): JSX.Element {\n    return (\n      <>\n        <Typography variant=\"h3\" className={this.props.classes.header}>\n          Toitdoc Viewer\n        </Typography>\n        <Typography className={this.props.classes.section}>\n          Welcome to the Toitdoc viewer.\n        </Typography>\n        <Typography className={this.props.classes.section}>\n          Select the library you want to view from the list on the left.\n        </Typography>\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(WelcomeFolderPage);\n","import {\n  Class,\n  Function,\n  Libraries,\n  Library,\n  Method,\n  Shape,\n} from \"../model/model\";\nimport {\n  ClassMemberRef,\n  LinkRef,\n  TopLevelItemRef,\n  TopLevelRef,\n} from \"../model/reference\";\n\nexport function libraryFrom(\n  libraryName: string,\n  rootLibraries: Libraries\n): Library | undefined {\n  const path = libraryName.split(\"/\");\n  let library = undefined;\n  let libraries = rootLibraries;\n\n  for (const p of path) {\n    library = libraries[p];\n    if (!library) {\n      break;\n    }\n    libraries = library.libraries;\n  }\n  return library;\n}\n\nexport function classFrom(\n  libraryName: string,\n  className: string,\n  rootLibraries: Libraries\n): Class | undefined {\n  const library = libraryFrom(libraryName, rootLibraries);\n  return (\n    library?.classes[className] ||\n    library?.exportedClasses[className] ||\n    library?.interfaces[className] ||\n    library?.exportedInterfaces[className] ||\n    library?.mixins[className] ||\n    library?.exportedMixins[className]\n  );\n}\n\nexport function libraryFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelRef\n): Library | undefined {\n  return libraryFrom(ref.path.join(\"/\"), rootLibraries);\n}\n\nexport function classFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelItemRef\n): Class | undefined {\n  const library = libraryFromRef(rootLibraries, ref.libraryRef);\n  if (!library || ref.offset === undefined) {\n    return undefined;\n  }\n\n  return (\n    Object.values(library.classes)[ref.offset] ||\n    Object.values(library.exportedClasses)[ref.offset] ||\n    Object.values(library.interfaces)[ref.offset] ||\n    Object.values(library.exportedInterfaces)[ref.offset] ||\n    Object.values(library.mixins)[ref.offset] ||\n    Object.values(library.exportedMixins)[ref.offset]\n  );\n}\n\nexport function functionFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelItemRef\n): Function | undefined {\n  const library = libraryFromRef(rootLibraries, ref.libraryRef);\n  if (!library || ref.offset === undefined) {\n    return undefined;\n  }\n\n  return library.functions[ref.offset] || library.exportedFunctions[ref.offset];\n}\n\nexport function methodFromRef(\n  rootLibraries: Libraries,\n  ref: ClassMemberRef\n): Method | undefined {\n  const klass = classFromRef(rootLibraries, ref.classRef);\n  if (!klass || ref.offset === undefined) {\n    return undefined;\n  }\n  return klass.methods[ref.offset] || klass.statics[ref.offset];\n}\n\n// URL related functions\n\nexport function getFunctionId(functionName: string, shape?: Shape): string {\n  if (!shape) {\n    return \"\";\n  }\n  const shapeString = `${shape.arity},${shape.totalBlockCount},${\n    shape.namedBlockCount\n  },${shape.names.join(\",\")}`;\n  return encodeURIComponent(functionName + \"(\" + shapeString + \")\");\n}\n\nexport function getFieldId(fieldName: string): string {\n  return fieldName;\n}\n\nfunction libraryUrl(baseUrl: string, path: string[]): string {\n  return baseUrl + \"/\" + path.join(\"/\") + \"/library-summary\";\n}\n\nfunction classUrl(baseUrl: string, path: string[], name: string): string {\n  return baseUrl + \"/\" + path.join(\"/\") + \"/class-\" + name;\n}\n\nfunction memberUrl(classUrl: string, id: string): string {\n  return classUrl + \"#\" + id;\n}\n\nfunction globalUrl(libraryUrl: string, id: string): string {\n  return libraryUrl + \"#\" + id;\n}\n\nexport function topLevelRefToId(ref: TopLevelRef): string {\n  return ref.name + \"-\" + ref.path.join(\"/\");\n}\n\nexport function classUrlFromRef(ref: TopLevelItemRef): string {\n  return classUrl(ref.libraryRef.baseUrl, ref.libraryRef.path, ref.name);\n}\n\nexport function libraryUrlFromRef(ref: TopLevelRef): string {\n  return libraryUrl(ref.baseUrl, ref.path);\n}\n\nexport function functionUrlFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelItemRef\n): string {\n  const fhunction = functionFromRef(rootLibraries, ref);\n  if (!fhunction) {\n    return \"/\";\n  }\n  return globalUrl(\n    libraryUrlFromRef(ref.libraryRef),\n    getFunctionId(fhunction.name, fhunction.shape)\n  );\n}\n\nexport function methodUrlFromRef(\n  rootLibraries: Libraries,\n  ref: ClassMemberRef\n): string {\n  const method = methodFromRef(rootLibraries, ref);\n  if (!method) {\n    return \"/\";\n  }\n  return memberUrl(\n    classUrlFromRef(ref.classRef),\n    getFunctionId(method.name, method.shape)\n  );\n}\n\nexport function urlFromLinkRef(ref: LinkRef): string {\n  switch (ref.kind) {\n    case \"class\":\n      return classUrl(ref.baseUrl, ref.path, ref.name);\n    case \"constructor\":\n    case \"factory\":\n    case \"method\":\n    case \"static-method\":\n      return memberUrl(\n        classUrl(ref.baseUrl, ref.path, ref.holder),\n        getFunctionId(ref.name, ref.shape)\n      );\n    case \"field\":\n      return memberUrl(\n        classUrl(ref.baseUrl, ref.path, ref.holder),\n        getFieldId(ref.name)\n      );\n    case \"global\":\n      return globalUrl(libraryUrl(ref.baseUrl, ref.path), ref.name);\n    case \"global-method\":\n      return globalUrl(\n        libraryUrl(ref.baseUrl, ref.path),\n        getFunctionId(ref.name, ref.shape)\n      );\n    case \"parameter\":\n      return \"\";\n    default:\n      return \"\";\n  }\n}\n","import {\n  ClassMemberRef,\n  LinkRef,\n  TopLevelItemRef,\n  TopLevelRef,\n} from \"./reference\";\n\nexport type Libraries = { [libraryName: string]: Library };\nexport type Classes = { [className: string]: Class };\n\nexport const CATEGORY_FUNDAMENTAL = \"fundamental\";\nexport const CATEGORY_JUST_THERE = \"just_there\";\nexport const CATEGORY_MISC = \"misc\";\nexport const CATEGORY_SUB = \"sub\";\n\nexport type Category =\n  | typeof CATEGORY_FUNDAMENTAL\n  | typeof CATEGORY_JUST_THERE\n  | typeof CATEGORY_MISC\n  | typeof CATEGORY_SUB;\n\nexport const CLASS_KIND_CLASS = \"class\";\nexport const CLASS_KIND_INTERFACE = \"interface\";\nexport const CLASS_KIND_MIXIN = \"mixin\";\n\nexport type ClassKind =\n  | typeof CLASS_KIND_CLASS\n  | typeof CLASS_KIND_INTERFACE\n  | typeof CLASS_KIND_MIXIN;\n\nexport interface Library {\n  name: string;\n  id: TopLevelRef;\n  libraries: Libraries;\n  classes: Classes;\n  interfaces: Classes;\n  mixins: Classes;\n  exportedClasses: Classes;\n  exportedInterfaces: Classes;\n  exportedMixins: Classes;\n  globals: Global[];\n  exportedGlobals: Global[];\n  functions: Function[];\n  exportedFunctions: Function[];\n  toitdoc?: Doc;\n  category: Category;\n}\n\nexport interface Class {\n  name: string;\n  id: TopLevelItemRef;\n  kind: ClassKind;\n  extends?: TopLevelItemRef;\n  interfaces: TopLevelItemRef[];\n  mixins: TopLevelItemRef[];\n  fields: Field[];\n  constructors: Method[];\n  statics: Method[];\n  methods: Method[];\n  toitdoc?: Doc;\n}\n\nexport interface Global {\n  name: string;\n  id: TopLevelItemRef;\n  toitdoc?: Doc;\n}\n\nexport interface Function {\n  name: string;\n  id: TopLevelItemRef;\n  parameters: Parameter[];\n  returnType: Type;\n  toitdoc?: Doc;\n  shape?: Shape;\n  isInherited: boolean;\n}\n\nexport interface Method {\n  name: string;\n  id: ClassMemberRef;\n  parameters: Parameter[];\n  returnType: Type;\n  toitdoc?: Doc;\n  shape?: Shape;\n  isInherited: boolean;\n}\n\nexport interface Parameter {\n  name: string;\n  isBlock: boolean;\n  isNamed: boolean;\n  isRequired: boolean;\n  defaultValue?: string;\n  type: Type;\n}\n\nexport interface Field {\n  name: string;\n  id: ClassMemberRef;\n  type: Type;\n  toitdoc?: Doc;\n  isInherited: boolean;\n}\n\nexport interface Type {\n  isNone: boolean;\n  isAny: boolean;\n  isBlock: boolean;\n  reference?: TopLevelItemRef;\n}\n\nexport interface Shape {\n  arity: number;\n  totalBlockCount: number;\n  namedBlockCount: number;\n  names: string[];\n}\n\n// Toitdoc related\n\nexport const DOC_STATEMENT_PARAGRAPH = \"DOC_STATEMENT_PARAGRAPH\";\nexport const DOC_STATEMENT_ITEMIZED = \"DOC_STATEMENT_ITEMIZED\";\nexport const DOC_STATEMENT_ITEM = \"DOC_STATEMENT_ITEM\";\nexport const DOC_STATEMENT_CODE_SECTION = \"DOC_STATEMENT_CODE_SECTION\";\nexport const DOC_EXPRESSION_CODE = \"DOC_EXPRESSION_CODE\";\nexport const DOC_EXPRESSION_LINK = \"DOC_EXPRESSION_LINK\";\nexport const DOC_EXPRESSION_TEXT = \"DOC_EXPRESSION_TEXT\";\nexport const DOC_DOCREF = \"DOC_DOCREF\";\n\nexport type Doc = DocSection[];\n\nexport interface DocSection {\n  title: string | null;\n  level: number;\n  statements: DocStatement[];\n}\n\nexport type DocStatement =\n  | DocStatementParagraph\n  | DocStatementItemized\n  | DocStatementCodeSection;\n\nexport interface DocStatementItemized {\n  type: typeof DOC_STATEMENT_ITEMIZED;\n  items: DocStatementItem[];\n}\n\nexport interface DocStatementItem {\n  type: typeof DOC_STATEMENT_ITEM;\n  statements: DocStatement[];\n}\n\nexport interface DocStatementCodeSection {\n  type: typeof DOC_STATEMENT_CODE_SECTION;\n  text: string;\n}\n\nexport interface DocStatementParagraph {\n  type: typeof DOC_STATEMENT_PARAGRAPH;\n  expressions: DocExpression[];\n}\n\nexport type DocExpression =\n  | DocExpressionCode\n  | DocExpressionText\n  | DocExpressionLink\n  | DocRef;\n\nexport interface DocExpressionCode {\n  type: typeof DOC_EXPRESSION_CODE;\n  text: string;\n}\n\nexport interface DocExpressionText {\n  type: typeof DOC_EXPRESSION_TEXT;\n  text: string;\n}\n\nexport interface DocExpressionLink {\n  type: typeof DOC_EXPRESSION_LINK;\n  text: string;\n  url: string;\n}\n\nexport interface DocRef {\n  type: typeof DOC_DOCREF;\n  text: string;\n  reference: LinkRef;\n}\n","import styled from \"@emotion/styled\";\nimport \"codemirror/lib/codemirror.css\";\nimport React from \"react\";\nimport { UnControlled as CodeMirror } from \"react-codemirror2\";\nimport \"../../assets/codemirror/codemirror.css\";\nimport \"../../assets/codemirror/toit\";\n\nconst Wrapper = styled.div`\n  .CodeMirror {\n    background: #b0b8ed20;\n    padding: 1rem;\n    border-radius: 1em;\n    margin-left: -1rem;\n    margin-right: -1rem;\n    width: auto;\n  }\n`;\n\ninterface CodeBlockProps {\n  code: string;\n}\n\nexport default function CodeBlock(props: CodeBlockProps): JSX.Element {\n  return (\n    <Wrapper>\n      <CodeMirror\n        value={props.code.replace(/^\\n/, \"\").replace(/\\n$/, \"\")}\n        options={{\n          mode: \"toit\",\n          readOnly: true,\n          tabSize: 2,\n        }}\n      />\n    </Wrapper>\n  );\n}\n","import React from \"react\";\nimport \"./ExternalLink.css\";\n\nexport default function ExternalLink(props: {\n  to: string;\n  text: string;\n}): JSX.Element {\n  return (\n    <>\n      <span className=\"external-container\">\n        <a href={props.to} className=\"external\">\n          {props.text}\n        </a>\n        <span className=\"external-link-icon\" aria-hidden=\"true\"></span>\n      </span>\n    </>\n  );\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport { makeStyles, Typography } from \"@material-ui/core\";\nimport { Variant } from \"@material-ui/core/styles/createTypography\";\nimport React from \"react\";\nimport { HashLink } from \"react-router-hash-link\";\nimport { urlFromLinkRef } from \"../../misc/util\";\nimport {\n  Doc,\n  DOC_DOCREF,\n  DOC_EXPRESSION_CODE,\n  DOC_EXPRESSION_LINK,\n  DOC_EXPRESSION_TEXT,\n  DOC_STATEMENT_CODE_SECTION,\n  DOC_STATEMENT_ITEMIZED,\n  DOC_STATEMENT_PARAGRAPH,\n  DocExpression,\n  DocExpressionCode,\n  DocExpressionLink,\n  DocExpressionText,\n  DocRef,\n  DocSection,\n  DocStatement,\n  DocStatementCodeSection,\n  DocStatementItem,\n  DocStatementItemized,\n  DocStatementParagraph,\n} from \"../../model/model\";\nimport CodeBlock from \"../general/CodeBlock\";\nimport ExternalLink from \"../general/ExternalLink\";\n\n// TODO: Pull all format and structure from old printStatements function (structure from old format: https://github.com/toitware/web-toitdocs/blob/e74e3d5478fb3fd350e28f7801d69b7f38a1d563/src/components/toitdoc_info.js#L26)\n\nconst useStyles = makeStyles((theme) => ({\n  statementParagraph: { paddingBottom: theme.spacing(1) },\n  sectionTitle: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(1),\n  },\n  otherDocRef: {\n    fontWeight: 590,\n  },\n  parameterDocRef: {\n    fontWeight: 590,\n  },\n}));\n\nfunction StatementCodeSection(props: {\n  code: DocStatementCodeSection;\n}): JSX.Element {\n  return <CodeBlock code={props.code.text} />;\n}\n\nfunction ExpressionCode(props: { code: DocExpressionCode }): JSX.Element {\n  return <code>{props.code.text}</code>;\n}\n\nfunction ExpressionText(props: { text: DocExpressionText }): JSX.Element {\n  return <span>{props.text.text}</span>;\n}\n\nfunction ExpressionLink(props: { link: DocExpressionLink }): JSX.Element {\n  return (\n    <a href={props.link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n      {props.link.text}\n    </a>\n  );\n}\n\nfunction StatementItemized(props: {\n  itemized: DocStatementItemized;\n}): JSX.Element {\n  return (\n    <ul>\n      {props.itemized.items.map((item: DocStatementItem) =>\n        item.statements.map((statement, index) => (\n          <li key={index}>\n            <Statement statement={statement} />\n          </li>\n        ))\n      )}\n    </ul>\n  );\n}\n\nfunction StatementParagraph(props: {\n  statement: DocStatementParagraph;\n  isHeader?: boolean;\n}): JSX.Element {\n  const classes = useStyles();\n  return (\n    <div className={props.isHeader ? \"\" : classes.statementParagraph}>\n      {props.statement.expressions.map((expr: DocExpression, index: number) => (\n        <Expression key={\"expression_\" + index} expression={expr} />\n      ))}\n    </div>\n  );\n}\n\nfunction ToitdocRef(props: { reference: DocRef }): JSX.Element {\n  const classes = useStyles();\n  const url = urlFromLinkRef(props.reference.reference);\n  if (!url) {\n    let className: string;\n    switch (props.reference.reference.kind) {\n      case \"parameter\":\n        className = classes.parameterDocRef;\n        break;\n      default:\n        className = classes.otherDocRef;\n    }\n    return <span className={className}>{props.reference.text}</span>;\n  }\n  if (props.reference.reference.baseUrl !== \"\") {\n    return <ExternalLink to={url} text={props.reference.text}></ExternalLink>;\n  }\n  return <HashLink to={url}>{props.reference.text}</HashLink>;\n}\n\nfunction Expression(props: { expression: DocExpression }): JSX.Element {\n  const expression = props.expression;\n  switch (expression.type) {\n    case DOC_EXPRESSION_CODE:\n      return <ExpressionCode code={expression} />;\n    case DOC_EXPRESSION_TEXT:\n      return <ExpressionText text={expression} />;\n    case DOC_EXPRESSION_LINK:\n      return <ExpressionLink link={expression} />;\n    case DOC_DOCREF:\n      return <ToitdocRef reference={expression} />;\n    default:\n      throw Error(\"unhandled expression: \" + expression);\n  }\n}\n\nfunction Statement(props: {\n  statement: DocStatement;\n  isHeader?: boolean;\n}): JSX.Element {\n  const statement = props.statement;\n  switch (statement.type) {\n    case DOC_STATEMENT_PARAGRAPH:\n      return (\n        <StatementParagraph isHeader={props.isHeader} statement={statement} />\n      );\n    case DOC_STATEMENT_CODE_SECTION:\n      return <StatementCodeSection code={statement} />;\n    case DOC_STATEMENT_ITEMIZED:\n      return <StatementItemized itemized={statement} />;\n    default:\n      throw Error(\"unhandled statement: \" + statement);\n  }\n}\n\nfunction Section(props: { section: DocSection }): JSX.Element {\n  const classes = useStyles();\n  let level = props.section.level;\n  if (level > 2) level = 2;\n  const variant = (\"h\" + (props.section.level + 4)) as Variant;\n  return (\n    <>\n      <Typography variant={variant} className={classes.sectionTitle}>\n        {props.section.title}\n      </Typography>\n      {props.section.statements.map((statement, index) => (\n        <Statement key={\"statement_\" + index} statement={statement} />\n      ))}\n    </>\n  );\n}\n\nfunction headerToitdoc(toitdoc?: Doc): DocStatement | undefined {\n  if (!toitdoc) return toitdoc;\n  if (toitdoc.length === 0) return undefined;\n  const first = toitdoc[0];\n  const statements = first.statements;\n  if (statements.length === 0) return undefined;\n  return statements[0];\n}\n\n// Function that prints the content of currently presented element.\nfunction Toitdocs(props: {\n  value?: Doc;\n  headerOnly?: boolean;\n}): JSX.Element | null {\n  if (props.headerOnly) {\n    const statement = headerToitdoc(props.value);\n    if (!statement) return null;\n    return (\n      <Statement\n        key=\"statement_0\"\n        isHeader={props.headerOnly}\n        statement={statement}\n      />\n    );\n  }\n  const value = props.value;\n  if (!value) {\n    return null;\n  }\n  return (\n    <>\n      {value.map((section, index) => (\n        <Section key={\"section_\" + index} section={section} />\n      ))}\n    </>\n  );\n}\n\nexport default Toitdocs;\n","// Copyright (C) 2021 Toitware ApS. All rights reserved.\n\nimport { Theme, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  StyleRules,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { libraryUrlFromRef } from \"../../misc/util\";\nimport {\n  CATEGORY_FUNDAMENTAL,\n  CATEGORY_JUST_THERE,\n  CATEGORY_MISC,\n  Libraries,\n  Library,\n} from \"../../model/model\";\nimport Toitdocs from \"../doc/Toitdocs\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    section: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(0.5),\n    },\n    libList: {\n      \"column-count\": 2,\n      \"column-gap\": theme.spacing(2),\n    },\n    libEntry: {\n      paddingBottom: theme.spacing(1),\n      \"break-inside\": \"avoid-column\",\n    },\n    toitdoc: {\n      paddingTop: theme.spacing(0.3),\n    },\n  });\n\nexport interface SummaryViewProps extends WithStyles<typeof styles> {\n  libraries: Libraries;\n}\n\nclass SummaryView extends React.PureComponent<SummaryViewProps> {\n  render(): JSX.Element {\n    const fundamentals: Array<Library> = [];\n    const justThere: Array<Library> = [];\n    const misc: Array<Library> = [];\n    Object.values(this.props.libraries).forEach((lib) => {\n      switch (lib.category) {\n        case CATEGORY_FUNDAMENTAL:\n          fundamentals.push(lib);\n          break;\n        case CATEGORY_JUST_THERE:\n          justThere.push(lib);\n          break;\n        case CATEGORY_MISC:\n          misc.push(lib);\n          break;\n      }\n    });\n\n    const classes = this.props.classes;\n\n    const renderSection = (\n      array: Array<Library>,\n      name?: string\n    ): JSX.Element => {\n      return (\n        <div key={name}>\n          {name && (\n            <Typography variant=\"h4\" className={classes.section}>\n              {name}\n            </Typography>\n          )}\n          <div className={classes.libList}>\n            {array.map((lib) => (\n              <div key={lib.name} className={classes.libEntry}>\n                <Link to={libraryUrlFromRef(lib.id)}>{lib.name}</Link>\n                {lib.toitdoc && (\n                  <div className={classes.toitdoc}>\n                    <Toitdocs value={lib.toitdoc} headerOnly={true} />\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n    };\n\n    // Shortcut if the viewer is used for non-core libraries in which\n    // case there should only be misc libraries.\n    if (fundamentals.length === 0 && justThere.length === 0) {\n      return renderSection(misc);\n    }\n    return (\n      <>\n        {renderSection(fundamentals, \"Fundamental\")}\n        {renderSection(justThere, \"Framework\")}\n        {renderSection(misc, \"Misc\")}\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(SummaryView);\n","// Copyright (C) 2021 Toitware ApS. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport SummaryView, {\n  SummaryViewProps,\n} from \"../../components/main/SummaryView\";\nimport { RootState } from \"../../redux/doc\";\n\nconst mapStateToProps = (\n  state: RootState\n): Pick<SummaryViewProps, \"libraries\"> => {\n  return {\n    libraries: state.doc.libraries || {},\n  };\n};\n\nexport default connect(mapStateToProps)(SummaryView);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  StyleRules,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport Summary from \"../../containers/main/Summary\";\nimport CodeBlock from \"../general/CodeBlock\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    header: {\n      paddingBottom: theme.spacing(4),\n    },\n    section: {\n      paddingBottom: theme.spacing(2),\n    },\n  });\n\ntype WelcomePageProps = WithStyles<typeof styles>;\n\nclass WelcomePage extends React.PureComponent<WelcomePageProps> {\n  render(): JSX.Element {\n    return (\n      <>\n        <Typography variant=\"h3\" className={this.props.classes.header}>\n          Toit standard libraries\n        </Typography>\n        <Typography className={this.props.classes.section}>\n          Welcome to the standard libraries for the Toit programming language.\n          The Toit SDK contains a vast amount of libraries, ready-to use classes\n          and functionalities that allow a fast and easy use of Toit. This\n          documentation contains the structure of the Toit libraries.\n        </Typography>\n        <Typography className={this.props.classes.section}>\n          Except for the <b>core</b> library, you must import a library before\n          you can use it. Here is an example of how to do it:\n        </Typography>\n        <CodeBlock\n          code={\n            \"import metrics\\n\" +\n            \"import encoding.json as json\\n\" +\n            \"import peripherals show *\\n\" +\n            \"import fixed-point show FixedPoint\"\n          }\n        />\n        <Summary />\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(WelcomePage);\n","import { createStyles, Theme } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { libraryUrlFromRef, topLevelRefToId } from \"../../misc/util\";\nimport { Library } from \"../../model/model\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    subLibraries: {\n      paddingLeft: theme.spacing(1),\n    },\n    openLibrary: {\n      color: `${theme.palette.primary.main} !important`,\n    },\n  })\n);\n\nexport type LibraryNavigationProps = {\n  library: Library;\n  openLibrary: string;\n};\n\nconst LibraryNavigation: React.FC<LibraryNavigationProps> = ({\n  library,\n  openLibrary,\n}: LibraryNavigationProps) => {\n  const classes = useStyles();\n  const showSubLibraries = openLibrary?.split(\"/\")[0] === library.name;\n  const openSubLibrary = openLibrary?.split(\"/\").slice(1).join(\"/\");\n  return (\n    <div key={topLevelRefToId(library.id)}>\n      <Link\n        to={libraryUrlFromRef(library.id)}\n        className={showSubLibraries ? classes.openLibrary : \"\"}\n      >\n        {library.name}\n      </Link>\n      {showSubLibraries && (\n        <div className={classes.subLibraries}>\n          {Object.values(library.libraries)\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .map((subLibrary) => (\n              <LibraryNavigation\n                key={subLibrary.id.name}\n                library={subLibrary}\n                openLibrary={openSubLibrary}\n              />\n            ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LibraryNavigation;\n","import styled from \"@emotion/styled\";\nimport { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, RouteComponentProps } from \"react-router-dom\";\nimport logo from \"../../assets/images/logo.svg\";\nimport { Libraries } from \"../../model/model\";\nimport { RootState } from \"../../redux/doc\";\nimport LibraryNavigation from \"./LibraryNavigation\";\n\nconst Wrapper = styled.div`\n  background: ${({ theme }) => theme.palette.background.default};\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  padding: 3rem;\n  a {\n    color: ${({ theme }) => theme.palette.text.primary};\n    text-decoration: none;\n    display: block;\n    margin: 0.5rem 0;\n  }\n`;\n\nconst Title = styled.div`\n  margin-bottom: 3rem;\n`;\n\nexport type NavigationParams = {\n  libraryName: string;\n};\n\nexport type NavigationProps = {\n  className?: string;\n} & RouteComponentProps<NavigationParams>;\n\nconst NavigationView: React.FC<NavigationProps> = ({\n  location,\n  match,\n  className,\n}: NavigationProps) => {\n  const libraries = useSelector<RootState, Libraries>(\n    (state) => state.doc.libraries || {}\n  );\n\n  return (\n    <Wrapper className={className}>\n      <Link to=\"/\">\n        <img alt=\"Toit\" src={logo} height=\"32px\"></img>\n      </Link>\n      <Title>\n        <Typography variant=\"h5\">Libraries</Typography>\n      </Title>\n      {Object.values(libraries)\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((subLibrary) => (\n          <LibraryNavigation\n            library={subLibrary}\n            openLibrary={match.params.libraryName}\n            key={subLibrary.name}\n          />\n        ))}\n    </Wrapper>\n  );\n};\n\nexport default NavigationView;\n","import { ThemeProvider as EmotionThemeProvider } from \"@emotion/react\";\nimport {\n  Theme,\n  ThemeProvider as MaterialThemeProvider,\n} from \"@material-ui/core/styles\";\nimport React from \"react\";\n\ntype ThemeProviderProps = React.PropsWithChildren<{\n  theme: Theme;\n}>;\n\n/**\n * A simple helper component, that sets the theme for both, material-ui and\n * emotion.\n */\nexport function ThemeProvider({\n  theme,\n  children,\n}: ThemeProviderProps): JSX.Element {\n  return (\n    <MaterialThemeProvider theme={theme}>\n      <EmotionThemeProvider theme={theme}>{children}</EmotionThemeProvider>\n    </MaterialThemeProvider>\n  );\n}\n\nexport default ThemeProvider;\n","import styled from \"@emotion/styled\";\nimport { Divider, makeStyles, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { HashLink } from \"react-router-hash-link\";\nimport { Doc } from \"../../model/model\";\nimport Toitdocs from \"../doc/Toitdocs\";\n\ninterface DetailsListProps {\n  title: string;\n  elements: {\n    name: string;\n    description: JSX.Element;\n    key: string;\n    id: string;\n    toitdoc?: Doc;\n    toitdocHeaderOnly?: boolean;\n    link?: string;\n    isInherited: boolean;\n  }[];\n}\n\nconst useStyles = makeStyles((theme) => ({\n  details: { paddingBottom: theme.spacing(3) },\n  title: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(1),\n  },\n  element: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  toitdoc: {\n    paddingTop: theme.spacing(1),\n  },\n  divider: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst Signature = styled.div`\n  font-family: \"Roboto mono\", monospace;\n  font-size: 1.125em;\n`;\nconst SignatureName = styled.span`\n  font-weight: bold;\n`;\n\nfunction name(name: string, id: string, link?: string): JSX.Element {\n  if (link) {\n    return <Link to={link}>{name}</Link>;\n  } else {\n    return <HashLink to={{ hash: id }}>{name}</HashLink>;\n  }\n}\n\nexport default function DetailsList(props: DetailsListProps): JSX.Element {\n  const classes = useStyles();\n  return (\n    <div className={classes.details}>\n      <div className={classes.title}>\n        <Typography variant=\"h3\">{props.title}</Typography>\n      </div>\n      {props.elements\n        .concat([])\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((element, i) => {\n          return (\n            <div key={element.key} id={element.id}>\n              <div className={classes.element}>\n                <Signature>\n                  <SignatureName>\n                    {name(element.name, element.id, element.link)}\n                  </SignatureName>{\" \"}\n                  {element.description}\n                </Signature>\n                {element.isInherited && <em>inherited</em>}\n                {element.toitdoc && (\n                  <div className={classes.toitdoc}>\n                    <Toitdocs\n                      value={element.toitdoc}\n                      headerOnly={element.toitdocHeaderOnly}\n                    />\n                  </div>\n                )}\n              </div>\n              <Divider className={classes.divider} />\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { classUrlFromRef } from \"../../misc/util\";\nimport { Type } from \"../../model/model\";\nimport { TopLevelItemRef } from \"../../model/reference\";\nimport ExternalLink from \"../general/ExternalLink\";\n\ninterface TypeProps {\n  type: Type;\n}\n\nexport class TypeView extends Component<TypeProps> {\n  render(): JSX.Element {\n    const type = this.props.type;\n    if (type.isNone) {\n      return <span>none</span>;\n    }\n    if (type.isAny) {\n      return <span>any</span>;\n    }\n    if (type.isBlock) {\n      return <span>[block]</span>;\n    }\n    if (type.reference) {\n      return <TypeReference reference={type.reference} />;\n    }\n    return <></>;\n  }\n}\n\ninterface TypeReferenceProps {\n  reference: TopLevelItemRef;\n}\n\nexport class TypeReference extends Component<TypeReferenceProps> {\n  render(): JSX.Element {\n    const url = classUrlFromRef(this.props.reference);\n    const name = this.props.reference.name;\n    if (this.props.reference.libraryRef.baseUrl !== \"\") {\n      return <ExternalLink to={url} text={name}></ExternalLink>;\n    }\n    return <Link to={url}>{name}</Link>;\n  }\n}\n","import React from \"react\";\nimport { getFieldId } from \"../../misc/util\";\nimport { Field } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\nimport { TypeView } from \"./Type\";\n\ninterface FieldsProps {\n  fields: Field[];\n}\n\nexport default function Fields(props: FieldsProps): JSX.Element {\n  return (\n    <DetailsList\n      title=\"Fields\"\n      elements={props.fields.map((field, i) => {\n        return {\n          name: field.name,\n          description: (\n            <>\n              / <TypeView type={field.type} />\n            </>\n          ),\n          key: \"field_\" + i,\n          id: getFieldId(field.name),\n          toitdoc: field.toitdoc,\n          isInherited: field.isInherited,\n        };\n      })}\n    />\n  );\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport { makeStyles } from \"@material-ui/core\";\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\";\nimport React from \"react\";\nimport { getFunctionId } from \"../../misc/util\";\nimport { Function, Method, Parameter, Type } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\nimport { TypeView } from \"./Type\";\n\nconst useStyles = makeStyles((theme) => ({\n  defaultValue: { fontSize: \"0.875em\" },\n}));\n\ninterface FunctionsProps {\n  functions: (Function | Method)[];\n  title: string;\n  hideReturnTypes?: boolean;\n}\n\nexport function getDescription(\n  parameters: Parameter[],\n  returnType?: Type,\n  hideReturnTypes?: boolean,\n  includeDefaultValues?: boolean,\n  classes?: ClassNameMap<\"defaultValue\">\n): JSX.Element {\n  return (\n    <>\n      {parameters.map((parameter, i) => {\n        let param = parameter.name;\n        if (parameter.isNamed) {\n          param = \"--\" + param;\n        }\n        if (parameter.isBlock) {\n          param = \"[\" + param + \"] \";\n          return param;\n        }\n        return (\n          <span key={i}>\n            {param + \"/\"}\n            <TypeView type={parameter.type} />\n            {!parameter.isRequired && (\n              <>\n                {\"=\"}\n                {includeDefaultValues && (\n                  <span className={classes!.defaultValue}>\n                    {parameter.defaultValue}\n                  </span>\n                )}{\" \"}\n              </>\n            )}{\" \"}\n          </span>\n        );\n      })}\n      {!hideReturnTypes && returnType && (\n        <>\n          <span>{\" -> \"}</span>\n          <TypeView type={returnType} />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default function Functions(props: FunctionsProps): JSX.Element {\n  const classes = useStyles();\n  return (\n    <DetailsList\n      title={props.title}\n      elements={props.functions.map((fn, i) => {\n        const id = getFunctionId(fn.name, fn.shape);\n        return {\n          name: fn.name,\n          description: getDescription(\n            fn.parameters,\n            fn.returnType,\n            props.hideReturnTypes,\n            true,\n            classes\n          ),\n          key: \"function\" + i,\n          id: id,\n          toitdoc: fn.toitdoc,\n          isInherited: fn.isInherited,\n        };\n      })}\n    />\n  );\n}\n","import {\n  Box,\n  createStyles,\n  StyleRules,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Theme,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { HashLink } from \"react-router-hash-link\";\nimport { getFunctionId } from \"../../misc/util\";\nimport { Field, Function, Method } from \"../../model/model\";\nimport { getDescription } from \"../doc/Functions\";\nimport Toitdocs from \"../doc/Toitdocs\";\nimport { TypeView } from \"../doc/Type\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    methodsTable: {\n      marginTop: theme.spacing(1),\n    },\n  });\n\ninterface TablePanelGenProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TablePanelGen(props: TablePanelGenProps): JSX.Element {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box>\n          <span>{children}</span>\n        </Box>\n      )}\n    </div>\n  );\n}\n\ninterface TablePanelProps extends WithStyles<typeof styles> {\n  tab: number;\n  active: number;\n  tabData?: (Function | Method)[];\n  tabFieldData?: Field[];\n  hideReturnTypes?: boolean;\n  ariaLabel: string;\n}\n\nclass TablePanel extends Component<TablePanelProps> {\n  render(): JSX.Element {\n    const classes = this.props.classes;\n    if (this.props.tabFieldData)\n      return (\n        <TablePanelGen value={this.props.active} index={this.props.tab}>\n          <TableContainer>\n            <Table\n              size=\"small\"\n              aria-label={this.props.ariaLabel}\n              className={classes.methodsTable}\n            >\n              <TableBody>\n                {this.props.tabFieldData.length > 0 &&\n                  this.props.tabFieldData.map((field, index) => (\n                    <TableRow key={field.name + index}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <HashLink to={{ hash: field.name }}>\n                          {field.name}\n                        </HashLink>{\" \"}\n                        / <TypeView type={field.type} />\n                      </TableCell>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <Toitdocs value={field.toitdoc} headerOnly={true} />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TablePanelGen>\n      );\n    else if (this.props.tabData)\n      return (\n        <TablePanelGen value={this.props.active} index={this.props.tab}>\n          <TableContainer>\n            <Table\n              size=\"small\"\n              aria-label={this.props.ariaLabel}\n              className={classes.methodsTable}\n            >\n              <TableBody>\n                {this.props.tabData.length > 0 &&\n                  this.props.tabData.map((method, index) => (\n                    <TableRow key={method.name + index}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <HashLink\n                          to={{\n                            hash: getFunctionId(method.name, method.shape),\n                          }}\n                        >\n                          {method.name}\n                        </HashLink>{\" \"}\n                        {getDescription(\n                          method.parameters,\n                          method.returnType,\n                          this.props.hideReturnTypes\n                        )}\n                      </TableCell>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <Toitdocs value={method.toitdoc} headerOnly={true} />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TablePanelGen>\n      );\n    else return <></>;\n  }\n}\n\nexport default withStyles(styles)(TablePanel);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  Divider,\n  StyleRules,\n  Tab,\n  Tabs,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport {\n  Class,\n  CLASS_KIND_CLASS,\n  CLASS_KIND_INTERFACE,\n  CLASS_KIND_MIXIN,\n} from \"../../model/model\";\nimport TablePanel from \"../general/TablePanel\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      minWidth: 650,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    title: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n    },\n    hiddenTab: {\n      display: \"none\",\n    },\n  });\n\ninterface ClassOverviewProps extends WithStyles<typeof styles> {\n  klass: Class;\n}\n\nfunction a11yProps(index: number): { id: string; \"aria-controls\": string } {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`,\n  };\n}\n\ninterface TabProps {\n  tab: number;\n}\n\nclass ClassOverviewView extends Component<ClassOverviewProps, TabProps> {\n  constructor(props: ClassOverviewProps) {\n    super(props);\n    this.state = {\n      tab:\n        this.props.klass.constructors.length > 0\n          ? 0\n          : this.props.klass.statics.length > 0\n          ? 1\n          : this.props.klass.methods.length > 0\n          ? 2\n          : 3,\n    };\n  }\n  render(): JSX.Element {\n    const classes = this.props.classes;\n    const klass = this.props.klass;\n    let kind = \"\";\n    if (klass.kind === CLASS_KIND_CLASS) {\n      kind = \"Class\";\n    } else if (klass.kind === CLASS_KIND_INTERFACE) {\n      kind = \"Interface\";\n    } else if (klass.kind === CLASS_KIND_MIXIN) {\n      kind = \"Mixin\";\n    } else {\n      throw new Error(\"Unknown class kind: \" + klass.kind);\n    }\n    return (\n      <div className={classes.root}>\n        <div className={classes.title}>\n          <Typography variant=\"h4\">{kind} summary</Typography>\n        </div>\n        <Divider />\n        <Tabs\n          value={this.state.tab}\n          aria-label=\"Class overview\"\n          textColor=\"primary\"\n          indicatorColor=\"primary\"\n        >\n          <Tab\n            label=\"Constructors\"\n            {...a11yProps(0)}\n            onClick={(): void => this.setState({ tab: 0 })}\n            className={klass.constructors.length > 0 ? \"\" : classes.hiddenTab}\n          />\n          <Tab\n            label=\"Statics\"\n            {...a11yProps(1)}\n            onClick={(): void => this.setState({ tab: 1 })}\n            className={klass.statics.length > 0 ? \"\" : classes.hiddenTab}\n          />\n          <Tab\n            label=\"Methods\"\n            {...a11yProps(2)}\n            onClick={(): void => this.setState({ tab: 2 })}\n            className={klass.methods.length > 0 ? \"\" : classes.hiddenTab}\n          />\n          <Tab\n            label=\"Fields\"\n            {...a11yProps(3)}\n            onClick={(): void => this.setState({ tab: 3 })}\n            className={klass.fields.length > 0 ? \"\" : classes.hiddenTab}\n          />\n        </Tabs>\n        <TablePanel\n          tab={0}\n          active={this.state.tab}\n          tabData={klass.constructors}\n          hideReturnTypes={true}\n          ariaLabel=\"Constructors\"\n        />\n        <TablePanel\n          tab={1}\n          active={this.state.tab}\n          tabData={klass.statics}\n          ariaLabel=\"Statics\"\n        />\n        <TablePanel\n          tab={2}\n          active={this.state.tab}\n          tabData={klass.methods}\n          ariaLabel=\"Methods\"\n        />\n        <TablePanel\n          tab={3}\n          active={this.state.tab}\n          tabFieldData={klass.fields}\n          ariaLabel=\"Fields\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(ClassOverviewView);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Component } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { classFrom, classUrlFromRef } from \"../../misc/util\";\nimport {\n  CLASS_KIND_CLASS,\n  CLASS_KIND_INTERFACE,\n  CLASS_KIND_MIXIN,\n  Libraries,\n} from \"../../model/model\";\nimport Fields from \"../doc/Fields\";\nimport Functions from \"../doc/Functions\";\nimport Toitdocs from \"../doc/Toitdocs\";\nimport { TypeReference } from \"../doc/Type\";\nimport ClassOverview from \"./ClassOverview\";\n\nexport interface ClassInfoParams {\n  libraryName: string;\n  className: string;\n}\n\nexport interface ClassInfoProps extends RouteComponentProps<ClassInfoParams> {\n  libraries: Libraries;\n}\n\nexport default class ClassInfoView extends Component<ClassInfoProps> {\n  componentDidMount(): void {\n    const hashId = this.props.location.hash.substring(1);\n    const element = document.getElementById(hashId);\n    element?.scrollIntoView(true);\n  }\n\n  render(): React.ReactNode {\n    const classInfo = classFrom(\n      this.props.match.params.libraryName,\n      this.props.match.params.className,\n      this.props.libraries\n    );\n    if (!classInfo) {\n      return this.notFound(this.props.match.params.className);\n    }\n    let kind = \"\";\n    if (classInfo.kind === CLASS_KIND_CLASS) {\n      kind = \"Class\";\n    } else if (classInfo.kind === CLASS_KIND_INTERFACE) {\n      kind = \"Interface\";\n    } else if (classInfo.kind === CLASS_KIND_MIXIN) {\n      kind = \"Mixin\";\n    } else {\n      throw new Error(\"Unknown class kind: \" + classInfo.kind);\n    }\n\n    return (\n      <>\n        <Typography variant=\"h2\" component=\"h2\">\n          {kind} {classInfo.name}\n        </Typography>\n        {(classInfo.extends ||\n          classInfo.interfaces.length !== 0 ||\n          classInfo.mixins.length !== 0) && (\n          <div>\n            {classInfo.extends && (\n              <>\n                extends <TypeReference reference={classInfo.extends} />\n              </>\n            )}\n            {classInfo.mixins.length !== 0 && \" with \"}\n            {classInfo.mixins.map((ref) => {\n              const key = classUrlFromRef(ref);\n              return (\n                <span key={key}>\n                  <TypeReference reference={ref} />{\" \"}\n                </span>\n              );\n            })}\n            {classInfo.interfaces.length !== 0 && \" implements \"}\n            {classInfo.interfaces.map((ref) => {\n              const key = classUrlFromRef(ref);\n              return (\n                <span key={key}>\n                  <TypeReference reference={ref} />{\" \"}\n                </span>\n              );\n            })}\n          </div>\n        )}\n        {classInfo.toitdoc && <Toitdocs value={classInfo.toitdoc} />}\n        <ClassOverview klass={classInfo} />\n        {classInfo.constructors.length > 0 && (\n          <Functions\n            functions={classInfo.constructors}\n            title=\"Constructors\"\n            hideReturnTypes\n          />\n        )}\n        {classInfo.statics.length > 0 && (\n          <Functions functions={classInfo.statics} title=\"Statics\" />\n        )}\n        {classInfo.methods.length > 0 && (\n          <Functions functions={classInfo.methods} title=\"Methods\" />\n        )}\n        {classInfo.fields.length > 0 && <Fields fields={classInfo.fields} />}\n      </>\n    );\n  }\n\n  notFound(className: string): JSX.Element {\n    return (\n      <Typography variant=\"h4\">\n        {\"Error: Class \" + className + \" not found\"}\n      </Typography>\n    );\n  }\n}\n","import { connect } from \"react-redux\";\nimport ClassInfoView, {\n  ClassInfoProps,\n} from \"../../components/main/ClassInfoView\";\nimport { RootState } from \"../../redux/doc\";\n\nconst mapStateToProps = (\n  state: RootState\n): Pick<ClassInfoProps, \"libraries\"> => {\n  return {\n    libraries: state.doc.libraries || {},\n  };\n};\n\nexport default connect(mapStateToProps)(ClassInfoView);\n","import React from \"react\";\nimport { classUrlFromRef } from \"../../misc/util\";\nimport { Class } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\n\ninterface ClassesProps {\n  classes: Class[];\n  title: string;\n}\n\nexport default function Classes(props: ClassesProps): JSX.Element {\n  return (\n    <DetailsList\n      title={props.title}\n      elements={props.classes.map((klass, i) => {\n        return {\n          name: klass.name,\n          description: <></>,\n          key: \"class_\" + i,\n          id: \"\",\n          link: classUrlFromRef(klass.id),\n          toitdoc: klass.toitdoc,\n          toitdocHeaderOnly: true,\n          isInherited: false,\n        };\n      })}\n    />\n  );\n}\n","import React from \"react\";\nimport { Global } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\n\ninterface GlobalsProps {\n  globals: Global[];\n  title: string;\n}\n\nexport default function Globals(props: GlobalsProps): JSX.Element {\n  return (\n    <DetailsList\n      title={props.title}\n      elements={props.globals.map((global, i) => {\n        return {\n          name: global.name,\n          description: <></>,\n          key: \"global_\" + i,\n          id: global.name,\n          toitdoc: global.toitdoc,\n          isInherited: false,\n        };\n      })}\n    />\n  );\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport { Theme } from \"@material-ui/core\";\nimport {\n  createStyles,\n  StyleRules,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Component } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { viewMode, ViewMode } from \"../../App\";\nimport { libraryFrom } from \"../../misc/util\";\nimport { Libraries } from \"../../model/model\";\nimport Classes from \"../doc/Classes\";\nimport Functions from \"../doc/Functions\";\nimport Globals from \"../doc/Globals\";\nimport Toitdocs from \"../doc/Toitdocs\";\nimport CodeBlock from \"../general/CodeBlock\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      width: \"100%\",\n    },\n    importingText: {\n      marginBottom: theme.spacing(2),\n    },\n    heading: {\n      marginBottom: theme.spacing(3),\n    },\n  });\n\nexport interface LibraryInfoParams {\n  libraryName: string;\n}\n\nexport interface LibraryInfoProps\n  extends WithStyles<typeof styles>,\n    RouteComponentProps<LibraryInfoParams> {\n  libraries: Libraries;\n}\n\nclass LibraryInfoView extends Component<LibraryInfoProps> {\n  componentDidMount(): void {\n    const hashId = this.props.location.hash.substring(1);\n    const element = document.getElementById(hashId);\n    element?.scrollIntoView(true);\n  }\n\n  render(): JSX.Element {\n    const libName = this.props.match.params.libraryName;\n    const library = libraryFrom(libName, this.props.libraries);\n    if (!library) {\n      return this.notFound(libName);\n    }\n\n    const importPath = libName.replace(/\\//g, \".\");\n    let isCoreExported = false;\n    let noImport = false;\n    let isCore = false;\n    let showImportHelp = true;\n\n    switch (viewMode) {\n      case ViewMode.SDK:\n        isCoreExported = libName.startsWith(\"core/\");\n        const unexported = /^core\\/.*_impl$/;\n        if (isCoreExported && unexported.exec(libName)) {\n          isCoreExported = false;\n        }\n        isCore = libName === \"core\";\n        noImport = isCoreExported || isCore;\n        break;\n      case ViewMode.Package:\n        // Do nothing.\n        break;\n      case ViewMode.Folder:\n        showImportHelp = false;\n        break;\n    }\n\n    return (\n      <>\n        <div className={this.props.classes.heading}>\n          <Typography component=\"h2\" variant=\"h2\">\n            Library {library.name}\n          </Typography>\n        </div>\n        {showImportHelp && (\n          <div className={this.props.classes.importingText}>\n            {noImport ? (\n              <Typography>\n                This is {isCoreExported ? \"exported from\" : \"\"} the core\n                library, which means you {isCore ? \"usually\" : \"\"} don&#39;t\n                need to import it.\n              </Typography>\n            ) : (\n              <div>\n                <Typography>To use this library in your code:</Typography>\n                <CodeBlock code={\"import \" + importPath} />\n              </div>\n            )}\n          </div>\n        )}\n        {library.toitdoc && <Toitdocs value={library.toitdoc} />}\n        {Object.keys(library.interfaces).length > 0 && (\n          <Classes\n            classes={Object.values(library.interfaces)}\n            title=\"Interfaces\"\n          />\n        )}\n        {Object.keys(library.exportedInterfaces).length > 0 && (\n          <Classes\n            classes={Object.values(library.exportedInterfaces)}\n            title=\"Exported interfaces\"\n          />\n        )}\n        {Object.keys(library.mixins).length > 0 && (\n          <Classes classes={Object.values(library.mixins)} title=\"Mixins\" />\n        )}\n        {Object.keys(library.exportedMixins).length > 0 && (\n          <Classes\n            classes={Object.values(library.exportedMixins)}\n            title=\"Exported mixins\"\n          />\n        )}\n        {Object.keys(library.classes).length > 0 && (\n          <Classes classes={Object.values(library.classes)} title=\"Classes\" />\n        )}\n        {Object.keys(library.exportedClasses).length > 0 && (\n          <Classes\n            classes={Object.values(library.exportedClasses)}\n            title=\"Exported classes\"\n          />\n        )}\n        {library.globals.length > 0 && (\n          <Globals globals={library.globals} title=\"Globals\" />\n        )}\n        {library.exportedGlobals.length > 0 && (\n          <Globals globals={library.exportedGlobals} title=\"Exported globals\" />\n        )}\n        {library.functions.length > 0 && (\n          <Functions functions={library.functions} title=\"Functions\" />\n        )}\n        {library.exportedFunctions.length > 0 && (\n          <Functions\n            functions={library.exportedFunctions}\n            title=\"Exported functions\"\n          />\n        )}\n      </>\n    );\n  }\n\n  notFound(libraryName: string): JSX.Element {\n    return (\n      <Typography variant=\"h4\">\n        {\"Error: Library \" + libraryName + \" not found\"}\n      </Typography>\n    );\n  }\n}\n\nexport default withStyles(styles)(LibraryInfoView);\n","import { connect } from \"react-redux\";\nimport LibraryInfoView, {\n  LibraryInfoProps,\n} from \"../../components/main/LibraryInfoView\";\nimport { RootState } from \"../../redux/doc\";\n\nfunction mapStateToProps(\n  state: RootState\n): Pick<LibraryInfoProps, \"libraries\"> {\n  return {\n    libraries: state.doc.libraries || {},\n  };\n}\n\nexport default connect(mapStateToProps)(LibraryInfoView);\n","import { containsPkgs, containsSdk } from \"../App\";\nimport {\n  CATEGORY_FUNDAMENTAL,\n  CATEGORY_JUST_THERE,\n  CATEGORY_MISC,\n  CATEGORY_SUB,\n  CLASS_KIND_CLASS,\n  CLASS_KIND_INTERFACE,\n  CLASS_KIND_MIXIN,\n  Category,\n  Class,\n  ClassKind,\n  Classes,\n  DOC_DOCREF,\n  DOC_EXPRESSION_CODE,\n  DOC_EXPRESSION_LINK,\n  DOC_EXPRESSION_TEXT,\n  DOC_STATEMENT_CODE_SECTION,\n  DOC_STATEMENT_ITEM,\n  DOC_STATEMENT_ITEMIZED,\n  DOC_STATEMENT_PARAGRAPH,\n  Doc,\n  DocExpression,\n  DocSection,\n  DocStatement,\n  Field,\n  Function,\n  Global,\n  Libraries,\n  Library,\n  Method,\n  Parameter,\n  Shape,\n  Type,\n} from \"../model/model\";\nimport {\n  ClassMemberType,\n  LinkRef,\n  LinkRefKind,\n  TopLevelItemRef,\n  TopLevelItemType,\n  TopLevelRef,\n} from \"../model/reference\";\nimport {\n  OBJECT_TYPE_EXPRESSION_CODE,\n  OBJECT_TYPE_EXPRESSION_LINK,\n  OBJECT_TYPE_EXPRESSION_TEXT,\n  OBJECT_TYPE_STATEMENT_CODE_SECTION,\n  OBJECT_TYPE_STATEMENT_ITEMIZED,\n  OBJECT_TYPE_STATEMENT_PARAGRAPH,\n  OBJECT_TYPE_TOITDOCREF,\n  TOIT_CATEGORY_FUNDAMENTAL,\n  TOIT_CATEGORY_JUST_THERE,\n  TOIT_CATEGORY_MISC,\n  TOIT_CATEGORY_SUB,\n  TOIT_CLASS_KIND_CLASS,\n  TOIT_CLASS_KIND_INTERFACE,\n  TOIT_CLASS_KIND_MIXIN,\n  ToitCategory,\n  ToitClass,\n  ToitClassKind,\n  ToitDoc,\n  ToitDocRef,\n  ToitDocRefKind,\n  ToitExpression,\n  ToitField,\n  ToitFunction,\n  ToitGlobal,\n  ToitLibraries,\n  ToitLibrary,\n  ToitModule,\n  ToitParameter,\n  ToitReference,\n  ToitSection,\n  ToitShape,\n  ToitStatement,\n  ToitType,\n} from \"./doc\";\n\n// Slightly hackish: we keep a few global variables, so we don't need to\n// pass them around everywhere.\n// TODO(florian): move all the conversion functions into a class and store the state there.\nlet sdkPath: string[] | undefined = undefined;\nlet packagesPath: string[] | undefined = undefined;\nlet packageNames: { [name: string]: string } | undefined = undefined;\n\nconst SDK_LIBS_URL = \"https://libs.toit.io\";\nconst PACKAGES_URL = \"https://pkg.toit.io\";\n\nfunction libraryName(name: string): string {\n  return name.endsWith(\".toit\") ? name.substring(0, name.length - 5) : name;\n}\n\ntype UrlAndPath = {\n  url: string;\n  path: string[];\n};\n\nfunction isSdkPath(path: string[]): boolean {\n  if (sdkPath === undefined) {\n    return false;\n  }\n  if (path.length < sdkPath.length) {\n    return false;\n  }\n  for (let i = 0; i < sdkPath.length; i++) {\n    if (path[i] !== sdkPath[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isPackagePath(path: string[]): boolean {\n  if (packagesPath === undefined) {\n    return false;\n  }\n  if (path.length < packagesPath.length) {\n    return false;\n  }\n  for (let i = 0; i < packagesPath.length; i++) {\n    if (path[i] !== packagesPath[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction buildPackageUrlAndPath(path: string[]): UrlAndPath {\n  // Example path:\n  // [\".packages\", \"github.com\", \"toitware\", \"toit-morse\", \"1.0.6\", \"src\", \"morse.toit\"]\n  // We need to drop the \".packages\" (done by the slice below).\n  // The ID of the package is everything before the version number.\n  // The version number is always prefixed by \"src\".\n  // Note: a valid source can't have dots in the name. This means that anything of the form\n  // X.Y.Z can't be part of the source path.\n  let srcIndex = packagesPath!.length;\n  while (true) {\n    srcIndex = path.indexOf(\"src\", srcIndex);\n    if (srcIndex === -1) {\n      break;\n    }\n    if (srcIndex >= 1 && /^\\d+\\.\\d+\\.\\d+$/.exec(path[srcIndex - 1])) {\n      break;\n    }\n    srcIndex++;\n  }\n  if (srcIndex === -1) {\n    // No \"src\" in the path.\n    return {\n      url: \"\",\n      path: path,\n    };\n  }\n  const versionNumber = path[srcIndex - 1];\n  const packageIdSegments = path.slice(packagesPath!.length, srcIndex - 1);\n  const packageId = packageIdSegments.join(\"/\");\n  const packageName = packageNames![packageId];\n  const nestedPath = path.slice(srcIndex + 1);\n  nestedPath.unshift(packageName);\n\n  if (packageName === undefined) {\n    // Not a package we know about.\n    return {\n      url: \"\",\n      path: path,\n    };\n  }\n\n  const url = PACKAGES_URL + \"/\" + packageId + \"@\" + versionNumber + \"/docs\";\n\n  return {\n    url: url,\n    path: nestedPath,\n  };\n}\n\nfunction urlAndPathFrom(path: string[]): UrlAndPath {\n  path = path.slice(); // Make a copy.\n  let url = \"\";\n  if (path.length > 0) {\n    if (!containsSdk && isSdkPath(path)) {\n      url = SDK_LIBS_URL;\n      path = path.slice(sdkPath!.length + 1); // Also drop the 'lib'.\n    } else if (!containsPkgs && isPackagePath(path)) {\n      const urlPath = buildPackageUrlAndPath(path);\n      url = urlPath.url;\n      // We don't return immediately so we can manipulate the path below.\n      path = urlPath.path;\n    } else {\n      // Nothing to do.\n    }\n  }\n  const len = path.length;\n  if (len === 0) {\n    return {\n      url: url,\n      path: path,\n    };\n  }\n  path[len - 1] = libraryName(path[len - 1]);\n  if (len === 1) {\n    return {\n      url: url,\n      path: path,\n    };\n  }\n  if (path[len - 1] === path[len - 2]) {\n    // Something like lib/net/net.toit.\n    // In that case the net.toit is presented as 'lib.net' (as this is how it would\n    // be imported).\n    path.length--;\n  }\n  return {\n    url: url,\n    path: path,\n  };\n}\n\nfunction shapeFrom(toitShape: ToitShape): Shape {\n  return {\n    arity: toitShape.arity,\n    totalBlockCount: toitShape.total_block_count,\n    namedBlockCount: toitShape.named_block_count,\n    names: toitShape.names,\n  };\n}\n\nfunction linkRefKindFrom(toitDocRefKind: ToitDocRefKind): LinkRefKind {\n  switch (toitDocRefKind) {\n    case \"other\":\n      return \"other\";\n    case \"class\":\n      return \"class\";\n    case \"global\":\n      return \"global\";\n    case \"global-method\":\n      return \"global-method\";\n    case \"static-method\":\n      return \"static-method\";\n    case \"constructor\":\n      return \"constructor\";\n    case \"factory\":\n      return \"factory\";\n    case \"method\":\n      return \"method\";\n    case \"field\":\n      return \"field\";\n    case \"parameter\":\n      return \"parameter\";\n    default:\n      console.error(\"Unknown ToitDocRefKind\", toitDocRefKind);\n      return \"unknown\";\n  }\n}\n\nfunction linkRefFrom(toitDocRef: ToitDocRef): LinkRef {\n  let url = \"\";\n  let path = [] as string[];\n  if (toitDocRef.path) {\n    const urlPath = urlAndPathFrom(toitDocRef.path);\n    url = urlPath.url;\n    path = urlPath.path;\n  }\n\n  return {\n    kind: linkRefKindFrom(toitDocRef.kind),\n    baseUrl: url,\n    path: path,\n    holder: toitDocRef.holder || \"\",\n    name: toitDocRef.name,\n    shape: toitDocRef.shape ? shapeFrom(toitDocRef.shape) : undefined,\n  };\n}\n\nfunction docExpressionFrom(toitExpression: ToitExpression): DocExpression {\n  switch (toitExpression.object_type) {\n    case OBJECT_TYPE_EXPRESSION_CODE:\n      return {\n        type: DOC_EXPRESSION_CODE,\n        text: toitExpression.text,\n      };\n    case OBJECT_TYPE_EXPRESSION_LINK:\n      return {\n        type: DOC_EXPRESSION_LINK,\n        text: toitExpression.text,\n        url: toitExpression.url,\n      };\n    case OBJECT_TYPE_EXPRESSION_TEXT:\n      return {\n        type: DOC_EXPRESSION_TEXT,\n        text: toitExpression.text,\n      };\n    case OBJECT_TYPE_TOITDOCREF:\n      return {\n        type: DOC_DOCREF,\n        text: toitExpression.text,\n        reference: linkRefFrom(toitExpression),\n      };\n  }\n}\n\nfunction docStatementFrom(toitStatement: ToitStatement): DocStatement {\n  switch (toitStatement.object_type) {\n    case OBJECT_TYPE_STATEMENT_PARAGRAPH:\n      return {\n        type: DOC_STATEMENT_PARAGRAPH,\n        expressions: toitStatement.expressions.map((toitExpression) =>\n          docExpressionFrom(toitExpression)\n        ),\n      };\n    case OBJECT_TYPE_STATEMENT_ITEMIZED:\n      return {\n        type: DOC_STATEMENT_ITEMIZED,\n        items: toitStatement.items.map((toitItem) => {\n          return {\n            type: DOC_STATEMENT_ITEM,\n            statements: toitItem.statements.map((s) => docStatementFrom(s)),\n          };\n        }),\n      };\n    case OBJECT_TYPE_STATEMENT_CODE_SECTION:\n      return {\n        type: DOC_STATEMENT_CODE_SECTION,\n        text: toitStatement.text,\n      };\n  }\n}\n\nfunction docSectionFrom(toitSection: ToitSection): DocSection {\n  return {\n    title: toitSection.title,\n    level: toitSection.level,\n    statements: toitSection.statements.map((toitStatement) =>\n      docStatementFrom(toitStatement)\n    ),\n  };\n}\n\nfunction docFrom(toitDoc: ToitDoc): Doc {\n  return toitDoc.map((toitSection) => docSectionFrom(toitSection));\n}\n\nfunction referenceFrom(toitReference: ToitReference): TopLevelItemRef {\n  const urlPath = urlAndPathFrom(toitReference.path);\n  return {\n    name: toitReference.name,\n    libraryRef: {\n      name: toitReference.name,\n      baseUrl: urlPath.url,\n      path: urlPath.path,\n    },\n  };\n}\n\nfunction typeFrom(toitType: ToitType): Type {\n  const reference = toitType.reference\n    ? referenceFrom(toitType.reference)\n    : undefined;\n\n  return {\n    isNone: toitType.is_none,\n    isAny: toitType.is_any,\n    isBlock: toitType.is_block,\n    reference: reference,\n  };\n}\n\nfunction parameterFrom(toitParameter: ToitParameter): Parameter {\n  return {\n    name: toitParameter.name,\n    isBlock: toitParameter.is_block,\n    isNamed: toitParameter.is_named,\n    isRequired: toitParameter.is_required,\n    defaultValue: toitParameter.default_value,\n    type: typeFrom(toitParameter.type),\n  };\n}\n\nfunction fieldFrom(\n  toitField: ToitField,\n  classRef: TopLevelItemRef,\n  offset: number\n): Field {\n  return {\n    name: toitField.name,\n    id: {\n      name: toitField.name,\n      classRef: classRef,\n      type: \"field\",\n      offset: offset,\n    },\n    type: typeFrom(toitField.type),\n    toitdoc: toitField.toitdoc ? docFrom(toitField.toitdoc) : undefined,\n    isInherited: toitField.is_inherited,\n  };\n}\n\nfunction methodFrom(\n  toitMethod: ToitFunction,\n  classRef: TopLevelItemRef,\n  type: ClassMemberType,\n  offset: number\n): Method {\n  const parameters = toitMethod.parameters.map((parameter) =>\n    parameterFrom(parameter)\n  );\n\n  return {\n    name: toitMethod.name,\n    id: {\n      name: toitMethod.name,\n      classRef: classRef,\n      type: type,\n      offset: offset,\n    },\n    parameters: parameters,\n    returnType: typeFrom(toitMethod.return_type),\n    toitdoc: toitMethod.toitdoc ? docFrom(toitMethod.toitdoc) : undefined,\n    shape: toitMethod.shape ? shapeFrom(toitMethod.shape) : undefined,\n    isInherited: toitMethod.is_inherited,\n  };\n}\n\nfunction classKindFrom(kind: ToitClassKind): ClassKind {\n  switch (kind) {\n    case TOIT_CLASS_KIND_CLASS:\n      return CLASS_KIND_CLASS;\n    case TOIT_CLASS_KIND_INTERFACE:\n      return CLASS_KIND_INTERFACE;\n    case TOIT_CLASS_KIND_MIXIN:\n      return CLASS_KIND_MIXIN;\n  }\n}\n\nfunction classFrom(\n  toitClass: ToitClass,\n  libraryRef: TopLevelRef,\n  type: TopLevelItemType,\n  offset: number\n): Class {\n  const classId = {\n    name: toitClass.name,\n    libraryRef: libraryRef,\n    type: type,\n    offset: offset,\n  };\n\n  const extend = toitClass.extends\n    ? referenceFrom(toitClass.extends)\n    : undefined;\n\n  const interfaces = toitClass.interfaces.map((inter, index) =>\n    referenceFrom(inter)\n  );\n  const mixins = toitClass.mixins.map((mixin, index) => referenceFrom(mixin));\n\n  const fields = toitClass.structure.fields.map((field, index) =>\n    fieldFrom(field, classId, index)\n  );\n  const constructors = toitClass.structure.constructors\n    .concat(toitClass.structure.factories)\n    .map((constructor, index) =>\n      methodFrom(constructor, classId, \"constructor\", index)\n    );\n  const statics = toitClass.structure.statics.map((statik, index) =>\n    methodFrom(statik, classId, \"static\", index)\n  );\n  const methods = toitClass.structure.methods.map((method, index) =>\n    methodFrom(method, classId, \"method\", index)\n  );\n\n  return {\n    name: toitClass.name,\n    id: classId,\n    kind: classKindFrom(toitClass.kind),\n    extends: extend,\n    interfaces: interfaces,\n    mixins: mixins,\n    fields: fields,\n    constructors: constructors,\n    statics: statics,\n    methods: methods,\n    toitdoc: toitClass.toitdoc ? docFrom(toitClass.toitdoc) : undefined,\n  };\n}\n\nfunction globalFrom(\n  toitGlobal: ToitGlobal,\n  libraryRef: TopLevelRef,\n  type: TopLevelItemType,\n  offset: number\n): Global {\n  return {\n    name: toitGlobal.name,\n    id: {\n      name: toitGlobal.name,\n      libraryRef: libraryRef,\n      type: type,\n      offset: offset,\n    },\n    toitdoc: toitGlobal.toitdoc ? docFrom(toitGlobal.toitdoc) : undefined,\n  };\n}\n\nfunction functionFrom(\n  toitFunction: ToitFunction,\n  libraryRef: TopLevelRef,\n  type: TopLevelItemType,\n  offset: number\n): Function {\n  const parameters = toitFunction.parameters.map((parameter) =>\n    parameterFrom(parameter)\n  );\n\n  return {\n    name: toitFunction.name,\n    id: {\n      name: toitFunction.name,\n      libraryRef: libraryRef,\n      type: type,\n      offset: offset,\n    },\n    parameters: parameters,\n    returnType: typeFrom(toitFunction.return_type),\n    toitdoc: toitFunction.toitdoc ? docFrom(toitFunction.toitdoc) : undefined,\n    shape: toitFunction.shape ? shapeFrom(toitFunction.shape) : undefined,\n    isInherited: false,\n  };\n}\n\nfunction categoryFrom(category: ToitCategory): Category {\n  switch (category) {\n    case TOIT_CATEGORY_FUNDAMENTAL:\n      return CATEGORY_FUNDAMENTAL;\n    case TOIT_CATEGORY_JUST_THERE:\n      return CATEGORY_JUST_THERE;\n    case TOIT_CATEGORY_MISC:\n      return CATEGORY_MISC;\n    case TOIT_CATEGORY_SUB:\n      return CATEGORY_SUB;\n  }\n}\n\nfunction libraryFromModule(toitModule: ToitModule, path: string[]): Library {\n  const name = libraryName(toitModule.name);\n  const libraryId = { name: name, baseUrl: \"\", path: [...path, name] };\n\n  let classes = {} as Classes;\n  let interfaces = {} as Classes;\n  let mixins = {} as Classes;\n  let exportedClasses = {} as Classes;\n  let exportedInterfaces = {} as Classes;\n  let exportedMixins = {} as Classes;\n\n  toitModule.classes.forEach((klass, index) => {\n    classes = {\n      ...classes,\n      [klass.name]: classFrom(klass, libraryId, \"class\", index),\n    };\n  });\n  toitModule.interfaces.forEach((inter, index) => {\n    interfaces = {\n      ...interfaces,\n      [inter.name]: classFrom(inter, libraryId, \"class\", index),\n    };\n  });\n  toitModule.mixins.forEach((mixin, index) => {\n    mixins = {\n      ...mixins,\n      [mixin.name]: classFrom(mixin, libraryId, \"class\", index),\n    };\n  });\n  toitModule.export_classes.forEach((klass, index) => {\n    exportedClasses = {\n      ...exportedClasses,\n      [klass.name]: classFrom(klass, libraryId, \"exported_class\", index),\n    };\n  });\n  toitModule.export_interfaces.forEach((inter, index) => {\n    exportedInterfaces = {\n      ...exportedInterfaces,\n      [inter.name]: classFrom(inter, libraryId, \"exported_class\", index),\n    };\n  });\n  toitModule.export_mixins.forEach((mixin, index) => {\n    exportedMixins = {\n      ...exportedMixins,\n      [mixin.name]: classFrom(mixin, libraryId, \"exported_class\", index),\n    };\n  });\n  const globals = toitModule.globals.map((global, index) =>\n    globalFrom(global, libraryId, \"global\", index)\n  );\n  const exportedGlobals = toitModule.export_globals.map((global, index) =>\n    globalFrom(global, libraryId, \"exported_global\", index)\n  );\n  const functions = toitModule.functions.map((f, index) =>\n    functionFrom(f, libraryId, \"function\", index)\n  );\n  const exportedFunctions = toitModule.export_functions.map((f, index) =>\n    functionFrom(f, libraryId, \"exported_function\", index)\n  );\n\n  return {\n    name: name,\n    id: libraryId,\n    libraries: {},\n    classes: classes,\n    interfaces: interfaces,\n    mixins: mixins,\n    exportedClasses: exportedClasses,\n    exportedInterfaces: exportedInterfaces,\n    exportedMixins: exportedMixins,\n    globals: globals,\n    exportedGlobals: exportedGlobals,\n    functions: functions,\n    exportedFunctions: exportedFunctions,\n    toitdoc: toitModule.toitdoc ? docFrom(toitModule.toitdoc) : undefined,\n    category: categoryFrom(toitModule.category),\n  };\n}\n\nfunction mergeLibraries(library: Library, otherLibrary: Library): Library {\n  if (library.name !== otherLibrary.name) {\n    throw Error(\"Only libraries with the same name can be merged\");\n  }\n  if (JSON.stringify(library.id) !== JSON.stringify(otherLibrary.id)) {\n    throw Error(\"Only libraries with the same id can be merged\");\n  }\n  return {\n    name: library.name,\n    id: library.id,\n    libraries: { ...library.libraries, ...otherLibrary.libraries },\n    classes: { ...library.classes, ...otherLibrary.classes },\n    interfaces: { ...library.interfaces, ...otherLibrary.interfaces },\n    mixins: { ...library.mixins, ...otherLibrary.mixins },\n    exportedClasses: {\n      ...library.exportedClasses,\n      ...otherLibrary.exportedClasses,\n    },\n    exportedInterfaces: {\n      ...library.exportedInterfaces,\n      ...otherLibrary.exportedInterfaces,\n    },\n    exportedMixins: {\n      ...library.exportedMixins,\n      ...otherLibrary.exportedMixins,\n    },\n    globals: { ...library.globals, ...otherLibrary.globals },\n    exportedGlobals: {\n      ...library.exportedGlobals,\n      ...otherLibrary.exportedGlobals,\n    },\n    functions: { ...library.functions, ...otherLibrary.functions },\n    exportedFunctions: {\n      ...library.exportedFunctions,\n      ...otherLibrary.exportedFunctions,\n    },\n    // TODO(florian): we currently just pick the toitdoc of the first\n    // library.\n    toitdoc: library.toitdoc || otherLibrary.toitdoc,\n    // TODO(florian): we currently just pick the category of the first\n    // library.\n    category: library.category,\n  };\n}\n\n/* eslint @typescript-eslint/no-use-before-define: \"off\" */\nfunction libraryFromLibrary(\n  toitLibrary: ToitLibrary,\n  path: string[],\n  root?: boolean\n): Library {\n  const name = toitLibrary.name;\n  const libraryPath = root ? [] : [...path, name];\n\n  let libraries = librariesFromLibraries(toitLibrary.libraries, libraryPath);\n  let libraryContent = undefined as Library | undefined;\n\n  Object.values(toitLibrary.modules).forEach((module) => {\n    const subLibraryName = libraryName(module.name);\n    if (subLibraryName === name) {\n      libraryContent = libraryFromModule(module, path);\n      return;\n    }\n    if (libraries[subLibraryName]) {\n      console.log(\"Name clash\", subLibraryName);\n      const libLibrary = libraries[subLibraryName];\n      libraries = {\n        ...libraries,\n        [subLibraryName]: mergeLibraries(\n          libLibrary,\n          libraryFromModule(module, libraryPath)\n        ),\n      };\n      return;\n    }\n    libraries = {\n      ...libraries,\n      [subLibraryName]: libraryFromModule(module, libraryPath),\n    };\n  });\n\n  return {\n    name: name,\n    id: { name: name, baseUrl: \"\", path: libraryPath },\n    libraries: libraries,\n    classes: libraryContent ? libraryContent.classes : {},\n    interfaces: libraryContent ? libraryContent.interfaces : {},\n    mixins: libraryContent ? libraryContent.mixins : {},\n    exportedClasses: libraryContent ? libraryContent.exportedClasses : {},\n    exportedInterfaces: libraryContent ? libraryContent.exportedInterfaces : {},\n    exportedMixins: libraryContent ? libraryContent.exportedMixins : {},\n    globals: libraryContent ? libraryContent.globals : [],\n    exportedGlobals: libraryContent ? libraryContent.exportedGlobals : [],\n    functions: libraryContent ? libraryContent.functions : [],\n    exportedFunctions: libraryContent ? libraryContent.exportedFunctions : [],\n    toitdoc: libraryContent ? libraryContent.toitdoc : undefined,\n    category: categoryFrom(toitLibrary.category),\n  };\n}\n\nfunction librariesFromLibraries(\n  toitLibraries: ToitLibraries,\n  path: string[]\n): Libraries {\n  let libraries = {} as Libraries;\n\n  Object.values(toitLibraries).forEach((toitLibrary) => {\n    if (libraries[toitLibrary.name]) {\n      console.log(\"Name clash\", toitLibrary.name);\n    }\n    libraries = {\n      ...libraries,\n      [toitLibrary.name]: libraryFromLibrary(toitLibrary, path),\n    };\n  });\n\n  return libraries;\n}\n\nexport function modelFrom(\n  libraries: ToitLibraries,\n  generatorSdkPath: string[] | undefined,\n  generatorPackagesPath: string[] | undefined,\n  generatorPackageNames: { [name: string]: string } | undefined\n): Libraries {\n  sdkPath = generatorSdkPath;\n  packagesPath = generatorPackagesPath;\n  packageNames = generatorPackageNames;\n\n  return librariesFromLibraries(libraries, []);\n}\n","export const OBJECT_TYPE_SECTION = \"section\";\nexport const OBJECT_TYPE_STATEMENT_CODE_SECTION = \"statement_code_section\";\nexport const OBJECT_TYPE_STATEMENT_ITEMIZED = \"statement_itemized\";\nexport const OBJECT_TYPE_STATEMENT_ITEM = \"statement_item\";\nexport const OBJECT_TYPE_STATEMENT_PARAGRAPH = \"statement_paragraph\";\nexport const OBJECT_TYPE_EXPRESSION_CODE = \"expression_code\";\nexport const OBJECT_TYPE_EXPRESSION_LINK = \"expression_link\";\nexport const OBJECT_TYPE_EXPRESSION_TEXT = \"expression_text\";\nexport const OBJECT_TYPE_TOITDOCREF = \"toitdocref\";\nexport const OBJECT_TYPE_FUNCTION = \"function\";\nexport const OBJECT_TYPE_PARAMETER = \"parameter\";\nexport const OBJECT_TYPE_FIELD = \"field\";\nexport const OBJECT_TYPE_CLASS = \"class\";\nexport const OBJECT_TYPE_MODULE = \"module\";\nexport const OBJECT_TYPE_GLOBAL = \"global\";\nexport const OBJECT_TYPE_LIBRARY = \"library\";\nexport const OBJECT_TYPE_EXPRESSION = \"expression\";\nexport const OBJECT_TYPE_SHAPE = \"shape\";\n\nexport type ObjectTypeExpression =\n  | typeof OBJECT_TYPE_EXPRESSION_CODE\n  | typeof OBJECT_TYPE_EXPRESSION_TEXT\n  | typeof OBJECT_TYPE_TOITDOCREF;\n\nexport type ToitMode = \"sdk\" | \"package\";\n\nexport interface ToitObject {\n  sdk_version: string;\n  version?: string;\n  pkg_name?: string;\n  sdk_path?: string[];\n  packages_path?: string[];\n  package_names?: { [key: string]: string };\n  contains_pkgs?: boolean;\n  contains_sdk?: boolean;\n  mode?: ToitMode;\n  libraries: ToitLibraries;\n}\n\nexport const TOIT_CATEGORY_FUNDAMENTAL = \"fundamental\";\nexport const TOIT_CATEGORY_JUST_THERE = \"just_there\";\nexport const TOIT_CATEGORY_MISC = \"misc\";\nexport const TOIT_CATEGORY_SUB = \"sub\";\n\nexport type ToitCategory =\n  | typeof TOIT_CATEGORY_FUNDAMENTAL\n  | typeof TOIT_CATEGORY_JUST_THERE\n  | typeof TOIT_CATEGORY_MISC\n  | typeof TOIT_CATEGORY_SUB;\n\nexport const TOIT_CLASS_KIND_CLASS = \"class\";\nexport const TOIT_CLASS_KIND_INTERFACE = \"interface\";\nexport const TOIT_CLASS_KIND_MIXIN = \"mixin\";\n\nexport type ToitClassKind =\n  | typeof TOIT_CLASS_KIND_CLASS\n  | typeof TOIT_CLASS_KIND_INTERFACE\n  | typeof TOIT_CLASS_KIND_MIXIN;\n\nexport interface ToitLibrary {\n  object_type: typeof OBJECT_TYPE_LIBRARY;\n  modules: ToitModules;\n  path: string[];\n  libraries: ToitLibraries;\n  name: string;\n  category: ToitCategory;\n}\n\nexport interface ToitLibraries {\n  [libraryName: string]: ToitLibrary;\n}\n\nexport interface ToitType {\n  object_type: \"reference\";\n  is_none: boolean;\n  is_any: boolean;\n  is_block: boolean;\n  reference: ToitReference;\n}\n\nexport interface ToitParameter {\n  object_type: typeof OBJECT_TYPE_PARAMETER;\n  name: string;\n  is_block: boolean;\n  is_named: boolean;\n  is_required: boolean;\n  default_value?: string;\n  type: ToitType;\n}\n\nexport interface ToitReference {\n  object_type: \"reference\";\n  name: string;\n  path: string[];\n}\n\nexport interface ToitModule {\n  object_type: typeof OBJECT_TYPE_MODULE;\n  name: string;\n  classes: ToitClass[];\n  interfaces: ToitClass[];\n  mixins: ToitClass[];\n  export_classes: ToitClass[];\n  export_interfaces: ToitClass[];\n  export_mixins: ToitClass[];\n  globals: ToitGlobal[];\n  export_globals: ToitGlobal[];\n  functions: ToitFunction[];\n  export_functions: ToitFunction[];\n  toitdoc?: ToitDoc;\n  category: ToitCategory;\n}\n\nexport interface ToitModules {\n  [moduleName: string]: ToitModule;\n}\n\nexport interface ToitGlobal {\n  object_type: typeof OBJECT_TYPE_GLOBAL;\n  name: string;\n  toitdoc: ToitDoc | null;\n}\n\nexport interface ToitFunction {\n  object_type: typeof OBJECT_TYPE_FUNCTION;\n  name: string;\n  parameters: ToitParameter[];\n  return_type: ToitType;\n  toitdoc: ToitDoc | null;\n  shape?: ToitShape;\n  is_inherited: boolean;\n}\n\nexport interface ToitClass {\n  object_type: typeof OBJECT_TYPE_CLASS;\n  name: string;\n  kind: ToitClassKind;\n  toitdoc: ToitDoc | null;\n  structure: ToitStructure;\n  extends: ToitReference;\n  interfaces: ToitReference[];\n  mixins: ToitReference[];\n}\n\nexport interface ToitStructure {\n  statics: ToitFunction[];\n  constructors: ToitFunction[];\n  factories: ToitFunction[];\n  fields: ToitField[];\n  methods: ToitFunction[];\n}\n\nexport interface ToitField {\n  object_type: typeof OBJECT_TYPE_FIELD;\n  name: string;\n  type: ToitType;\n  toitdoc: ToitDoc | null;\n  is_inherited: boolean;\n}\n\nexport interface ToitShape {\n  object_type: typeof OBJECT_TYPE_SHAPE;\n  arity: number;\n  total_block_count: number;\n  named_block_count: number;\n  names: string[];\n}\n\n// ToitDoc related\n\nexport type ToitDoc = ToitSection[];\n\nexport interface ToitSection {\n  object_type: typeof OBJECT_TYPE_SECTION;\n  title: string | null;\n  level: number;\n  statements: ToitStatement[];\n}\n\nexport type ToitStatement =\n  | ToitStatementParagraph\n  | ToitStatementItemized\n  | ToitStatementCodeSection;\n\nexport interface ToitStatementItemized {\n  object_type: typeof OBJECT_TYPE_STATEMENT_ITEMIZED;\n  items: ToitStatementItem[];\n}\n\nexport interface ToitStatementItem {\n  object_type: typeof OBJECT_TYPE_STATEMENT_ITEM;\n  statements: ToitStatement[];\n}\n\nexport interface ToitStatementCodeSection {\n  object_type: typeof OBJECT_TYPE_STATEMENT_CODE_SECTION;\n  text: string;\n}\n\nexport interface ToitStatementParagraph {\n  object_type: typeof OBJECT_TYPE_STATEMENT_PARAGRAPH;\n  expressions: ToitExpression[];\n}\n\nexport type ToitExpression =\n  | ToitExpressionCode\n  | ToitExpressionLink\n  | ToitExpressionText\n  | ToitDocRef;\n\nexport interface ToitExpressionCode {\n  object_type: typeof OBJECT_TYPE_EXPRESSION_CODE;\n  text: string;\n}\n\nexport interface ToitExpressionText {\n  object_type: typeof OBJECT_TYPE_EXPRESSION_TEXT;\n  text: string;\n}\n\nexport interface ToitExpressionLink {\n  object_type: typeof OBJECT_TYPE_EXPRESSION_LINK;\n  text: string;\n  url: string;\n}\n\nexport type ToitDocRefKind =\n  | \"other\"\n  | \"class\"\n  | \"global\"\n  | \"global-method\"\n  | \"static-method\"\n  | \"constructor\"\n  | \"factory\"\n  | \"method\"\n  | \"field\"\n  | \"parameter\"\n  | \"\";\n\nexport interface ToitDocRef {\n  object_type: typeof OBJECT_TYPE_TOITDOCREF;\n  kind: ToitDocRefKind;\n  text: string;\n  path: string[] | null;\n  holder: string | null;\n  name: string;\n  shape: ToitShape | null;\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  classUrlFromRef,\n  functionUrlFromRef,\n  libraryUrlFromRef,\n  methodUrlFromRef,\n} from \"../misc/util\";\nimport {\n  Class,\n  Function,\n  Libraries,\n  Library,\n  Method,\n  Parameter,\n  Type,\n} from \"./model\";\nimport { ClassMemberRef, TopLevelItemRef, TopLevelRef } from \"./reference\";\n\nfunction typeString(type: Type): string {\n  if (type.isNone) {\n    return \"none\";\n  }\n  if (type.isAny) {\n    return \"any\";\n  }\n  if (type.isBlock) {\n    return \"[block]\";\n  }\n  return type.reference?.name || \"unknown\";\n}\n\nfunction parametersString(parameters: Parameter[]): string {\n  return parameters\n    .map((parameter) => {\n      let param = parameter.name;\n      if (parameter.isNamed) {\n        param = \"--\" + param;\n      }\n      if (parameter.isBlock) {\n        param = \"[\" + param + \"]\";\n        return param;\n      }\n      return param + \"/\" + typeString(parameter.type);\n    })\n    .join(\" \");\n}\n\nfunction flattenMethod(\n  libraries: Libraries,\n  method: Method,\n  result: SearchableModel\n): void {\n  result.methods.push({\n    name: method.name,\n    ref: method.id,\n    className: method.id.classRef.name,\n    parameters: parametersString(method.parameters),\n    url: methodUrlFromRef(libraries, method.id),\n    type: \"method\",\n  });\n}\n\nfunction flattenFunction(\n  libraries: Libraries,\n  fhunction: Function,\n  result: SearchableModel\n): void {\n  result.functions.push({\n    name: fhunction.name,\n    ref: fhunction.id,\n    parameters: parametersString(fhunction.parameters),\n    url: functionUrlFromRef(libraries, fhunction.id),\n    type: \"function\",\n  });\n}\n\nfunction flattenClass(\n  libraries: Libraries,\n  klass: Class,\n  result: SearchableModel\n): void {\n  result.classes.push({\n    name: klass.name,\n    ref: klass.id,\n    url: classUrlFromRef(klass.id),\n    type: \"class\",\n  });\n\n  klass.statics\n    .concat(klass.methods)\n    .forEach((m) => flattenMethod(libraries, m, result));\n}\n\nfunction flattenInterface(\n  libraries: Libraries,\n  inter: Class,\n  result: SearchableModel\n): void {\n  result.interfaces.push({\n    name: inter.name,\n    ref: inter.id,\n    url: classUrlFromRef(inter.id),\n    type: \"interface\",\n  });\n\n  inter.statics\n    .concat(inter.methods)\n    .forEach((m) => flattenMethod(libraries, m, result));\n}\n\nfunction flattenMixin(\n  libraries: Libraries,\n  mixin: Class,\n  result: SearchableModel\n): void {\n  result.mixins.push({\n    name: mixin.name,\n    ref: mixin.id,\n    url: classUrlFromRef(mixin.id),\n    type: \"mixin\",\n  });\n\n  mixin.statics\n    .concat(mixin.methods)\n    .forEach((m) => flattenMethod(libraries, m, result));\n}\n\nfunction flattenLibrary(\n  libraries: Libraries,\n  library: Library,\n  result: SearchableModel\n): void {\n  result.libraries.push({\n    name: library.name,\n    ref: library.id,\n    url: libraryUrlFromRef(library.id),\n    type: \"library\",\n  });\n\n  Object.values(library.libraries).forEach((m) =>\n    flattenLibrary(libraries, m, result)\n  );\n  Object.values(library.interfaces).forEach((inter) =>\n    flattenInterface(libraries, inter, result)\n  );\n  Object.values(library.mixins).forEach((mixin) =>\n    flattenMixin(libraries, mixin, result)\n  );\n  Object.values(library.classes).forEach((c) =>\n    flattenClass(libraries, c, result)\n  );\n  Object.values(library.functions).forEach((f) =>\n    flattenFunction(libraries, f, result)\n  );\n}\n\nexport function flatten(libraries: Libraries | undefined): SearchableModel {\n  const result = {\n    libraries: [],\n    classes: [],\n    interfaces: [],\n    mixins: [],\n    functions: [],\n    methods: [],\n  };\n  if (!libraries) {\n    return result;\n  }\n\n  Object.values(libraries).forEach((m) => flattenLibrary(libraries, m, result));\n  return result;\n}\n\ntype SearchableType =\n  | \"library\"\n  | \"class\"\n  | \"interface\"\n  | \"mixin\"\n  | \"function\"\n  | \"method\";\n\nexport interface Searchable {\n  type: SearchableType;\n  name: string;\n  url: string;\n}\n\nexport interface SearchableModel {\n  libraries: SearchableLibrary[];\n  classes: SearchableClass[];\n  interfaces: SearchableInterface[];\n  mixins: SearchableMixin[];\n  functions: SearchableFunction[];\n  methods: SearchableMethod[];\n}\n\nexport interface SearchableLibrary extends Searchable {\n  name: string;\n  ref: TopLevelRef;\n  url: string;\n  type: \"library\";\n}\n\nexport interface SearchableClass extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  url: string;\n  type: \"class\";\n}\n\nexport interface SearchableInterface extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  url: string;\n  type: \"interface\";\n}\n\nexport interface SearchableMixin extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  url: string;\n  type: \"mixin\";\n}\n\nexport interface SearchableFunction extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  parameters: string;\n  url: string;\n  type: \"function\";\n}\n\nexport interface SearchableMethod extends Searchable {\n  name: string;\n  ref: ClassMemberRef;\n  className: string;\n  parameters: string;\n  url: string;\n  type: \"method\";\n}\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  ViewMode,\n  getMetaValue,\n  setContainsPkgs,\n  setContainsSdk,\n  setPackageName,\n  setViewMode,\n} from \"../App\";\nimport { modelFrom } from \"../generator/convert\";\nimport { ToitObject } from \"../generator/doc\";\nimport { Libraries } from \"../model/model\";\nimport { SearchableModel, flatten } from \"../model/search\";\n\nexport interface RootState {\n  doc: DocState;\n}\n\nexport const fetchDoc = createAsyncThunk(\"docdata/fetch\", async () => {\n  const docPath =\n    process.env.PUBLIC_URL + getMetaValue(\"toitdoc-path\", \"/toitdoc.json\");\n  const response = await fetch(docPath);\n  return (await response.json()) as ToitObject;\n});\n\nexport interface DocState {\n  sdkVersion?: string;\n  version?: string;\n  libraries?: Libraries;\n  searchableModel?: SearchableModel;\n  error?: string;\n}\n\nconst initialState: DocState = {\n  sdkVersion: undefined,\n  libraries: undefined,\n  version: undefined,\n  searchableModel: undefined,\n  error: undefined,\n};\n\nexport const doc = createSlice({\n  name: \"doc\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchDoc.pending, (state, action) => {\n        state = initialState;\n      })\n      .addCase(fetchDoc.fulfilled, (state, action) => {\n        const sdkVersion = action.payload.sdk_version;\n        const version = action.payload.version;\n        const sdkPath = action.payload.sdk_path;\n        const packagesPath = action.payload.packages_path;\n        const packageNames = action.payload.package_names;\n        const containsPkgs = action.payload.contains_pkgs === true;\n        const containsSdk = action.payload.contains_sdk === true;\n        const mode = action.payload.mode;\n        state.sdkVersion = sdkVersion;\n        state.version = version;\n        // Instead of getting the root-path, package-name and view-mode through a header,\n        // get/deduce it from the json file.\n        const pkgName = action.payload.pkg_name;\n        if (pkgName) setPackageName(pkgName);\n        switch (mode) {\n          case \"sdk\":\n            setViewMode(ViewMode.SDK);\n            break;\n          case \"package\":\n            setViewMode(ViewMode.Package);\n            break;\n          case undefined:\n            setViewMode(ViewMode.Folder);\n            break;\n          default:\n            throw new Error(\"Unknown mode: \" + mode);\n        }\n        setContainsPkgs(containsPkgs);\n        setContainsSdk(containsSdk);\n        state.libraries = modelFrom(\n          action.payload.libraries,\n          sdkPath,\n          packagesPath,\n          packageNames\n        );\n        state.searchableModel = flatten(state.libraries);\n      })\n      .addCase(fetchDoc.rejected, (state, action) => {\n        state.error = action.error.message;\n      });\n  },\n});\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport styled from \"@emotion/styled\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AnyAction, ThunkDispatch } from \"@reduxjs/toolkit\";\nimport React, { Component, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  BrowserRouter,\n  Redirect,\n  Route,\n  RouteComponentProps,\n  useLocation,\n} from \"react-router-dom\";\nimport { length, sideBarTheme, theme } from \"./assets/theme\";\nimport \"./assets/typography.css\";\nimport ErrorBoundary from \"./components/ErrorPage\";\nimport HeaderBar from \"./components/header/HeaderBar\";\nimport { ClassInfoParams } from \"./components/main/ClassInfoView\";\nimport { LibraryInfoParams } from \"./components/main/LibraryInfoView\";\nimport WelcomeFolderPage from \"./components/main/WelcomeFolderPage\";\nimport WelcomePage from \"./components/main/WelcomePage\";\nimport NavigationView, {\n  NavigationParams,\n} from \"./components/navigation/NavigationView\";\nimport ThemeProvider from \"./components/ThemeProvider\";\nimport ClassInfo from \"./containers/main/ClassInfo\";\nimport LibraryInfo from \"./containers/main/LibraryInfo\";\nimport { Libraries } from \"./model/model\";\nimport { fetchDoc, RootState } from \"./redux/doc\";\n\nconst mapStateToProps = (\n  state: RootState\n): Pick<AppProps, \"libraries\" | \"version\" | \"sdkVersion\"> => {\n  return {\n    version: state.doc.version,\n    sdkVersion: state.doc.sdkVersion,\n    libraries: state.doc.libraries,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<RootState, void, AnyAction>\n): Pick<AppProps, \"fetchDoc\"> => {\n  return {\n    fetchDoc: (): void => {\n      void dispatch(fetchDoc());\n    },\n  };\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    \"@global\": {\n      body: {\n        margin: 0,\n        fontFamily: \"Roboto\",\n      },\n\n      code: {\n        fontFamily: \"monospace\",\n        fontSize: 14,\n      },\n\n      \"*\": {\n        boxSizing: \"border-box\",\n      },\n      \"a:link\": {\n        color: theme.palette.primary.main,\n        textDecoration: \"none\",\n      },\n      \"a:visited\": {\n        color: theme.palette.primary.main,\n        textDecoration: \"none\",\n      },\n      \"a:hover\": {\n        textDecoration: \"underline\",\n      },\n    },\n    appContainer: {\n      position: \"relative\",\n    },\n  })\n);\n\nconst ContentWrapper = styled.div`\n  padding-top: calc(3rem + ${({ theme }) => length(theme.layout.headerHeight)});\n  margin-left: ${({ theme }) => length(theme.layout.sidebarWidth)};\n`;\n\nconst Content = styled.div`\n  padding-left: 3rem;\n  padding-right: 3rem;\n  min-height: calc(100vh - ${({ theme }) => length(theme.layout.footerHeight)});\n  /* max-width: 44rem; The width I'd actually like to use once the sidebar is implemented */\n  max-width: 55rem;\n  margin: 0 auto;\n\n  *[id] {\n    /* Make sure that anchor links aren't hidden behind the header */\n    scroll-margin-top: ${({ theme }) => length(theme.layout.headerHeight)};\n  }\n`;\n\nconst Footer = styled.footer`\n  text-align: center;\n  padding: 0 3rem;\n  height: ${({ theme }) => length(theme.layout.headerHeight)};\n  margin-left: ${({ theme }) => length(theme.layout.sidebarWidth)};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  top: calc(50% - 20px);\n  left: calc(50% - 20px);\n`;\n\ninterface AppProps {\n  libraries?: Libraries;\n  sdkVersion?: string;\n  version?: string;\n  fetchDoc: () => void;\n}\n\nexport function getMetaValue(key: string, def = \"\"): string {\n  if (typeof document === \"undefined\") {\n    return def;\n  }\n\n  // Check if the meta `key` is set.\n  const obj = document.querySelector('meta[name=\"' + key + '\"]');\n  if (obj) {\n    return obj.getAttribute(\"content\") || def;\n  }\n  return def;\n}\n\nfunction getBaseURL(): string {\n  const def = process.env.PUBLIC_URL;\n  const obj = document.querySelector(\"base[href]\");\n  return obj?.getAttribute(\"href\") || def;\n}\nexport const baseURL = getBaseURL();\n\nexport enum ViewMode {\n  Package = \"package\",\n  SDK = \"sdk\",\n  Folder = \"folder\",\n}\n\nexport let viewMode = \"sdk\" as ViewMode;\nexport let packageName: string | undefined = undefined;\nexport let containsPkgs = false;\nexport let containsSdk = false;\n\nexport function setViewMode(newMode: ViewMode): void {\n  viewMode = newMode;\n}\nexport function setPackageName(newName: string): void {\n  packageName = newName;\n}\nexport function setContainsPkgs(newContainsPkgs: boolean): void {\n  containsPkgs = newContainsPkgs;\n}\nexport function setContainsSdk(newContainsSdk: boolean): void {\n  containsSdk = newContainsSdk;\n}\n\nclass App extends Component<AppProps> {\n  componentDidMount(): void {\n    this.props.fetchDoc();\n  }\n\n  render(): JSX.Element {\n    return (\n      <>\n        <ThemeProvider theme={theme}>\n          <BrowserRouter basename={baseURL}>\n            <AppContent {...this.props} />\n          </BrowserRouter>\n        </ThemeProvider>\n      </>\n    );\n  }\n}\n\nconst FixedNavigationView = styled(NavigationView)`\n  position: fixed;\n  width: ${(props): string => length(props.theme.layout.sidebarWidth)};\n  height: 100vh;\n  top: 0;\n  left: 0;\n`;\n\nfunction AppContent(props: AppProps): JSX.Element {\n  const classes = useStyles(props);\n\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  // Use the first entry of the libraries as default.\n  const defaultURL =\n    props.libraries !== undefined\n      ? `/${Object.keys(props.libraries)[0]}/library-summary`\n      : \"\";\n\n  // Set the title of the window.\n  switch (viewMode) {\n    case ViewMode.Package:\n      document.title = `${packageName}`;\n      break;\n    case ViewMode.SDK:\n      document.title = \"Standard libraries\";\n      break;\n    case ViewMode.Folder:\n      document.title = `Toitdocs`;\n      break;\n  }\n\n  return (\n    <>\n      {props.libraries !== undefined ? (\n        <>\n          <div className={classes.appContainer}>\n            <ErrorBoundary>\n              <HeaderBar />\n            </ErrorBoundary>\n            <ThemeProvider theme={sideBarTheme}>\n              <Route\n                exact\n                path=\"/\"\n                render={(\n                  routeProps: RouteComponentProps<NavigationParams>\n                ): React.ReactNode => <FixedNavigationView {...routeProps} />}\n              />\n              <Route\n                exact\n                path=\"/:libraryName*/:rest\"\n                render={(\n                  routeProps: RouteComponentProps<NavigationParams>\n                ): React.ReactNode => <FixedNavigationView {...routeProps} />}\n              />\n            </ThemeProvider>\n\n            <ContentWrapper>\n              <Content>\n                <ErrorBoundary>\n                  {(() => {\n                    switch (viewMode) {\n                      case ViewMode.Package:\n                        return (\n                          <Route exact path=\"/\">\n                            <Redirect to={defaultURL} />\n                          </Route>\n                        );\n                      case ViewMode.SDK:\n                        return <Route exact path=\"/\" component={WelcomePage} />;\n                      case ViewMode.Folder:\n                        return (\n                          <Route exact path=\"/\" component={WelcomeFolderPage} />\n                        );\n                    }\n                  })()}\n                  <Route\n                    exact\n                    path=\"/:libraryName+/library-summary\"\n                    render={(\n                      routeProps: RouteComponentProps<LibraryInfoParams>\n                    ): React.ReactNode => <LibraryInfo {...routeProps} />}\n                  />\n                  <Route\n                    exact\n                    path=\"/:libraryName+/class-:className\"\n                    render={(\n                      routeProps: RouteComponentProps<ClassInfoParams>\n                    ): React.ReactNode => <ClassInfo {...routeProps} />}\n                  />\n                </ErrorBoundary>\n              </Content>\n            </ContentWrapper>\n            <Footer>\n              {props.version && (\n                <>\n                  Version: {props.version}\n                  <br />\n                </>\n              )}\n              SDK version: {props.sdkVersion}\n            </Footer>\n          </div>\n        </>\n      ) : (\n        <StyledCircularProgress disableShrink />\n      )}\n    </>\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, combineReducers, createStore } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport App from \"./App\";\nimport { doc } from \"./redux/doc\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst rootReducer = combineReducers({\n  doc: doc.reducer,\n});\n\nconst store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/logo.097b328c.svg\";"],"sourceRoot":""}