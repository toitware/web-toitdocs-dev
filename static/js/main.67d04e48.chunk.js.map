{"version":3,"sources":["assets/images/logo.svg","assets/codemirror/toit.js","assets/theme.ts","components/ErrorPage.tsx","components/header/SearchBar.tsx","components/header/SearchResults.tsx","components/header/SearchView.tsx","containers/header/Search.ts","components/header/HeaderBar.tsx","misc/util.ts","model/model.ts","components/general/CodeBlock.tsx","components/doc/Toitdocs.tsx","components/main/SummaryView.tsx","containers/main/Summary.ts","components/main/WelcomePage.tsx","components/navigation/LibraryNavigation.tsx","components/navigation/NavigationView.tsx","components/ThemeProvider.tsx","components/general/DetailsList.tsx","components/doc/Type.tsx","components/doc/Fields.tsx","components/doc/Functions.tsx","components/general/TablePanel.tsx","components/main/ClassOverview.tsx","components/main/ClassInfoView.tsx","containers/main/ClassInfo.ts","components/doc/Classes.tsx","components/doc/Globals.tsx","components/main/LibraryInfoView.tsx","containers/main/LibraryInfo.ts","generator/convert.ts","generator/doc.ts","model/search.ts","redux/doc.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","mod","CodeMirror","defineMode","config","last","array","length","subState","state","setSubState","makeJsObject","str","result","split","i","keywords","atoms","specialVars","IDENTIFIER","TYPE","OVERRIDABLE_OPERATOR","CONSTANT_HEURISTIC","TYPE_HEURISTIC","CONTROL","isKeyword","propertyIsEnumerable","isAtom","isSpecialVar","isReserved","tryComments","stream","match","skipToEnd","tokenizeMultilineComment","context","push","tokenizeMultilineCommentEnd","pop","next","tryString","tokenizeMultilineString","tokenizeSinglelineString","tokenizeDelimited","closing","expression_result","tryExpression","peek","tryDelimited","style","current","tokenizeIs","tokenizeIsAs","tokenizeType","tokenizeEscape","identifier_result","tryIdentifier","eatWhile","escape_result","eol","tryChar","tryNumber","localAnnotation","sub","allowPrefixedDot","backUp","id","allowNullable","tokenizeType2","indexOfDot","indexOf","tokenizeImport","comment_result","importError","tokenizeExport","tokenizeClassError","tokenizeClass","signatureError","nextSubState","tokenizeMemberDeclaration","MEMBER_DECLARATION_START","tokenizeFunctionBody","tokenizeFunctionSignature","currentSubState","matched_result","DEFAULT_VALUE_AFTER_IDENTIFIER","tokenizeDefaultValueContinuation","error","kind","lastIndentation","tryDefaultValue","isNamed","isSetting","prefix","name","slice","tryNamedArgument","tryOperator","tryIsAs","tryPostfixMemberOrIdentifier","tryPrimitive","tryControl","tokenizeTopLevel","tryImport","tryExport","tryClass","startOfLine","indentation","tryImpliedTopLevelFunction","tryToplevelDeclaration","tokenizeError","startState","basecolumn","readNonWhitespace","atColonIndentation","token","sol","eatSpace","tokenizer","indent","textAfter","Pass","closeBrackets","triples","lineComment","blockCommentStart","blockCommentEnd","fold","defineMIME","window","navigator","then","require","layout","sidebarWidth","headerHeight","footerHeight","theme","createMuiTheme","palette","type","background","paper","default","text","primary","main","secondary","typography","fontFamily","body1","body2","fontSize","h1","h2","h3","h4","h5","h6","fontWeight","sideBarTheme","ErrorBoundary","hasError","info","this","setState","console","log","Grid","item","className","props","classes","grid","to","children","React","Component","withStyles","createStyles","margin","spacing","useStyles","makeStyles","search","padding","display","alignItems","flex","input","marginLeft","clearIcon","marginRight","cursor","memo","Box","border","borderLeft","borderTop","borderRight","InputBase","placeholder","inputProps","onChange","event","onSearch","target","value","searchBy","onClick","onFocus","root","position","width","SEARCH_RESULTS_WIDTH","maxHeight","overflow","marginTop","SEARCH_BAR_WIDTH","listItem","flexDirection","color","emphText","dark","SearchResults","results","map","index","ResultItem","key","hideResults","Paper","square","List","from","ref","path","join","libraryRef","parameters","classRef","ListItem","button","component","href","url","Typography","variant","delayTimer","styles","searchBar","SearchView","libraries","interfaces","mixins","functions","methods","searchString","clearTimeout","setTimeout","model","m","inter","mixin","c","f","onClickAway","searchIn","Fuse","keys","threshold","distance","ClickAwayListener","connect","doc","searchableModel","StyledAppBar","styled","AppBar","HeaderBar","elevation","Toolbar","libraryFrom","libraryName","rootLibraries","library","undefined","libraryFromRef","methodFromRef","klass","offset","Object","values","exportedClasses","exportedInterfaces","exportedMixins","classFromRef","statics","getFunctionId","functionName","shape","shapeString","arity","totalBlockCount","namedBlockCount","names","encodeURIComponent","libraryUrl","baseUrl","classUrl","memberUrl","globalUrl","classUrlFromRef","libraryUrlFromRef","functionUrlFromRef","fhunction","exportedFunctions","functionFromRef","methodUrlFromRef","method","Wrapper","div","CodeBlock","code","replace","options","mode","readOnly","tabSize","statementParagraph","paddingBottom","sectionTitle","paddingTop","otherDocRef","StatementCodeSection","ExpressionCode","ExpressionText","StatementItemized","itemized","items","statements","statement","Statement","StatementParagraph","isHeader","expressions","expr","Expression","expression","ToitdocRef","holder","urlFromLinkRef","reference","Error","Section","section","title","Toitdocs","headerOnly","toitdoc","headerToitdoc","SummaryView","fundamentals","justThere","misc","forEach","lib","category","renderSection","libList","libEntry","PureComponent","WelcomePage","header","Summary","subLibraries","paddingLeft","openLibrary","LibraryNavigation","showSubLibraries","openSubLibrary","sort","a","b","localeCompare","subLibrary","Title","NavigationView","location","analytics","page","useSelector","params","alt","src","logo","height","viewMode","ViewMode","SDK","ThemeProvider","details","element","divider","marginBottom","Signature","SignatureName","span","DetailsList","elements","concat","link","hash","description","isInherited","toitdocHeaderOnly","Divider","TypeView","isNone","isAny","isBlock","TypeReference","Fields","fields","field","getDescription","returnType","hideReturnTypes","parameter","param","isRequired","Functions","fn","TablePanelGen","other","role","hidden","aria-labelledby","TablePanel","tabFieldData","active","tab","TableContainer","Table","size","aria-label","ariaLabel","methodsTable","TableBody","TableRow","TableCell","scope","tabData","a11yProps","ClassOverviewView","constructors","Tabs","textColor","indicatorColor","Tab","label","hiddenTab","minWidth","ClassInfoView","hashId","substring","document","getElementById","scrollIntoView","classInfo","classFrom","notFound","extends","ClassOverview","Classes","Globals","globals","global","LibraryInfoView","libName","importPath","isCoreExported","noImport","isCore","startsWith","exec","heading","importingText","exportedGlobals","sdkPath","packagesPath","packageNames","endsWith","urlAndPathFrom","Package","isSdkPath","isPackagePath","urlPath","srcIndex","versionNumber","packageId","packageName","nestedPath","unshift","PACKAGES_URL","buildPackageUrlAndPath","shift","len","shapeFrom","toitShape","total_block_count","named_block_count","linkRefKindFrom","toitDocRefKind","linkRefFrom","toitDocRef","docStatementFrom","toitStatement","object_type","toitExpression","docExpressionFrom","toitItem","s","docFrom","toitDoc","toitSection","docSectionFrom","referenceFrom","toitReference","typeFrom","toitType","is_none","is_any","is_block","parameterFrom","toitParameter","is_named","is_required","methodFrom","toitMethod","return_type","is_inherited","classKindFrom","toitClass","classId","extend","structure","toitField","fieldFrom","factories","constructor","statik","globalFrom","toitGlobal","functionFrom","toitFunction","categoryFrom","libraryFromModule","toitModule","libraryId","export_classes","export_interfaces","export_mixins","export_globals","export_functions","libraryFromLibrary","toitLibrary","libraryPath","libraryContent","modules","subLibraryName","libLibrary","otherLibrary","JSON","stringify","mergeLibraries","foldLibrary","topLibrary","appendToIDPath","parametersString","typeString","flattenMethod","flattenLibrary","flattenInterface","flattenMixin","flattenClass","flattenFunction","fetchDoc","createAsyncThunk","version","docPath","process","getMetaValue","fetch","response","json","initialState","sdkVersion","createSlice","reducers","extraReducers","builder","rootPath","addCase","pending","action","fulfilled","payload","sdk_version","sdk_path","packages_path","package_names","newMode","pkgName","pkg_name","rootLibrary","generatorSdkPath","generatorPackagesPath","generatorPackageNames","modelFrom","flatten","rejected","message","body","boxSizing","textDecoration","appContainer","ContentWrapper","Content","Footer","footer","StyledCircularProgress","CircularProgress","def","obj","querySelector","getAttribute","baseURL","getBaseURL","App","versionFromParams","basename","AppContent","FixedNavigationView","segmentAPIKey","useMemo","pathname","useLocation","useEffect","scrollTo","packageURL","exact","render","routeProps","LibraryInfo","ClassInfo","disableShrink","segmentKey","changeConsent","show","dispatch","Boolean","hostname","rootReducer","combineReducers","reducer","store","createStore","applyMiddleware","thunkMiddleware","searchParams","URLSearchParams","has","get","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.67d04e48.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.097b328c.svg\";","/* eslint-disable */\n// Code copied from toitware/ide-tools. DO NOT EDIT.\n\n// Copyright (C) 2021 Toitware ApS. All rights reserved.\n// Use of this source code is governed by an MIT-style license that can be\n// found in the LICENSE file.\n\n(function (mod) {\n  if (typeof CodeMirror !== \"undefined\")  // Just use the variable if it already exits.\n    mod(CodeMirror);\n  if (typeof window === \"undefined\" || typeof window.navigator == 'undefined')\n    import(\"codemirror\").then(mod);\n  else if ( typeof module == \"object\" && module.hot)\n    import(\"codemirror\").then(mod);\n  else if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"toit\", function (config) {\n    function last(array) {\n      return array[array.length - 1];\n    }\n    function set_last(array, val) {\n      array[array.length - 1] = val;\n    }\n\n    function subState(state) {\n      return last(state.subState);\n    }\n    function setSubState(state, subState) {\n      state.subState[state.subState.length - 1] = subState;\n    }\n\n    function makeJsObject(str) {\n      var result = {};\n      var split = str.split(\"|\");\n      for (var i = 0; i < split.length; i++) result[split[i]] = true;\n      return result;\n    }\n    var keywords = makeJsObject(\n      \"assert|and|or|not|if|for|else|try|finally|\" +\n      \"while|break|continue|throw|static|abstract|return|unreachable\");\n    var atoms = makeJsObject(\"true|false|null\");\n    var specialVars = makeJsObject(\"this|super|it\");\n\n    var IDENTIFIER = /[a-zA-Z_]([\\w-]*\\w)?/;\n    var TYPE = /[a-zA-Z_]([\\w-]*\\w)?(\\.[a-zA-Z_]([\\w-]*\\w)?)?/;\n    var OVERRIDABLE_OPERATOR = /==|>=|<=|<<|>>>|>>|\\*|\\+|-|%|\\/|<|>|&|\\||\\^|~|\\[\\]\\=|\\[\\]|\\[\\.\\.\\]/\n\n    var CONSTANT_HEURISTIC = /^_?[A-Z][A-Z_0-9-]*$/;\n    var TYPE_HEURISTIC = /^_?[A-Z][\\w-]*[a-z][\\w-]*$/;\n    var CONTROL = /[?:;]/;\n\n    function isKeyword(str) {\n      return keywords.propertyIsEnumerable(str);\n    }\n    function isAtom(str) {\n      return atoms.propertyIsEnumerable(str);\n    }\n    function isSpecialVar(str) {\n      return specialVars.propertyIsEnumerable(str);\n    }\n    function isReserved(str) {\n      return isKeyword(str) || isAtom(str) || isSpecialVar(str);\n    }\n\n    function tryComments(stream, state) {\n      // TODO: once code-mirror supports doc-comments, adjust.\n      if (stream.match(\"//\")) {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n      if (stream.match(\"/*\")) {\n        return tokenizeMultilineComment(stream, state);\n      }\n      return null;\n    }\n\n    function tokenizeMultilineComment(stream, state) {\n      state.context.push([tokenizeMultilineCommentEnd, -1]);\n      state.subState.push(null);\n      return tokenizeMultilineCommentEnd(stream, state);\n    }\n\n    function tokenizeMultilineCommentEnd(stream, state) {\n      while (true) {\n        if (stream.match(\"/*\")) {\n          return tokenizeMultilineComment(stream, state);\n        }\n        if (stream.match(\"*/\")) {\n          state.context.pop();\n          state.subState.pop();\n          return \"comment\";\n        }\n        if (!stream.next()) {\n          // End of line.\n          return \"comment\";\n        }\n      }\n    }\n\n    var STRING_PART = 0;\n    var STRING_ESCAPE_DOLLAR = 1;\n    var STRING_ESCAPE_EXPRESSION = 2;\n    var STRING_ESCAPE_AFTER_PAREN = 3;\n    var STRING_ESCAPE_AFTER_IDENTIFIER = 4;\n    var STRING_ESCAPE_AFTER_FORMAT = 5;\n    function tryString(stream, state) {\n      if (stream.match('\"')) {\n        if (stream.match('\"\"')) {\n          // Multiline string.\n          state.context.push([tokenizeMultilineString, -1]);\n          state.subState.push(STRING_PART);\n          return tokenizeMultilineString(stream, state);\n        }\n        state.context.push([tokenizeSinglelineString, 9999]);\n        state.subState.push(STRING_PART);\n        return tokenizeSinglelineString(stream, state);\n      }\n      return null;\n    }\n\n    function tokenizeDelimited(stream, state) {\n      var closing = subState(state);\n      var expression_result = tryExpression(stream, state);\n      if (expression_result) return expression_result;\n      while (true) {\n        var peek = stream.peek();\n        if (!peek || peek == ' ') return \"enclosed\";\n        if (closing == \"]\" && stream.match(\"..\")) {\n          // We assume it's the slice operator.\n          return \"op_slice\";\n        }\n        var next = stream.next();\n        if (next == closing) {\n          state.context.pop();\n          state.subState.pop();\n          switch (closing) {\n            case \")\": return \"paren\";\n            case \"}\": return \"brace\";\n            case \"]\": return \"bracket\";\n          }\n          return \"error\";\n        } else if (next == ',') {\n          if (closing == \")\") return \"error\";\n          return \"separator\";\n        } else {\n          return \"error\";\n        }\n      }\n    }\n\n    function tryDelimited(stream, state) {\n      if (stream.match(/[({[]|#[[]/)) {\n        state.context.push([tokenizeDelimited, -1]);\n        // Abusing `subState` to store the delimiter.\n        var closing;\n        var style;\n        switch (stream.current()) {\n          case \"(\": closing = \")\"; style = \"paren\"; break;\n          case \"{\": closing = \"}\"; style = \"brace\"; break;\n          case \"[\": closing = \"]\"; style = \"bracket\"; break;\n          case \"#[\": closing = \"]\"; style = \"bracket\"; break;\n        }\n        state.subState.push(closing);\n        return style;\n      }\n    }\n\n    function tryControl(stream, state) {\n      if (stream.match(CONTROL)) {\n        return \"control\";\n      }\n    }\n\n    function tokenizeIs(stream, state) {\n      state.context.pop();\n      state.subState.pop();\n      state.context.push([tokenizeIsAs, -1]);\n      state.subState.push(null);\n      if (stream.match(/not(?!-\\w)\\b/)) {\n        return \"is_as\";\n      } else {\n        return tokenizeIsAs(stream, state)\n      }\n    }\n\n    function tokenizeIsAs(stream, state) {\n      state.context.pop();\n      state.subState.pop();\n      if (!stream.match(TYPE, false)) {\n        return \"is_as_error\";\n      }\n      return tokenizeType(stream, state);\n    }\n\n    function tryIsAs(stream, state) {\n      if (stream.match(/is(?!-\\w)\\b/)) {\n        state.context.push([tokenizeIs, -1]);\n        state.subState.push(null);\n        return \"is_as\";\n      }\n      if (stream.match(/as(?!-\\w)\\b/)) {\n        state.context.push([tokenizeIsAs, -1]);\n        state.subState.push(null);\n        return \"is_as\";\n      }\n    }\n\n    function tokenizeEscape(stream, state) {\n      switch (subState(state)) {\n        case STRING_ESCAPE_DOLLAR:\n          stream.next();\n          var peek = stream.peek();\n          if (!peek || (peek != \"(\" && !peek.match(/[a-zA-Z_]/))) {\n            setSubState(state, STRING_PART);\n            return \"missing_escape_expression\";\n          }\n          setSubState(state, STRING_ESCAPE_EXPRESSION);\n          return \"string_dollar\";\n\n        case STRING_ESCAPE_EXPRESSION:\n          if (stream.match('(')) {\n            setSubState(state, STRING_ESCAPE_AFTER_PAREN);\n            return \"paren\";\n          }\n          // Use `tryIdentifier` to get special handling of identifiers.\n          var identifier_result = tryIdentifier(stream, state);\n          // TODO(florian): this is brittle, since we might want to return\n          // different styles for different keywords.\n          if (identifier_result == \"keyword\") {\n            identifier_result = \"error\";\n          }\n          setSubState(state, STRING_ESCAPE_AFTER_IDENTIFIER);\n          return identifier_result;\n\n        case STRING_ESCAPE_AFTER_IDENTIFIER:\n          if (stream.match(/\\.[a-zA-Z_]/, false)) {\n            stream.next();\n            // We can use `STRING_ESCAPE_DOLLAR` as we know that we will\n            // hit an identifier.\n            setSubState(state, STRING_ESCAPE_EXPRESSION);\n            return \"dot\";\n          }\n          if (stream.match('[')) {\n            stream.next();\n            // Keeping the current substate, as we want to continue as if\n            // we just finished parsing an identifier.\n            state.context.push([tokenizeDelimited, -1]);\n            // Abusing `subState` to store the delimiter.\n            state.subState.push(\"]\");\n            return \"bracket\";\n          }\n          setSubState(state, STRING_PART);\n          return null;\n\n        case STRING_ESCAPE_AFTER_PAREN:\n          if (stream.peek() == '%') {\n            stream.eatWhile(/[^ ]/);\n            setSubState(state, STRING_ESCAPE_AFTER_FORMAT);\n            return \"string_format\";\n          }\n        // Fall through:\n        case STRING_ESCAPE_AFTER_FORMAT:\n          setSubState(state, STRING_PART);  // When we come back.\n          state.context.push([tokenizeDelimited, -1]);\n          // Abusing `subState` to store the delimiter.\n          state.subState.push(\")\");\n          return tokenizeDelimited(stream, state);\n\n        default:\n          throw \"INTERNAL ERROR\";\n      }\n    }\n\n    function tokenizeSinglelineString(stream, state) {\n      if (subState(state) != STRING_PART) {\n        var escape_result = tokenizeEscape(stream, state);\n        if (escape_result) return escape_result;\n        // Otherwise continue as string part.\n      }\n      while (true) {\n        stream.eatWhile(/[^\"$\\\\]/);\n        if (stream.eol()) return \"unfinished_string\";\n        // TODO: we could highlight escapes. (Especially \\x and \\u).\n        if (stream.match(\"\\\\\")) {\n          stream.next();  // Consume the escaped character.\n          continue;\n        }\n        if (stream.peek() == '$') {\n          setSubState(state, STRING_ESCAPE_DOLLAR);\n          return \"singleline_string\";\n        }\n        stream.match('\"');\n        state.context.pop();\n        state.subState.pop();\n        return \"singleline_string\";\n      }\n    }\n\n    function tokenizeMultilineString(stream, state) {\n      if (subState(state) != STRING_PART) {\n        var escape_result = tokenizeEscape(stream, state);\n        if (escape_result) return escape_result;\n        // Otherwise continue as string part.\n      }\n      while (true) {\n        stream.eatWhile(/[^\"$\\\\]/);\n        if (stream.eol()) return \"multiline_string\";\n        // TODO: we could highlight escapes. (Especially \\x and \\u).\n        if (stream.match(\"\\\\\")) stream.next();  // Consume the escaped character.\n        if (stream.peek() == '$') {\n          setSubState(state, STRING_ESCAPE_DOLLAR);\n          return \"multiline_string\";\n        }\n        stream.next();\n        if (stream.match('\"\"')) {\n          state.context.pop();\n          state.subState.pop();\n          return \"multiline_string\";\n        }\n      }\n    }\n\n    function tryChar(stream, state) {\n      if (stream.match(\"'\")) {\n        while (true) {\n          if (stream.match(\"'\")) {\n            return \"character\";\n          }\n          stream.match(\"\\\\\");  // If there is a backslash, consume it and the next character.\n          stream.next();\n          if (stream.eol()) {\n            return \"unfinished_character\";\n          }\n        }\n      }\n      return null;\n    }\n\n    function tryNumber(stream, state) {\n      if (stream.match(/(\\d(\\d|_\\d)*)?\\.\\d(\\d|_\\d)*([eE][+-]?\\d(\\d|_\\d)*)?/)) return \"float\";  // 0.5e10 and .5e+10\n      if (stream.match(/\\d(\\d|_\\d)*[eE][+-]?\\d(\\d|_\\d)*/)) return \"float\";  // 1e+10\n      if (stream.match(/0[xX]([\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*)?\\.[\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*[pP][+-]?\\d(\\d|_\\d)*/)) return \"hex_float\";  // 0x.D7P-3 and 0xAb.D7p+10\n      if (stream.match(/0[xX][\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*[pP][+-]?\\d(\\d|_\\d)*/)) return \"hex_float\";  // 0xap+10\n      if (stream.match(/0[xX][\\da-fA-F]([\\da-fA-F]|_[\\da-fA-F])*/)) return \"hex\";\n      if (stream.match(/0[bB][01a-fA-F]([01a-fA-F]|_[01a-fA-F])*/)) return \"binary\";\n      if (stream.match(/\\d(\\d|_\\d)*/)) return \"integer\";\n      return null;\n    }\n\n    function tryNamedArgument(stream, state) {\n      if (stream.match(\"--\")) {\n        if (stream.match(IDENTIFIER)) return \"named_argument\";\n        stream.backUp(2);\n      }\n      return null;\n    }\n\n    function tryOperator(stream, state) {\n      if (stream.match(/\\*|\\+|-|%|\\/|<<|>>>|>>|&|\\||\\^|~/)) {\n        if (stream.match(\"=\")) {\n          return \"op_assig\";\n        }\n        return \"overridable_op\"\n      }\n      if (stream.match(/==|!=|>=|<=|<|>/)) {\n        return \"relational\";\n      }\n      if (stream.match(\"=\")) {\n        return \"assig\"\n      }\n      if (stream.match(/:=|::=/)) {\n        return \"define\";\n      }\n      return null;\n    }\n\n    var LOCAL_ANNOTATION_DIV = 0;\n    var LOCAL_ANNOTATION_TYPE = 1;\n    function localAnnotation(stream, state) {\n      var sub = subState(state);\n      if (sub == LOCAL_ANNOTATION_DIV) {\n        if (stream.match(\"/\")) {\n          setSubState(state, LOCAL_ANNOTATION_TYPE)\n          return \"type_div\";\n        }\n        throw \"Internal Error\"\n      }\n      if (sub != LOCAL_ANNOTATION_TYPE) {\n        throw \"Internal Error\"\n      }\n      state.context.pop();\n      state.subState.pop();\n      if (stream.match(TYPE, false)) {\n        return tokenizeType(stream, state, true);\n      }\n      return null;\n    }\n\n    function tryPostfixMemberOrIdentifier(stream, state) {\n      return tryIdentifier(stream, state, true);\n    }\n\n    function tryIdentifier(stream, state, allowPrefixedDot) {\n      // If we allow a prefixed dot, consume it (but put it back if\n      // it's not followed by an identifier).\n      if (allowPrefixedDot && stream.match(\".\")) {\n        if (!stream.match(IDENTIFIER, false)) {\n          stream.backUp(1);\n          return null;\n        }\n        return \"dot\";\n      }\n      if (!stream.match(IDENTIFIER)) return null;\n      var id = stream.current();\n      if (isKeyword(id)) return \"keyword\";\n      if (isSpecialVar(id)) return \"special_var\";\n      if (isAtom(id)) return \"atom\";\n      if (id.match(CONSTANT_HEURISTIC)) return \"constant\";\n      if (id.match(TYPE_HEURISTIC)) return \"type\";\n      if (stream.match(/[ ]*:?:=/, false)) return \"declaration\";\n\n      if (stream.match(/[ ]*[/][ ]*[\\w_.]+[?]?[ ]*:?:=/, false)) {\n        state.context.push([localAnnotation, -1]);\n        state.subState.push(LOCAL_ANNOTATION_DIV);\n        return \"declaration\";\n      }\n      return \"identifier\";\n    }\n\n    function tryPrimitive(stream, state) {\n      if (stream.match(/#primitive(?!-\\w)\\b/)) {\n        return \"primitive\";\n      }\n      return null;\n    }\n\n    var TYPE_START = 0;\n    var TYPE_START_NULLABLE = 1;\n    var TYPE_AFTER_PREFIX = 2;\n    var TYPE_AFTER_PREFIX_NULLABLE = 3;\n    // Assumes that we are currently at an identifier, or a prefixed identifier.\n    // Colors the prefix as prefix, and the last identifier as type.\n    function tokenizeType(stream, state, allowNullable) {\n      if (!stream.match(TYPE, false)) {\n        throw \"INTERNAL ERROR\";\n      }\n      if (stream.match(/any(?!-\\w)\\b/) || stream.match(/none(?!-\\w)\\b/)) {\n        return \"type_special\";\n      }\n      if (stream.match(/int(?!-\\w)\\b\\??/) || stream.match(/float(?!-\\w)\\b\\??/) || stream.match(/bool(?!-\\w)\\b\\??/) || stream.match(/string(?!-\\w)\\b\\??/)) {\n        return \"type_short\";\n      }\n      state.context.push([tokenizeType2, -1]);\n      state.subState.push(allowNullable ? TYPE_START_NULLABLE : TYPE_START);\n      return tokenizeType2(stream, state);\n    }\n\n    function tokenizeType2(stream, state) {\n      var sub = subState(state);\n      if (sub == TYPE_START || sub == TYPE_START_NULLABLE) {\n        stream.match(TYPE);\n        var indexOfDot = stream.current().indexOf('.');\n        if (indexOfDot >= 0) {\n          // Backup.\n          setSubState(state, sub == TYPE_START ? TYPE_AFTER_PREFIX : TYPE_AFTER_PREFIX_NULLABLE);\n          stream.backUp(stream.current().length - indexOfDot);\n          return \"type_prefix\";\n        }\n        if (sub == TYPE_START_NULLABLE) stream.match(\"?\");\n        state.context.pop();\n        state.subState.pop();\n        return \"type_name\";\n      }\n      if (stream.match(\".\")) return \"type_dot\";\n      state.context.pop();\n      state.subState.pop();\n      stream.match(IDENTIFIER);\n      if (sub == TYPE_AFTER_PREFIX_NULLABLE) stream.match(\"?\");\n      return \"type_name\";\n    }\n\n    var IMPORT_AFTER_IMPORT = 0;\n    var IMPORT_AFTER_PATH = 1;\n    var IMPORT_AFTER_SHOW = 2;\n    var IMPORT_AFTER_AS = 3;\n    var IMPORT_ERROR = 4;\n    function tryImport(stream, state) {\n      if (stream.match(/import(?!-\\w)\\b/)) {\n        state.context.push([tokenizeImport, 2]);\n        state.subState.push(IMPORT_AFTER_IMPORT);\n        return \"keyword\"\n      }\n      return null;\n    }\n    function tokenizeImport(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      function importError() {\n        setSubState(state, IMPORT_ERROR);\n        stream.skipToEnd();\n        return \"error\";\n      }\n\n      switch (subState(state)) {\n        case IMPORT_AFTER_IMPORT:\n          if (!stream.match(/\\.*(\\.?[a-zA-Z_]\\w*)+/)) return importError();\n          setSubState(state, IMPORT_AFTER_PATH);\n          return \"import_path\";\n        case IMPORT_AFTER_PATH:\n          if (stream.match(/as(?!-\\w)\\b/)) {\n            setSubState(state, IMPORT_AFTER_AS);\n            return \"keyword\";\n          }\n          if (stream.match(/show(?!-\\w)\\b/)) {\n            setSubState(state, IMPORT_AFTER_SHOW);\n            return \"keyword\";\n          }\n          return importError();\n        case IMPORT_AFTER_AS:\n          if (!stream.match(IDENTIFIER)) return importError();\n          // Anything that follows is an error.\n          setSubState(state, IMPORT_ERROR);\n          return \"import_prefix_name\";\n        case IMPORT_AFTER_SHOW:\n          if (stream.match(\"*\")) {\n            setSubState(state, IMPORT_ERROR);\n            return \"import_star\";\n          }\n          if (!stream.match(IDENTIFIER)) return importError();\n          return \"import_show_identifier\";\n        case IMPORT_ERROR:\n        default:\n          stream.skipToEnd();\n          return \"import_error\";\n      }\n    }\n\n    var EXPORT_AFTER_EXPORT = 0;\n    var EXPORT_ERROR = 1;\n    function tryExport(stream, state) {\n      if (stream.match(/export(?!-\\w)\\b/)) {\n        state.context.push([tokenizeExport, 2]);\n        state.subState.push(EXPORT_AFTER_EXPORT);\n        return \"keyword\"\n      }\n      return null;\n    }\n    function tokenizeExport(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      switch (subState(state)) {\n        case EXPORT_AFTER_EXPORT:\n          if (stream.match(\"*\")) {\n            setSubState(state, EXPORT_ERROR);\n            return \"export_star\";\n          }\n          if (stream.match(IDENTIFIER)) {\n            return \"export_identifier\";\n          }\n          setSubState(state, EXPORT_ERROR);\n        // Fall through.\n        case EXPORT_ERROR:\n        default:\n          stream.skipToEnd();\n          return \"export_error\";\n      }\n    }\n\n    var CLASS_SIGNATURE_AFTER_CLASS = 0;\n    var CLASS_SIGNATURE_AFTER_NAME = 1;\n    var CLASS_SIGNATURE_AFTER_EXTENDS = 2;\n    var CLASS_SIGNATURE_AFTER_EXTENDS_TYPE = 3\n    var CLASS_SIGNATURE_AFTER_WITH = 4\n    var CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME = 5;\n    var CLASS_SIGNATURE_AFTER_IMPLEMENTS = 6;\n    var CLASS_SIGNATURE_AFTER_FIRST_IMPLEMENTS_NAME = 7;\n    var CLASS_BODY = 8;\n    function tryClass(stream, state) {\n      if (stream.match(/(abstract[ ]+)?class(?!-\\w)\\b/) || stream.match(/interface(?!-\\w)\\b/) || stream.match(/mixin(?!-\\w)\\b/) || stream.match(/monitor(?!-\\w)\\b/)) {\n        state.context.push([tokenizeClass, 2]);\n        state.subState.push(CLASS_SIGNATURE_AFTER_CLASS);\n        return \"keyword\"\n      }\n      return null;\n    }\n\n    function tokenizeClassError(stream, state) {\n      // This function will be popped by indentation.\n      stream.skipToEnd();\n      return \"class_error\";\n    }\n\n    function tokenizeClass(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      function signatureError() {\n        setSubState(state, CLASS_BODY); // Once the error function is popped.\n        // Eat everything until we are back to 2-indentation.\n        state.context.push([tokenizeClassError, 4]);\n        state.subState.push(null)\n        return tokenizeClassError(stream, state);\n      }\n\n      switch (subState(state)) {\n        case CLASS_SIGNATURE_AFTER_CLASS:\n          if (!stream.match(IDENTIFIER)) return signatureError();\n          setSubState(state, CLASS_SIGNATURE_AFTER_NAME);\n          return \"class_name\";\n\n        case CLASS_SIGNATURE_AFTER_NAME:\n          if (stream.match(/extends(?!-\\w)\\b/)) {\n            setSubState(state, CLASS_SIGNATURE_AFTER_EXTENDS);\n            return \"keyword\";\n          }\n          // Fall through.\n\n        case CLASS_SIGNATURE_AFTER_EXTENDS_TYPE:\n          if (stream.match(/with(?!-\\w)\\b/)) {\n            setSubState(state, CLASS_SIGNATURE_AFTER_WITH);\n            return \"keyword\";\n          }\n          if (stream.match(/implements(?!-\\w)\\b/)) {\n            setSubState(state, CLASS_SIGNATURE_AFTER_IMPLEMENTS);\n            return \"keyword\";\n          }\n          if (stream.match(\":\")) {\n            setSubState(state, CLASS_BODY);\n            return \"class_body_colon\";\n          }\n          return signatureError();\n\n        case CLASS_SIGNATURE_AFTER_EXTENDS:\n          if (!stream.match(TYPE, false)) return signatureError();\n          setSubState(state, CLASS_SIGNATURE_AFTER_EXTENDS_TYPE);\n          return tokenizeType(stream, state, false);\n\n        case CLASS_SIGNATURE_AFTER_WITH:\n        case CLASS_SIGNATURE_AFTER_IMPLEMENTS:\n          // The first *requires* an type.\n          if (!stream.match(TYPE, false)) return signatureError();\n          const nextSubState = subState(state) == CLASS_SIGNATURE_AFTER_WITH\n              ? CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME\n              : CLASS_SIGNATURE_AFTER_FIRST_IMPLEMENTS_NAME;\n          setSubState(state, nextSubState);\n          return tokenizeType(stream, state, false);\n\n        case CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME:\n        case CLASS_SIGNATURE_AFTER_FIRST_IMPLEMENTS_NAME:\n          if (stream.match(TYPE, false)) {\n            return tokenizeType(stream, state, false);\n          }\n          if (stream.match(\":\")) {\n            setSubState(state, CLASS_BODY);\n            return \"class_body_colon\";\n          }\n          if (subState(state) == CLASS_SIGNATURE_AFTER_FIRST_WITH_NAME) {\n            if (stream.match(/implements(?!-\\w)\\b/)) {\n              setSubState(state, CLASS_SIGNATURE_AFTER_IMPLEMENTS);\n              return \"keyword\";\n            }\n          }\n          return signatureError();\n\n        case CLASS_BODY:\n          state.context.push([tokenizeMemberDeclaration, 4]);\n          state.subState.push(MEMBER_DECLARATION_START);\n          return tokenizeMemberDeclaration(stream, state);\n\n        default:\n          stream.skipToEnd();\n          return \"unformatted\";\n      }\n    }\n\n    var MEMBER_DECLARATION_START = 0;\n    var MEMBER_DECLARATION_AFTER_STATIC_ABSTRACT = 1;\n    var MEMBER_DECLARATION_AFTER_OPERATOR = 2;\n    var MEMBER_DECLARATION_AFTER_NAMED_CONSTRUCTOR = 3;\n    function tokenizeMemberDeclaration(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      if (subState(state) == MEMBER_DECLARATION_START) {\n        if (stream.match(/abstract(?!-\\w)\\b/) || stream.match(/static(?!-\\w)\\b/)) {\n          setSubState(state, MEMBER_DECLARATION_AFTER_STATIC_ABSTRACT);\n          return \"keyword\";\n        }\n        if (stream.match(/operator(?!-\\w)\\b/)) {\n          setSubState(state, MEMBER_DECLARATION_AFTER_OPERATOR);\n          return \"keyword\";\n        }\n        if (stream.match(/constructor(?!-\\w)\\b/)) {\n          if (stream.match(/\\.[a-zA-Z_]\\w*/, false)) {\n            setSubState(state, MEMBER_DECLARATION_AFTER_NAMED_CONSTRUCTOR);\n          } else {\n            state.context.push([tokenizeFunctionBody, 4]);\n            state.subState.push(null);\n            state.context.push([tokenizeFunctionSignature, 6]);\n            state.subState.push(null);\n          }\n          return \"constructor_keyword\"\n        }\n      } else if (subState(state) == MEMBER_DECLARATION_AFTER_NAMED_CONSTRUCTOR) {\n        stream.match(/\\.[a-zA-Z_]\\w*/);\n        state.context.push([tokenizeFunctionBody, 4]);\n        state.subState.push(null);\n        state.context.push([tokenizeFunctionSignature, 6]);\n        state.subState.push(null);\n        return \"member_named_constructor\"\n      }\n\n      var currentSubState = subState(state);\n\n      // Even if things go wrong, assume that we are going to parse the rest of\n      // the signature first, followed by the body.\n      // If we find a `:` we will pop the signature by hand.\n      state.context.push([tokenizeFunctionBody, 4]);\n      state.subState.push(null);\n      state.context.push([tokenizeFunctionSignature, 6]);\n      state.subState.push(null);\n      if (currentSubState == MEMBER_DECLARATION_AFTER_OPERATOR && stream.match(OVERRIDABLE_OPERATOR)) {\n        return \"member_operator_name\"\n      } else if (stream.match(IDENTIFIER)) {\n        if (isReserved(stream.current())) {\n          return \"member_name_error\";\n        }\n        if (stream.match(\".\")) {\n          if (stream.match(IDENTIFIER)) {\n            if (subState(state) == MEMBER_DECLARATION_AFTER_STATIC_ABSTRACT) {\n              return \"member_name_error\";\n            }\n            return \"named_constructor\";\n          }\n          return \"member_name_error\";\n        } else if (stream.match(\"=\")) {\n          return \"member_name_setter\";\n        } else {\n          return \"member_name\";\n        }\n      }\n      stream.eatWhile(/[^ ]/); // Skip to the next whitespace.\n      return \"member_name_error\";\n    }\n\n    function tokenizeFunctionBody(stream, state) {\n      var matched_result = tryExpression(stream, state);\n      if (matched_result) return matched_result;\n\n      stream.eatWhile(/[^ ]/);\n      return \"unformatted\";\n    }\n\n    function tryDefaultValue(stream, state) {\n      var expression_result = tryNumber(stream, state) ||\n        tryString(stream, state) ||\n        tryChar(stream, state) ||\n        tryDelimited(stream, state);\n      if (expression_result) return expression_result;\n      var identifier_result = tryIdentifier(stream, state);\n      if (identifier_result) {\n        var lastIndentation = last(state.context)[1];\n        state.context.push([tokenizeDefaultValueContinuation, lastIndentation]);\n        state.subState.push(DEFAULT_VALUE_AFTER_IDENTIFIER);\n        return identifier_result;\n      }\n      return null;\n    }\n\n    var DEFAULT_VALUE_AFTER_IDENTIFIER = 0;\n    var DEFAULT_VALUE_AFTER_DOT = 1;\n    function tokenizeDefaultValueContinuation(stream, state) {\n      switch (subState(state)) {\n        case DEFAULT_VALUE_AFTER_IDENTIFIER:\n          if (stream.match(\".\")) {\n            if (stream.match(IDENTIFIER, false)) {\n              setSubState(state, DEFAULT_VALUE_AFTER_DOT);\n              return \"dot\";\n            }\n            state.context.pop();\n            state.subState.pop();\n            return \"default_value_dot_error\";\n          }\n          if (stream.peek() == '[') {\n            setSubState(state, DEFAULT_VALUE_AFTER_IDENTIFIER);  // When we return;\n            return tryDelimited(stream, state);\n          }\n          // Not part of the default value anymore.\n          state.context.pop();\n          state.subState.pop();\n          return last(state.context)[0](stream, state);\n\n        case DEFAULT_VALUE_AFTER_DOT:\n          setSubState(state, DEFAULT_VALUE_AFTER_IDENTIFIER);\n          return tryIdentifier(stream, state);\n      }\n    }\n\n    var SIGNATURE_EXPECTING_DEFAULT_VALUE = 0;\n    var SIGNATURE_EXPECTING_TYPE = 1;\n    var SIGNATURE_AFTER_BRACKET_BLOCK = 2;\n    function tokenizeFunctionSignature(stream, state) {\n      var comment_result = tryComments(stream, state);\n      if (comment_result) return comment_result;\n\n      function error(kind) {\n        if (!result) {\n          stream.eatWhile(/[^ ]/); // Skip to the next whitespace.\n          result = kind || \"parameter_error\";\n        }\n      }\n\n      if (stream.match(\"::=\") || stream.match(\":=\")) {\n        state.context.pop();\n        state.subState.pop();\n        return \"field_assig\";\n      }\n      if (stream.match(\":\")) {\n        state.context.pop();\n        state.subState.pop();\n        return \"function_colon\";\n      }\n\n      switch (subState(state)) {\n        case SIGNATURE_EXPECTING_DEFAULT_VALUE:\n          setSubState(state, null);  // For when the sub-expression returns.\n          // TODO: tokenize default values.\n          var result = tryDefaultValue(stream, state);\n          if (!result) return error(\"default_value_error\");\n          return result;\n        case SIGNATURE_EXPECTING_TYPE:\n          setSubState(state, null);\n          if (!stream.match(TYPE, false)) return error();\n          return tokenizeType(stream, state, true);\n\n        default:\n        // Continue after the `switch`.\n      }\n      if (stream.match(\"/\")) {\n        setSubState(state, SIGNATURE_EXPECTING_TYPE);\n        return \"type_div\";\n      }\n      if (stream.match(\"->\")) {\n        setSubState(state, SIGNATURE_EXPECTING_TYPE);\n        return \"type_return\";\n      }\n      if (stream.match(\"=\")) {\n        setSubState(state, SIGNATURE_EXPECTING_DEFAULT_VALUE);\n        return \"default_equals\"\n      }\n      if (stream.match(\"[\")) {\n        setSubState(state, SIGNATURE_AFTER_BRACKET_BLOCK);\n        return \"bracket_block_open\";\n      }\n      if (stream.match(\"]\")) {\n        setSubState(state, null);\n        return \"bracket_block_close\";\n      }\n      var isNamed = false;\n      if (stream.match(\"--\")) {\n        isNamed = true;\n      }\n      var isSetting = false;\n      if (stream.match(\".\")) {\n        // Setting parameter.\n        isSetting = true;\n      }\n      var prefix = stream.current();\n      if (!stream.match(IDENTIFIER)) return error();\n      var name = stream.current().slice(prefix.length);\n      if (name == \"this\") {\n        if (isSetting || !stream.match(\".\") || !stream.match(IDENTIFIER)) {\n          return error();\n        }\n        name = stream.current().slice((name + \".\").length);\n        if (isReserved(name)) return error();\n        return \"parameter\";\n      }\n      if (isReserved(stream.current().slice(prefix.length))) {\n        return error();\n      }\n      if (isNamed) {\n        return \"named_parameter\";\n      } else {\n        return \"parameter\";\n      }\n    }\n\n    function tryToplevelDeclaration(stream, state) {\n      if (stream.match(IDENTIFIER)) {\n        state.context.push([tokenizeFunctionBody, 2]);\n        state.subState.push(null);\n        state.context.push([tokenizeFunctionSignature, 4]);\n        state.subState.push(null);\n        if (isReserved(stream.current())) {\n          return \"toplevel_name_error\";\n        }\n        if (stream.match(\"=\")) {\n          return \"toplevel_name_setter\";\n        }\n        if (stream.current().match(CONSTANT_HEURISTIC)) {\n          return \"toplevel_constant\";\n        }\n        return \"toplevel_name\";\n      }\n      return null;\n    }\n\n    // For code snippets that have an indent on the very first\n    // line we assume that we are implicitly inside a function\n    // like \"main\".\n    function tryImpliedTopLevelFunction(stream, state) {\n      if (state.startOfLine && stream.indentation() == 2) {\n        state.context.push([tokenizeFunctionBody, 2]);\n        state.subState.push(null);\n        return \"null\";\n      }\n      return null;\n    }\n\n\n    function tokenizeError(stream, state) {\n      // We could try to be more aggressive (like trying to highlight numbers,\n      // strings, ...), but the most important thing is that we make progress.\n      stream.skipToEnd();\n      return \"error\";\n    }\n\n    function tryExpression(stream, state) {\n      return tryComments(stream, state) ||\n        tryNumber(stream, state) ||\n        tryChar(stream, state) ||\n        tryNamedArgument(stream, state) ||\n        tryOperator(stream, state) ||\n        tryString(stream, state) ||\n        tryIsAs(stream, state) ||\n        // In theory we need to check whether the postfix member is\n        // prefixed by another expression but for the syntax highlighter we\n        // just assume that was the case.\n        tryPostfixMemberOrIdentifier(stream, state) ||\n        tryIdentifier(stream, state) ||\n        tryPrimitive(stream, state) ||\n        tryDelimited(stream, state) ||\n        tryControl(stream, state);\n    }\n\n    function tokenizeTopLevel(stream, state) {\n      return tryComments(stream, state) ||\n        tryImport(stream, state) ||\n        tryExport(stream, state) ||\n        tryClass(stream, state) ||\n        tryImpliedTopLevelFunction(stream, state) ||\n        tryToplevelDeclaration(stream, state) ||\n        tokenizeError(stream, state);\n    }\n\n    return {\n      startState: function (basecolumn) {\n        return {\n          startOfLine: true,\n          readNonWhitespace: false,\n          // If the last parsed token was a `:` stores the indentation at that point.\n          // Is reset every time we parse a non-whitespace token.\n          // Used for indentation.\n          atColonIndentation: -1,\n          context: [[tokenizeTopLevel, -1]],\n          subState: [null]\n        };\n      },\n\n      token: function (stream, state) {\n        if (stream.sol()) {\n          state.startOfLine = true;\n          state.readNonWhitespace = false;\n        } else if (state.readNonWhitespace) {\n          state.startOfLine = false;\n        }\n        if (stream.eatSpace()) return null;\n        if (stream.peek() == \":\") {\n          state.atColonIndentation = stream.indentation();\n        } else {\n          state.atColonIndentation = -1;\n        }\n        // Next time we aren't at the beginning of the line anymore.\n        state.readNonWhitespace = true;\n\n        if (state.startOfLine) {\n          // Drop contexts if there is a dedent.\n          while (last(state.context)[1] > stream.indentation()) {\n            state.context.pop();\n            state.subState.pop();\n          }\n        }\n\n        var tokenizer = last(state.context)[0];\n        var result = tokenizer(stream, state);\n        if (!result) return result;\n        // We have a more nuanced parsing, allowing for better highlighting\n        // (once that's supported, or if there is a better style).\n        // Simplify here, so that the standard CSS works.\n\n        // CodeMirror highlighting styles:\n        //  - meta\n        //  - keyword\n        //  - atom\n        //  - number\n        //  - def\n        //  - variable, variable-2, variable-3\n        //  - type\n        //  - property\n        //  - operator\n        //  - comment\n        //  - string, string-2\n        //  - qualifier\n        //  - builtin\n        //  - bracket\n        //  - tag\n        //  - attribute\n        //  - link\n        //  - error\n\n        switch (result) {\n          case \"unformatted\":\n          case \"import_path\":\n          case \"export_identifier\":\n            result = null;\n            break;\n\n          case \"type_special\":\n          case \"keyword\":\n          case \"is_as\":\n          case \"constructor_keyword\":\n          case \"control\":\n            result = \"keyword\";\n            break;\n\n          case \"atom\":\n          case \"constant\":\n          case \"toplevel_constant\":\n            result = \"atom\";\n            break;\n\n          case \"float\":\n          case \"hex_float\":\n          case \"integer\":\n          case \"hex\":\n          case \"binary\":\n            result = \"number\";\n            break;\n\n          case \"member_name\":\n          case \"member_name_setter\":\n          case \"member_named_constructor\":\n          case \"declaration\":\n          case \"toplevel_name\":\n          case \"toplevel_name_setter\":\n          case \"class_name\":\n          case \"member_operator_name\":\n              result = \"def\";\n            break;\n\n          case \"import_show_identifier\":\n          case \"named_constructor\":\n          case \"named_parameter\":\n          case \"parameter\":\n            result = \"variable\";\n            break;\n\n          case \"identifier\":\n            result = \"variable-2\";\n            break;\n\n          case \"type\":\n          case \"type_name\":\n          case \"type_short\":\n            result = \"type\";\n            break;\n\n          case \"import_star\":\n          case \"export_star\":\n          case \"type_dot\":\n          case \"default_equals\":\n          case \"function_colon\":\n          case \"field_assig\": // Also for globals.\n          case \"type_div\":\n          case \"type_return\":\n          case \"class_body_colon\":\n          case \"dot\":\n          case \"string_dollar\":\n          case \"colon\":\n          case \"relational\":\n          case \"op_assig\":\n          case \"overridable_op\":\n          case \"op_slice\":\n          case \"assig\":\n          case \"define\":\n          case \"separator\":\n            result = \"operator\";\n            break;\n\n          case \"singleline_string\":\n          case \"multiline_string\":\n          case \"character\":\n            result = \"string\";\n            break;\n\n          case \"unfinished_string\":\n          case \"missing_escape_expression\":\n          case \"unfinished_character\":\n            result = \"string error\";\n            break;\n\n          case \"string_format\":\n          case \"named_argument\":\n          case \"import_prefix_name\":\n          case \"type_prefix\":\n            result = \"qualifier\";\n            break;\n\n          case \"special_var\":\n          case \"primitive\":\n            result = \"builtin\";\n            break;\n\n          case \"bracket_block_open\":\n          case \"bracket_block_close\":\n          case \"paren\":\n          case \"bracket\":\n            result = \"bracket\";\n            break;\n\n          case \"import_error\":\n          case \"export_error\":\n          case \"class_error\":\n          case \"member_name_error\":\n          case \"parameter_error\":\n          case \"default_value_error\":\n          case \"toplevel_name_error\":\n          case \"default_value_dot_error\":\n          case \"is_as_error\":\n            result = \"error\"; // Might want to just not color.\n            break;\n\n          default:\n            /* do nothing. */\n            break;\n        }\n        return result;\n      },\n\n      indent: function (state, textAfter) {\n        if (state.atColonIndentation == -1) return CodeMirror.Pass;\n        // We don't use `config.indentUnit`. Toit is 2 chars.\n        return state.atColonIndentation + 2;\n      },\n\n      closeBrackets: { triples: \"\\\"\" },\n      lineComment: \"//\",\n      blockCommentStart: \"/*\",\n      blockCommentEnd: \"*/\",\n      fold: \"indent\",\n    };\n  });\n\n  CodeMirror.defineMIME(\"text/x-toit\", \"toit\");\n\n});\n","import { createMuiTheme } from \"@material-ui/core\";\n\nconst layout = {\n  sidebarWidth: \"18rem\",\n  headerHeight: 64,\n  footerHeight: \"6rem\",\n};\n\nexport const theme = createMuiTheme({\n  layout: layout,\n  palette: {\n    type: \"light\",\n    background: {\n      paper: \"#fff\",\n      default: \"#fff\",\n    },\n    text: {\n      primary: \"#000\",\n    },\n    primary: {\n      main: \"#5E6FDB\",\n    },\n    secondary: {\n      main: \"#55A398\",\n    },\n  },\n  typography: {\n    fontFamily: \"Roboto, Helvetica, sans-serif\",\n    body1: {},\n    body2: {\n      fontSize: \"0.80rem\",\n    },\n    h1: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"4.0rem\",\n    },\n    h2: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"3.0rem\",\n    },\n    h3: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"2.0rem\",\n    },\n    h4: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"1.5rem\",\n    },\n    h5: {\n      fontFamily: \"ClashDisplay\",\n      fontSize: \"1.125rem\",\n    },\n    h6: {\n      fontSize: \"1rem\",\n      fontWeight: \"bold\",\n    },\n  },\n});\n\nexport const sideBarTheme = createMuiTheme({\n  layout: layout,\n  palette: {\n    type: \"dark\",\n    background: {\n      paper: \"#000\",\n      default: \"#000\",\n    },\n    text: {\n      primary: \"#fff\",\n    },\n    primary: {\n      main: \"#FAC864\",\n    },\n    secondary: {\n      main: \"#5E6FDB\",\n    },\n  },\n  typography: {\n    fontFamily: \"Roboto, Helvetica, sans-serif\",\n    body1: {},\n    body2: {\n      fontSize: \"0.80rem\",\n    },\n  },\n});\n\n/**\n * Since material-ui lengths can be defined as numbers (pixels) we need to\n * convert them sometimes.\n *\n * I've searched in the material-ui code for about an hour, since there must be\n * a util there, but I couldn't find it.\n */\nexport function length(length: number | string): string {\n  return typeof length === \"string\" ? length : `${length}px`;\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  Grid,\n  StyleRules,\n  Theme,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React, { ErrorInfo } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    grid: {\n      margin: theme.spacing(3),\n    },\n  });\n\ninterface ErrorBoundaryProps extends WithStyles<typeof styles> {\n  children: React.ReactNode;\n}\n\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps> {\n  state = {\n    hasError: false,\n  };\n\n  componentDidCatch(error: Error, info: ErrorInfo): void {\n    // Display fallback UI\n    this.setState({ hasError: true });\n  }\n\n  render(): JSX.Element {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      console.log(\"ERROR: In the object \");\n      return (\n        <Grid item className={this.props.classes.grid}>\n          <h1>Something went wrong.</h1>\n          <Link to={`/#`}>Home Page</Link>\n        </Grid>\n      );\n    } else {\n      return <>{this.props.children}</>;\n    }\n  }\n}\n\nexport default withStyles(styles)(ErrorBoundary);\n","import {\n  Box,\n  createStyles,\n  InputBase,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport React, { memo } from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    search: {\n      padding: \"2px 4px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      flex: 1,\n    },\n    input: {\n      marginLeft: theme.spacing(1),\n      flex: 1,\n    },\n    clearIcon: {\n      marginRight: theme.spacing(2),\n      cursor: \"pointer\",\n    },\n  })\n);\n\ninterface SearchBarProps {\n  searchBy: string;\n  onSearch: (searchString: string) => void;\n  onFocus?: () => void;\n}\n\nfunction SearchBar(props: SearchBarProps): JSX.Element {\n  const handleSearchStringChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ): void => {\n    props.onSearch(event.target.value);\n  };\n\n  const resetSearchString = (): void => {\n    if (props.searchBy) {\n      props.onSearch(\"\");\n    }\n  };\n\n  const classes = useStyles();\n\n  return (\n    <>\n      <Box\n        className={classes.search}\n        border={1}\n        borderLeft={0}\n        borderTop={0}\n        borderRight={0}\n      >\n        <SearchIcon />\n        <InputBase\n          className={classes.input}\n          placeholder=\"Search\"\n          inputProps={{ \"aria-label\": \"search devices\" }}\n          onChange={handleSearchStringChange}\n          value={props.searchBy}\n          onClick={(): void => {\n            if (props.onFocus) {\n              props.onFocus();\n            }\n          }}\n        />\n        <ClearIcon\n          fontSize=\"small\"\n          className={classes.clearIcon}\n          onClick={resetSearchString}\n        />\n      </Box>\n    </>\n  );\n}\n\nexport default memo(SearchBar);\n","import {\n  List,\n  ListItem,\n  makeStyles,\n  Paper,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport {\n  Searchable,\n  SearchableClass,\n  SearchableFunction,\n  SearchableInterface,\n  SearchableLibrary,\n  SearchableMethod,\n} from \"../../model/search\";\nimport { SEARCH_BAR_WIDTH, SEARCH_RESULTS_WIDTH } from \"./SearchView\";\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: \"fixed\",\n    width: SEARCH_RESULTS_WIDTH,\n    maxHeight: 500,\n    overflow: \"auto\",\n    marginTop: 2,\n    marginLeft: SEARCH_BAR_WIDTH - SEARCH_RESULTS_WIDTH,\n  },\n  listItem: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    flexDirection: \"column\",\n  },\n  text: {\n    display: \"inline\",\n    color: theme.palette.secondary.main,\n  },\n  emphText: {\n    display: \"inline\",\n    color: theme.palette.primary.dark,\n  },\n}));\n\ninterface SearchResultsProps {\n  results: Searchable[];\n  hideResults: boolean;\n}\n\nexport default function SearchResults(props: SearchResultsProps): JSX.Element {\n  const classes = useStyles();\n\n  const results = props.results.map((item, index) => (\n    <ResultItem item={item} key={\"resultItem\" + index} />\n  ));\n\n  return (\n    <>\n      {!props.hideResults && results.length > 0 && (\n        <Paper className={classes.root} square>\n          <List>{results}</List>\n        </Paper>\n      )}\n    </>\n  );\n}\n\nfunction ResultItem(props: { item: Searchable }): JSX.Element {\n  const classes = useStyles();\n\n  let name = \"\";\n  let from = \"\";\n\n  switch (props.item.type) {\n    case \"library\": {\n      const item = props.item as SearchableLibrary;\n      name = item.name;\n      from = item.ref.path.join(\".\");\n      break;\n    }\n    case \"interface\": {\n      const item = props.item as SearchableInterface;\n      name = item.name;\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"mixin\": {\n      const item = props.item as SearchableInterface;\n      name = item.name;\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"class\": {\n      const item = props.item as SearchableClass;\n      name = item.name;\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"function\": {\n      const item = props.item as SearchableFunction;\n      name = item.name + \" \" + item.parameters + \" \";\n      from = item.ref.libraryRef.path.join(\".\");\n      break;\n    }\n    case \"method\": {\n      const item = props.item as SearchableMethod;\n      name = item.name + \" \" + item.parameters + \" \";\n      from =\n        item.className + \" in \" + item.ref.classRef.libraryRef.path.join(\".\");\n      break;\n    }\n  }\n\n  return (\n    <ListItem\n      button\n      component=\"a\"\n      href={\".\" + props.item.url}\n      className={classes.listItem}\n    >\n      <div>\n        <Typography className={classes.text}>{name} </Typography>\n        <Typography className={classes.emphText}>{props.item.type}</Typography>\n      </div>\n      {from && (\n        <div>\n          <Typography variant=\"body2\" className={classes.emphText}>\n            from {from}\n          </Typography>\n        </div>\n      )}\n    </ListItem>\n  );\n}\n","import {\n  ClickAwayListener,\n  createStyles,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport Fuse from \"fuse.js\";\nimport React from \"react\";\nimport {\n  SearchableClass,\n  SearchableFunction,\n  SearchableInterface,\n  SearchableLibrary,\n  SearchableMethod,\n  SearchableMixin,\n  SearchableModel,\n} from \"../../model/search\";\nimport SearchBar from \"./SearchBar\";\nimport SearchResults from \"./SearchResults\";\n\nexport const SEARCH_BAR_WIDTH = 300;\nexport const SEARCH_RESULTS_WIDTH = 400;\n\nconst styles = createStyles({\n  searchBar: {\n    width: SEARCH_BAR_WIDTH,\n    marginLeft: \"auto\",\n  },\n});\n\nexport interface SearchProps extends WithStyles<typeof styles> {\n  model: SearchableModel;\n}\n\ninterface SearchState {\n  searchBy: string;\n  libraries: SearchableLibrary[];\n  classes: SearchableClass[];\n  interfaces: SearchableInterface[];\n  mixins: SearchableMixin[];\n  functions: SearchableFunction[];\n  methods: SearchableMethod[];\n  hideResults: boolean;\n}\n\nlet delayTimer: number;\n\nclass SearchView extends React.Component<SearchProps, SearchState> {\n  state = {\n    searchBy: \"\",\n    libraries: [],\n    classes: [],\n    interfaces: [],\n    mixins: [],\n    functions: [],\n    methods: [],\n    hideResults: false,\n  };\n\n  search<T extends { name: string }>(\n    searchIn: T[],\n    searchBy: string\n  ): Fuse.FuseResult<T>[] {\n    const options = {\n      keys: [\"name\"],\n      threshold: 0.01,\n      distance: 10000000,\n    };\n    return new Fuse(searchIn, options).search(searchBy);\n  }\n\n  onSearch = (searchString: string): void => {\n    this.setState({ searchBy: searchString });\n\n    clearTimeout(delayTimer);\n    delayTimer = window.setTimeout(\n      () => {\n        let libraries = [] as SearchableLibrary[];\n        let classes = [] as SearchableClass[];\n        let interfaces = [] as SearchableInterface[];\n        let mixins = [] as SearchableMixin[];\n        let functions = [] as SearchableFunction[];\n        let methods = [] as SearchableMethod[];\n\n        if (searchString && searchString.length > 1) {\n          libraries = this.search(this.props.model.libraries, searchString).map(\n            (m) => m.item\n          );\n          interfaces = this.search(\n            this.props.model.interfaces,\n            searchString\n          ).map((inter) => inter.item);\n          mixins = this.search(this.props.model.mixins, searchString).map(\n            (mixin) => mixin.item\n          );\n          classes = this.search(this.props.model.classes, searchString).map(\n            (c) => c.item\n          );\n          functions = this.search(this.props.model.functions, searchString).map(\n            (f) => f.item\n          );\n          methods = this.search(this.props.model.methods, searchString).map(\n            (m) => m.item\n          );\n        }\n\n        this.setState({\n          searchBy: searchString,\n          libraries: libraries,\n          interfaces: interfaces,\n          classes: classes,\n          mixins: mixins,\n          functions: functions,\n          methods: methods,\n        });\n      },\n      searchString ? 200 : 0\n    );\n  };\n\n  onFocus = (): void => {\n    this.setState({ hideResults: false });\n  };\n\n  onClickAway = (): void => {\n    this.setState({ hideResults: true });\n  };\n\n  render(): JSX.Element {\n    return (\n      <ClickAwayListener onClickAway={this.onClickAway}>\n        <div className={this.props.classes.searchBar}>\n          <SearchBar\n            searchBy={this.state.searchBy}\n            onSearch={this.onSearch}\n            onFocus={this.onFocus}\n          />\n          <SearchResults\n            results={[\n              ...this.state.classes,\n              ...this.state.interfaces,\n              ...this.state.functions,\n              ...this.state.methods,\n              ...this.state.libraries,\n            ]}\n            hideResults={this.state.hideResults}\n          />\n        </div>\n      </ClickAwayListener>\n    );\n  }\n}\n\nexport default withStyles(styles)(SearchView);\n","import { connect } from \"react-redux\";\nimport SearchView, { SearchProps } from \"../../components/header/SearchView\";\nimport { RootState } from \"../../redux/doc\";\n\nconst mapStateToProps = (state: RootState): Pick<SearchProps, \"model\"> => {\n  return {\n    model: state.doc.searchableModel || {\n      libraries: [],\n      classes: [],\n      interfaces: [],\n      mixins: [],\n      functions: [],\n      methods: [],\n    },\n  };\n};\n\nexport default connect(mapStateToProps)(SearchView);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport styled from \"@emotion/styled\";\nimport { AppBar } from \"@material-ui/core\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport React from \"react\";\nimport { length } from \"../../assets/theme\";\nimport Search from \"../../containers/header/Search\";\n\nconst StyledAppBar = styled(AppBar)`\n  height: ${({ theme }) => theme.layout.headerHeight};\n  left: ${({ theme }) => theme.layout.sidebarWidth};\n  width: calc(100% - ${({ theme }) => length(theme.layout.sidebarWidth)});\n  border-bottom: 1px solid black;\n  background: rgba(255, 255, 255, 0.6);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n`;\n\nexport function HeaderBar(): JSX.Element {\n  return (\n    <StyledAppBar color=\"default\" position=\"fixed\" elevation={0}>\n      <Toolbar>\n        <Search />\n      </Toolbar>\n    </StyledAppBar>\n  );\n}\n\nexport default HeaderBar;\n","import {\n  Class,\n  Function,\n  Libraries,\n  Library,\n  Method,\n  Shape,\n} from \"../model/model\";\nimport {\n  ClassMemberRef,\n  LinkRef,\n  TopLevelItemRef,\n  TopLevelRef,\n} from \"../model/reference\";\n\nexport function libraryFrom(\n  libraryName: string,\n  rootLibraries: Libraries\n): Library | undefined {\n  const path = libraryName.split(\"/\");\n  let library = undefined;\n  let libraries = rootLibraries;\n\n  for (const p of path) {\n    library = libraries[p];\n    if (!library) {\n      break;\n    }\n    libraries = library.libraries;\n  }\n  return library;\n}\n\nexport function classFrom(\n  libraryName: string,\n  className: string,\n  rootLibraries: Libraries\n): Class | undefined {\n  const library = libraryFrom(libraryName, rootLibraries);\n  return (\n    library?.classes[className] ||\n    library?.exportedClasses[className] ||\n    library?.interfaces[className] ||\n    library?.exportedInterfaces[className] ||\n    library?.mixins[className] ||\n    library?.exportedMixins[className]\n  );\n}\n\nexport function libraryFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelRef\n): Library | undefined {\n  return libraryFrom(ref.path.join(\"/\"), rootLibraries);\n}\n\nexport function classFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelItemRef\n): Class | undefined {\n  const library = libraryFromRef(rootLibraries, ref.libraryRef);\n  if (!library || ref.offset === undefined) {\n    return undefined;\n  }\n\n  return (\n    Object.values(library.classes)[ref.offset] ||\n    Object.values(library.exportedClasses)[ref.offset] ||\n    Object.values(library.interfaces)[ref.offset] ||\n    Object.values(library.exportedInterfaces)[ref.offset] ||\n    Object.values(library.mixins)[ref.offset] ||\n    Object.values(library.exportedMixins)[ref.offset]\n  );\n}\n\nexport function functionFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelItemRef\n): Function | undefined {\n  const library = libraryFromRef(rootLibraries, ref.libraryRef);\n  if (!library || ref.offset === undefined) {\n    return undefined;\n  }\n\n  return library.functions[ref.offset] || library.exportedFunctions[ref.offset];\n}\n\nexport function methodFromRef(\n  rootLibraries: Libraries,\n  ref: ClassMemberRef\n): Method | undefined {\n  const klass = classFromRef(rootLibraries, ref.classRef);\n  if (!klass || ref.offset === undefined) {\n    return undefined;\n  }\n  return klass.methods[ref.offset] || klass.statics[ref.offset];\n}\n\n// URL related functions\n\nexport function getFunctionId(functionName: string, shape?: Shape): string {\n  if (!shape) {\n    return \"\";\n  }\n  const shapeString = `${shape.arity},${shape.totalBlockCount},${\n    shape.namedBlockCount\n  },${shape.names.join(\",\")}`;\n  return encodeURIComponent(functionName + \"(\" + shapeString + \")\");\n}\n\nexport function getFieldId(fieldName: string): string {\n  return fieldName;\n}\n\nfunction libraryUrl(baseUrl: string, path: string[]): string {\n  return baseUrl + \"/\" + path.join(\"/\") + \"/library-summary\";\n}\n\nfunction classUrl(baseUrl: string, path: string[], name: string): string {\n  return baseUrl + \"/\" + path.join(\"/\") + \"/class-\" + name;\n}\n\nfunction memberUrl(classUrl: string, id: string): string {\n  return classUrl + \"#\" + id;\n}\n\nfunction globalUrl(libraryUrl: string, id: string): string {\n  return libraryUrl + \"#\" + id;\n}\n\nexport function topLevelRefToId(ref: TopLevelRef): string {\n  return ref.name + \"-\" + ref.path.join(\"/\");\n}\n\nexport function classUrlFromRef(ref: TopLevelItemRef): string {\n  return classUrl(ref.libraryRef.baseUrl, ref.libraryRef.path, ref.name);\n}\n\nexport function libraryUrlFromRef(ref: TopLevelRef): string {\n  return libraryUrl(ref.baseUrl, ref.path);\n}\n\nexport function functionUrlFromRef(\n  rootLibraries: Libraries,\n  ref: TopLevelItemRef\n): string {\n  const fhunction = functionFromRef(rootLibraries, ref);\n  if (!fhunction) {\n    return \"/\";\n  }\n  return globalUrl(\n    libraryUrlFromRef(ref.libraryRef),\n    getFunctionId(fhunction.name, fhunction.shape)\n  );\n}\n\nexport function methodUrlFromRef(\n  rootLibraries: Libraries,\n  ref: ClassMemberRef\n): string {\n  const method = methodFromRef(rootLibraries, ref);\n  if (!method) {\n    return \"/\";\n  }\n  return memberUrl(\n    classUrlFromRef(ref.classRef),\n    getFunctionId(method.name, method.shape)\n  );\n}\n\nexport function urlFromLinkRef(ref: LinkRef): string {\n  switch (ref.kind) {\n    case \"class\":\n      return classUrl(ref.baseUrl, ref.path, ref.name);\n    case \"constructor\":\n    case \"factory\":\n    case \"method\":\n    case \"static-method\":\n      return memberUrl(\n        classUrl(ref.baseUrl, ref.path, ref.holder),\n        getFunctionId(ref.name, ref.shape)\n      );\n    case \"field\":\n      return memberUrl(\n        classUrl(ref.baseUrl, ref.path, ref.holder),\n        getFieldId(ref.name)\n      );\n    case \"global\":\n      return globalUrl(libraryUrl(ref.baseUrl, ref.path), ref.name);\n    case \"global-method\":\n      return globalUrl(\n        libraryUrl(ref.baseUrl, ref.path),\n        getFunctionId(ref.name, ref.shape)\n      );\n    default:\n      return \"\";\n  }\n}\n","import {\n  ClassMemberRef,\n  LinkRef,\n  TopLevelItemRef,\n  TopLevelRef,\n} from \"./reference\";\n\nexport type Libraries = { [libraryName: string]: Library };\nexport type Classes = { [className: string]: Class };\n\nexport const CATEGORY_FUNDAMENTAL = \"fundamental\";\nexport const CATEGORY_JUST_THERE = \"just_there\";\nexport const CATEGORY_MISC = \"misc\";\nexport const CATEGORY_SUB = \"sub\";\n\nexport type Category =\n  | typeof CATEGORY_FUNDAMENTAL\n  | typeof CATEGORY_JUST_THERE\n  | typeof CATEGORY_MISC\n  | typeof CATEGORY_SUB;\n\nexport const CLASS_KIND_CLASS = \"class\";\nexport const CLASS_KIND_INTERFACE = \"interface\";\nexport const CLASS_KIND_MIXIN = \"mixin\";\n\nexport type ClassKind =\n  | typeof CLASS_KIND_CLASS\n  | typeof CLASS_KIND_INTERFACE\n  | typeof CLASS_KIND_MIXIN;\n\nexport interface Library {\n  name: string;\n  id: TopLevelRef;\n  libraries: Libraries;\n  classes: Classes;\n  interfaces: Classes;\n  mixins: Classes;\n  exportedClasses: Classes;\n  exportedInterfaces: Classes;\n  exportedMixins: Classes;\n  globals: Global[];\n  exportedGlobals: Global[];\n  functions: Function[];\n  exportedFunctions: Function[];\n  toitdoc?: Doc;\n  category: Category;\n}\n\nexport interface Class {\n  name: string;\n  id: TopLevelItemRef;\n  kind: ClassKind;\n  extends?: TopLevelItemRef;\n  interfaces: TopLevelItemRef[];\n  mixins: TopLevelItemRef[];\n  fields: Field[];\n  constructors: Method[];\n  statics: Method[];\n  methods: Method[];\n  toitdoc?: Doc;\n}\n\nexport interface Global {\n  name: string;\n  id: TopLevelItemRef;\n  toitdoc?: Doc;\n}\n\nexport interface Function {\n  name: string;\n  id: TopLevelItemRef;\n  parameters: Parameter[];\n  returnType: Type;\n  toitdoc?: Doc;\n  shape?: Shape;\n  isInherited: boolean;\n}\n\nexport interface Method {\n  name: string;\n  id: ClassMemberRef;\n  parameters: Parameter[];\n  returnType: Type;\n  toitdoc?: Doc;\n  shape?: Shape;\n  isInherited: boolean;\n}\n\nexport interface Parameter {\n  name: string;\n  isBlock: boolean;\n  isNamed: boolean;\n  isRequired: boolean;\n  type: Type;\n}\n\nexport interface Field {\n  name: string;\n  id: ClassMemberRef;\n  type: Type;\n  toitdoc?: Doc;\n  isInherited: boolean;\n}\n\nexport interface Type {\n  isNone: boolean;\n  isAny: boolean;\n  isBlock: boolean;\n  reference?: TopLevelItemRef;\n}\n\nexport interface Shape {\n  arity: number;\n  totalBlockCount: number;\n  namedBlockCount: number;\n  names: string[];\n}\n\n// Toitdoc related\n\nexport const DOC_STATEMENT_PARAGRAPH = \"DOC_STATEMENT_PARAGRAPH\";\nexport const DOC_STATEMENT_ITEMIZED = \"DOC_STATEMENT_ITEMIZED\";\nexport const DOC_STATEMENT_ITEM = \"DOC_STATEMENT_ITEM\";\nexport const DOC_STATEMENT_CODE_SECTION = \"DOC_STATEMENT_CODE_SECTION\";\nexport const DOC_EXPRESSION_CODE = \"DOC_EXPRESSION_CODE\";\nexport const DOC_EXPRESSION_TEXT = \"DOC_EXPRESSION_TEXT\";\nexport const DOC_DOCREF = \"DOC_DOCREF\";\n\nexport type Doc = DocSection[];\n\nexport interface DocSection {\n  title: string | null;\n  statements: DocStatement[];\n}\n\nexport type DocStatement =\n  | DocStatementParagraph\n  | DocStatementItemized\n  | DocStatementCodeSection;\n\nexport interface DocStatementItemized {\n  type: typeof DOC_STATEMENT_ITEMIZED;\n  items: DocStatementItem[];\n}\n\nexport interface DocStatementItem {\n  type: typeof DOC_STATEMENT_ITEM;\n  statements: DocStatement[];\n}\n\nexport interface DocStatementCodeSection {\n  type: typeof DOC_STATEMENT_CODE_SECTION;\n  text: string;\n}\n\nexport interface DocStatementParagraph {\n  type: typeof DOC_STATEMENT_PARAGRAPH;\n  expressions: DocExpression[];\n}\n\nexport type DocExpression = DocExpressionCode | DocExpressionText | DocRef;\n\nexport interface DocExpressionCode {\n  type: typeof DOC_EXPRESSION_CODE;\n  text: string;\n}\n\nexport interface DocExpressionText {\n  type: typeof DOC_EXPRESSION_TEXT;\n  text: string;\n}\n\nexport interface DocRef {\n  type: typeof DOC_DOCREF;\n  text: string;\n  reference: LinkRef;\n}\n","import styled from \"@emotion/styled\";\nimport \"codemirror/lib/codemirror.css\";\nimport React from \"react\";\nimport { UnControlled as CodeMirror } from \"react-codemirror2\";\nimport \"../../assets/codemirror/codemirror.css\";\nimport \"../../assets/codemirror/toit\";\n\nconst Wrapper = styled.div`\n  .CodeMirror {\n    background: #b0b8ed20;\n    padding: 1rem;\n    border-radius: 1em;\n    margin-left: -1rem;\n    margin-right: -1rem;\n    width: auto;\n  }\n`;\n\ninterface CodeBlockProps {\n  code: string;\n}\n\nexport default function CodeBlock(props: CodeBlockProps): JSX.Element {\n  return (\n    <Wrapper>\n      <CodeMirror\n        value={props.code.replace(/^\\n/, \"\").replace(/\\n$/, \"\")}\n        options={{\n          mode: \"toit\",\n          readOnly: true,\n          tabSize: 2,\n        }}\n      />\n    </Wrapper>\n  );\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport { makeStyles, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { HashLink } from \"react-router-hash-link\";\nimport { urlFromLinkRef } from \"../../misc/util\";\nimport {\n  Doc,\n  DOC_DOCREF,\n  DOC_EXPRESSION_CODE,\n  DOC_EXPRESSION_TEXT,\n  DOC_STATEMENT_CODE_SECTION,\n  DOC_STATEMENT_ITEMIZED,\n  DOC_STATEMENT_PARAGRAPH,\n  DocExpression,\n  DocExpressionCode,\n  DocExpressionText,\n  DocRef,\n  DocSection,\n  DocStatement,\n  DocStatementCodeSection,\n  DocStatementItem,\n  DocStatementItemized,\n  DocStatementParagraph,\n} from \"../../model/model\";\nimport CodeBlock from \"../general/CodeBlock\";\n\n// TODO: Pull all format and structure from old printStatements function (structure from old format: https://github.com/toitware/web-toitdocs/blob/e74e3d5478fb3fd350e28f7801d69b7f38a1d563/src/components/toitdoc_info.js#L26)\n\nconst useStyles = makeStyles((theme) => ({\n  statementParagraph: { paddingBottom: theme.spacing(1) },\n  sectionTitle: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(1),\n  },\n  otherDocRef: {\n    fontWeight: 590,\n  },\n}));\n\nfunction StatementCodeSection(props: {\n  code: DocStatementCodeSection;\n}): JSX.Element {\n  return <CodeBlock code={props.code.text} />;\n}\n\nfunction ExpressionCode(props: { code: DocExpressionCode }): JSX.Element {\n  return <code>{props.code.text}</code>;\n}\n\nfunction ExpressionText(props: { text: DocExpressionText }): JSX.Element {\n  return <span>{props.text.text}</span>;\n}\n\nfunction StatementItemized(props: {\n  itemized: DocStatementItemized;\n}): JSX.Element {\n  return (\n    <ul>\n      {props.itemized.items.map((item: DocStatementItem) =>\n        item.statements.map((statement, index) => (\n          <li key={index}>\n            <Statement statement={statement} />\n          </li>\n        ))\n      )}\n    </ul>\n  );\n}\n\nfunction StatementParagraph(props: {\n  statement: DocStatementParagraph;\n  isHeader?: boolean;\n}): JSX.Element {\n  const classes = useStyles();\n  return (\n    <div className={props.isHeader ? \"\" : classes.statementParagraph}>\n      {props.statement.expressions.map((expr: DocExpression, index: number) => (\n        <Expression key={\"expression_\" + index} expression={expr} />\n      ))}\n    </div>\n  );\n}\n\nfunction ToitdocRef(props: { reference: DocRef }): JSX.Element {\n  const classes = useStyles();\n  const url = urlFromLinkRef(props.reference.reference);\n  if (!url) {\n    return <span className={classes.otherDocRef}>{props.reference.text}</span>;\n  }\n  if (props.reference.reference.baseUrl !== \"\") {\n    return <a href={url}>{props.reference.text}</a>;\n  }\n  return <HashLink to={url}>{props.reference.text}</HashLink>;\n}\n\nfunction Expression(props: { expression: DocExpression }): JSX.Element {\n  const expression = props.expression;\n  switch (expression.type) {\n    case DOC_EXPRESSION_CODE:\n      return <ExpressionCode code={expression} />;\n    case DOC_EXPRESSION_TEXT:\n      return <ExpressionText text={expression} />;\n    case DOC_DOCREF:\n      return <ToitdocRef reference={expression} />;\n    default:\n      throw Error(\"unhandled expression: \" + expression);\n  }\n}\n\nfunction Statement(props: {\n  statement: DocStatement;\n  isHeader?: boolean;\n}): JSX.Element {\n  const statement = props.statement;\n  switch (statement.type) {\n    case DOC_STATEMENT_PARAGRAPH:\n      return (\n        <StatementParagraph isHeader={props.isHeader} statement={statement} />\n      );\n    case DOC_STATEMENT_CODE_SECTION:\n      return <StatementCodeSection code={statement} />;\n    case DOC_STATEMENT_ITEMIZED:\n      return <StatementItemized itemized={statement} />;\n    default:\n      throw Error(\"unhandled statement: \" + statement);\n  }\n}\n\nfunction Section(props: { section: DocSection }): JSX.Element {\n  const classes = useStyles();\n  return (\n    <>\n      <Typography variant=\"h5\" className={classes.sectionTitle}>\n        {props.section.title}\n      </Typography>\n      {props.section.statements.map((statement, index) => (\n        <Statement key={\"statement_\" + index} statement={statement} />\n      ))}\n    </>\n  );\n}\n\nfunction headerToitdoc(toitdoc?: Doc): DocStatement | undefined {\n  if (!toitdoc) return toitdoc;\n  if (toitdoc.length === 0) return undefined;\n  const first = toitdoc[0];\n  const statements = first.statements;\n  if (statements.length === 0) return undefined;\n  return statements[0];\n}\n\n// Function that prints the content of currently presented element.\nfunction Toitdocs(props: {\n  value?: Doc;\n  headerOnly?: boolean;\n}): JSX.Element | null {\n  if (props.headerOnly) {\n    const statement = headerToitdoc(props.value);\n    if (!statement) return null;\n    return (\n      <Statement\n        key=\"statement_0\"\n        isHeader={props.headerOnly}\n        statement={statement}\n      />\n    );\n  }\n  const value = props.value;\n  if (!value) {\n    return null;\n  }\n  return (\n    <>\n      {value.map((section, index) => (\n        <Section key={\"section_\" + index} section={section} />\n      ))}\n    </>\n  );\n}\n\nexport default Toitdocs;\n","// Copyright (C) 2021 Toitware ApS. All rights reserved.\n\nimport { Theme, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  StyleRules,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { libraryUrlFromRef } from \"../../misc/util\";\nimport {\n  CATEGORY_FUNDAMENTAL,\n  CATEGORY_JUST_THERE,\n  CATEGORY_MISC,\n  Libraries,\n  Library,\n} from \"../../model/model\";\nimport Toitdocs from \"../doc/Toitdocs\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    section: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(0.5),\n    },\n    libList: {\n      \"column-count\": 2,\n      \"column-gap\": theme.spacing(2),\n    },\n    libEntry: {\n      paddingBottom: theme.spacing(1),\n      \"break-inside\": \"avoid-column\",\n    },\n    toitdoc: {\n      paddingTop: theme.spacing(0.3),\n    },\n  });\n\nexport interface SummaryViewProps extends WithStyles<typeof styles> {\n  libraries: Libraries;\n}\n\nclass SummaryView extends React.PureComponent<SummaryViewProps> {\n  render(): JSX.Element {\n    const fundamentals: Array<Library> = [];\n    const justThere: Array<Library> = [];\n    const misc: Array<Library> = [];\n    Object.values(this.props.libraries).forEach((lib) => {\n      switch (lib.category) {\n        case CATEGORY_FUNDAMENTAL:\n          fundamentals.push(lib);\n          break;\n        case CATEGORY_JUST_THERE:\n          justThere.push(lib);\n          break;\n        case CATEGORY_MISC:\n          misc.push(lib);\n          break;\n      }\n    });\n\n    const classes = this.props.classes;\n\n    const renderSection = (\n      array: Array<Library>,\n      name?: string\n    ): JSX.Element => {\n      return (\n        <div key={name}>\n          {name && (\n            <Typography variant=\"h4\" className={classes.section}>\n              {name}\n            </Typography>\n          )}\n          <div className={classes.libList}>\n            {array.map((lib) => (\n              <div key={lib.name} className={classes.libEntry}>\n                <Link to={libraryUrlFromRef(lib.id)}>{lib.name}</Link>\n                {lib.toitdoc && (\n                  <div className={classes.toitdoc}>\n                    <Toitdocs value={lib.toitdoc} headerOnly={true} />\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n    };\n\n    // Shortcut if the viewer is used for non-core libraries in which\n    // case there should only be misc libraries.\n    if (fundamentals.length === 0 && justThere.length === 0) {\n      return renderSection(misc);\n    }\n    return (\n      <>\n        {renderSection(fundamentals, \"Fundamental\")}\n        {renderSection(justThere, \"Framework\")}\n        {renderSection(misc, \"Misc\")}\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(SummaryView);\n","// Copyright (C) 2021 Toitware ApS. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport SummaryView, {\n  SummaryViewProps,\n} from \"../../components/main/SummaryView\";\nimport { RootState } from \"../../redux/doc\";\n\nconst mapStateToProps = (\n  state: RootState\n): Pick<SummaryViewProps, \"libraries\"> => {\n  return {\n    libraries: state.doc.libraries || {},\n  };\n};\n\nexport default connect(mapStateToProps)(SummaryView);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  StyleRules,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport Summary from \"../../containers/main/Summary\";\nimport CodeBlock from \"../general/CodeBlock\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    header: {\n      paddingBottom: theme.spacing(4),\n    },\n    section: {\n      paddingBottom: theme.spacing(2),\n    },\n  });\n\ntype WelcomePageProps = WithStyles<typeof styles>;\n\nclass WelcomePage extends React.PureComponent<WelcomePageProps> {\n  render(): JSX.Element {\n    return (\n      <>\n        <Typography variant=\"h3\" className={this.props.classes.header}>\n          Toit standard libraries\n        </Typography>\n        <Typography className={this.props.classes.section}>\n          Welcome to the standard libraries for the Toit programming language.\n          The Toit SDK contains a vast amount of libraries, ready-to use classes\n          and functionalities that allow a fast and easy use of Toit. This\n          documentation contains the structure of the Toit libraries.\n        </Typography>\n        <Typography className={this.props.classes.section}>\n          Except for the <b>core</b> library, you must import a library before\n          you can use it. Here is an example of how to do it:\n        </Typography>\n        <CodeBlock\n          code={\n            \"import metrics\\n\" +\n            \"import encoding.json as json\\n\" +\n            \"import peripherals show *\\n\" +\n            \"import fixed_point show FixedPoint\"\n          }\n        />\n        <Summary />\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(WelcomePage);\n","import { createStyles, Theme } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { libraryUrlFromRef, topLevelRefToId } from \"../../misc/util\";\nimport { Library } from \"../../model/model\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    subLibraries: {\n      paddingLeft: theme.spacing(1),\n    },\n    openLibrary: {\n      color: `${theme.palette.primary.main} !important`,\n    },\n  })\n);\n\nexport type LibraryNavigationProps = {\n  library: Library;\n  openLibrary: string;\n};\n\nconst LibraryNavigation: React.FC<LibraryNavigationProps> = ({\n  library,\n  openLibrary,\n}: LibraryNavigationProps) => {\n  const classes = useStyles();\n  const showSubLibraries = openLibrary?.split(\"/\")[0] === library.name;\n  const openSubLibrary = openLibrary?.split(\"/\").slice(1).join(\"/\");\n  return (\n    <div key={topLevelRefToId(library.id)}>\n      <Link\n        to={libraryUrlFromRef(library.id)}\n        className={showSubLibraries ? classes.openLibrary : \"\"}\n      >\n        {library.name}\n      </Link>\n      {showSubLibraries && (\n        <div className={classes.subLibraries}>\n          {Object.values(library.libraries)\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .map((subLibrary) => (\n              <LibraryNavigation\n                key={subLibrary.id.name}\n                library={subLibrary}\n                openLibrary={openSubLibrary}\n              />\n            ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LibraryNavigation;\n","import styled from \"@emotion/styled\";\nimport { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, RouteComponentProps } from \"react-router-dom\";\nimport { ViewMode, viewMode } from \"../../App\";\nimport logo from \"../../assets/images/logo.svg\";\nimport { Libraries, Library } from \"../../model/model\";\nimport { RootState } from \"../../redux/doc\";\nimport LibraryNavigation from \"./LibraryNavigation\";\n\nconst Wrapper = styled.div`\n  background: ${({ theme }) => theme.palette.background.default};\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  padding: 3rem;\n  a {\n    color: ${({ theme }) => theme.palette.text.primary};\n    text-decoration: none;\n    display: block;\n    margin: 0.5rem 0;\n  }\n`;\n\nconst Title = styled.div`\n  margin-bottom: 3rem;\n`;\n\nexport type NavigationParams = {\n  libraryName: string;\n};\n\nexport type NavigationProps = {\n  className?: string;\n} & RouteComponentProps<NavigationParams>;\n\nconst NavigationView: React.FC<NavigationProps> = ({\n  location,\n  match,\n  className,\n}: NavigationProps) => {\n  analytics.page(\"toitdocs\");\n\n  const libraries = useSelector<RootState, Libraries>(\n    (state) => state.doc.libraries || {}\n  );\n\n  let library: Library | undefined;\n  if (match.params.libraryName) {\n    const rootLibrary = match.params.libraryName.split(\"/\")[0];\n    library = libraries[rootLibrary];\n  }\n\n  return (\n    <Wrapper className={className}>\n      <Link to=\"/\">\n        <img alt=\"Toit\" src={logo} height=\"32px\"></img>\n      </Link>\n      <Title>\n        <Typography variant=\"h5\">Libraries</Typography>\n      </Title>\n      {viewMode !== ViewMode.SDK && library && (\n        <LibraryNavigation\n          library={library}\n          openLibrary={match.params.libraryName}\n        />\n      )}\n      {viewMode === ViewMode.SDK &&\n        Object.values(libraries)\n          .sort((a, b) => a.name.localeCompare(b.name))\n          .map((subLibrary) => (\n            <LibraryNavigation\n              library={subLibrary}\n              openLibrary={match.params.libraryName}\n              key={subLibrary.name}\n            />\n          ))}\n    </Wrapper>\n  );\n};\n\nexport default NavigationView;\n","import { ThemeProvider as EmotionThemeProvider } from \"@emotion/react\";\nimport {\n  Theme,\n  ThemeProvider as MaterialThemeProvider,\n} from \"@material-ui/core/styles\";\nimport React from \"react\";\n\ntype ThemeProviderProps = React.PropsWithChildren<{\n  theme: Theme;\n}>;\n\n/**\n * A simple helper component, that sets the theme for both, material-ui and\n * emotion.\n */\nexport function ThemeProvider({\n  theme,\n  children,\n}: ThemeProviderProps): JSX.Element {\n  return (\n    <MaterialThemeProvider theme={theme}>\n      <EmotionThemeProvider theme={theme}>{children}</EmotionThemeProvider>\n    </MaterialThemeProvider>\n  );\n}\n\nexport default ThemeProvider;\n","import styled from \"@emotion/styled\";\nimport { Divider, makeStyles, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { HashLink } from \"react-router-hash-link\";\nimport { Doc } from \"../../model/model\";\nimport Toitdocs from \"../doc/Toitdocs\";\n\ninterface DetailsListProps {\n  title: string;\n  elements: {\n    name: string;\n    description: JSX.Element;\n    key: string;\n    id: string;\n    toitdoc?: Doc;\n    toitdocHeaderOnly?: boolean;\n    link?: string;\n    isInherited: boolean;\n  }[];\n}\n\nconst useStyles = makeStyles((theme) => ({\n  details: { paddingBottom: theme.spacing(3) },\n  title: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(1),\n  },\n  element: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  toitdoc: {\n    paddingTop: theme.spacing(1),\n  },\n  divider: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst Signature = styled.div`\n  font-family: \"Roboto mono\", monospace;\n  font-size: 1.125em;\n`;\nconst SignatureName = styled.span`\n  font-weight: bold;\n`;\n\nfunction name(name: string, id: string, link?: string): JSX.Element {\n  if (link) {\n    return <Link to={link}>{name}</Link>;\n  } else {\n    return <HashLink to={{ hash: id }}>{name}</HashLink>;\n  }\n}\n\nexport default function DetailsList(props: DetailsListProps): JSX.Element {\n  const classes = useStyles();\n  return (\n    <div className={classes.details}>\n      <div className={classes.title}>\n        <Typography variant=\"h3\">{props.title}</Typography>\n      </div>\n      {props.elements\n        .concat([])\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((element, i) => {\n          return (\n            <div key={element.key} id={element.id}>\n              <div className={classes.element}>\n                <Signature>\n                  <SignatureName>\n                    {name(element.name, element.id, element.link)}\n                  </SignatureName>{\" \"}\n                  {element.description}\n                </Signature>\n                {element.isInherited && <em>inherited</em>}\n                {element.toitdoc && (\n                  <div className={classes.toitdoc}>\n                    <Toitdocs\n                      value={element.toitdoc}\n                      headerOnly={element.toitdocHeaderOnly}\n                    />\n                  </div>\n                )}\n              </div>\n              <Divider className={classes.divider} />\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { classUrlFromRef } from \"../../misc/util\";\nimport { Type } from \"../../model/model\";\nimport { TopLevelItemRef } from \"../../model/reference\";\n\ninterface TypeProps {\n  type: Type;\n}\n\nexport class TypeView extends Component<TypeProps> {\n  render(): JSX.Element {\n    const type = this.props.type;\n    if (type.isNone) {\n      return <span>none</span>;\n    }\n    if (type.isAny) {\n      return <span>any</span>;\n    }\n    if (type.isBlock) {\n      return <span>[block]</span>;\n    }\n    if (type.reference) {\n      return <TypeReference reference={type.reference} />;\n    }\n    return <></>;\n  }\n}\n\ninterface TypeReferenceProps {\n  reference: TopLevelItemRef;\n}\n\nexport class TypeReference extends Component<TypeReferenceProps> {\n  render(): JSX.Element {\n    const url = classUrlFromRef(this.props.reference);\n    const name = this.props.reference.name;\n    if (this.props.reference.libraryRef.baseUrl !== \"\") {\n      return <a href={url}>{name}</a>;\n    }\n    return <Link to={url}>{name}</Link>;\n  }\n}\n","import React from \"react\";\nimport { getFieldId } from \"../../misc/util\";\nimport { Field } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\nimport { TypeView } from \"./Type\";\n\ninterface FieldsProps {\n  fields: Field[];\n}\n\nexport default function Fields(props: FieldsProps): JSX.Element {\n  return (\n    <DetailsList\n      title=\"Fields\"\n      elements={props.fields.map((field, i) => {\n        return {\n          name: field.name,\n          description: <TypeView type={field.type} />,\n          key: \"field_\" + i,\n          id: getFieldId(field.name),\n          toitdoc: field.toitdoc,\n          isInherited: field.isInherited,\n        };\n      })}\n    />\n  );\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport React from \"react\";\nimport { getFunctionId } from \"../../misc/util\";\nimport { Function, Method, Parameter, Type } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\nimport { TypeView } from \"./Type\";\n\ninterface FunctionsProps {\n  functions: (Function | Method)[];\n  title: string;\n  hideReturnTypes?: boolean;\n}\n\nexport function getDescription(\n  parameters: Parameter[],\n  returnType?: Type,\n  hideReturnTypes?: boolean\n): JSX.Element {\n  return (\n    <>\n      {parameters.map((parameter, i) => {\n        let param = parameter.name;\n        if (parameter.isNamed) {\n          param = \"--\" + param;\n        }\n        if (parameter.isBlock) {\n          param = \"[\" + param + \"] \";\n          return param;\n        }\n        return (\n          <span key={i}>\n            {param + \"/\"}\n            <TypeView type={parameter.type} />\n            {parameter.isRequired ? \" \" : \"= \"}\n          </span>\n        );\n      })}\n      {!hideReturnTypes && returnType && (\n        <>\n          <span>{\" -> \"}</span>\n          <TypeView type={returnType} />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default function Functions(props: FunctionsProps): JSX.Element {\n  return (\n    <DetailsList\n      title={props.title}\n      elements={props.functions.map((fn, i) => {\n        const id = getFunctionId(fn.name, fn.shape);\n        return {\n          name: fn.name,\n          description: getDescription(\n            fn.parameters,\n            fn.returnType,\n            props.hideReturnTypes\n          ),\n          key: \"function\" + i,\n          id: id,\n          toitdoc: fn.toitdoc,\n          isInherited: fn.isInherited,\n        };\n      })}\n    />\n  );\n}\n","import {\n  Box,\n  createStyles,\n  StyleRules,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Theme,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { HashLink } from \"react-router-hash-link\";\nimport { getFunctionId } from \"../../misc/util\";\nimport { Field, Function, Method } from \"../../model/model\";\nimport { getDescription } from \"../doc/Functions\";\nimport Toitdocs from \"../doc/Toitdocs\";\nimport { TypeView } from \"../doc/Type\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    methodsTable: {\n      marginTop: theme.spacing(1),\n    },\n  });\n\ninterface TablePanelGenProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TablePanelGen(props: TablePanelGenProps): JSX.Element {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box>\n          <span>{children}</span>\n        </Box>\n      )}\n    </div>\n  );\n}\n\ninterface TablePanelProps extends WithStyles<typeof styles> {\n  tab: number;\n  active: number;\n  tabData?: (Function | Method)[];\n  tabFieldData?: Field[];\n  hideReturnTypes?: boolean;\n  ariaLabel: string;\n}\n\nclass TablePanel extends Component<TablePanelProps> {\n  render(): JSX.Element {\n    const classes = this.props.classes;\n    if (this.props.tabFieldData)\n      return (\n        <TablePanelGen value={this.props.active} index={this.props.tab}>\n          <TableContainer>\n            <Table\n              size=\"small\"\n              aria-label={this.props.ariaLabel}\n              className={classes.methodsTable}\n            >\n              <TableBody>\n                {this.props.tabFieldData.length > 0 &&\n                  this.props.tabFieldData.map((field, index) => (\n                    <TableRow key={field.name + index}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <HashLink to={{ hash: field.name }}>\n                          {field.name}\n                        </HashLink>{\" \"}\n                        <TypeView type={field.type} />\n                      </TableCell>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <Toitdocs value={field.toitdoc} headerOnly={true} />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TablePanelGen>\n      );\n    else if (this.props.tabData)\n      return (\n        <TablePanelGen value={this.props.active} index={this.props.tab}>\n          <TableContainer>\n            <Table\n              size=\"small\"\n              aria-label={this.props.ariaLabel}\n              className={classes.methodsTable}\n            >\n              <TableBody>\n                {this.props.tabData.length > 0 &&\n                  this.props.tabData.map((method, index) => (\n                    <TableRow key={method.name + index}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <HashLink\n                          to={{\n                            hash: getFunctionId(method.name, method.shape),\n                          }}\n                        >\n                          {method.name}\n                        </HashLink>{\" \"}\n                        {getDescription(\n                          method.parameters,\n                          method.returnType,\n                          this.props.hideReturnTypes\n                        )}\n                      </TableCell>\n                      <TableCell component=\"th\" scope=\"row\">\n                        <Toitdocs value={method.toitdoc} headerOnly={true} />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TablePanelGen>\n      );\n    else return <></>;\n  }\n}\n\nexport default withStyles(styles)(TablePanel);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  createStyles,\n  Divider,\n  StyleRules,\n  Tab,\n  Tabs,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport {\n  Class,\n  CLASS_KIND_CLASS,\n  CLASS_KIND_INTERFACE,\n  CLASS_KIND_MIXIN,\n} from \"../../model/model\";\nimport TablePanel from \"../general/TablePanel\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      minWidth: 650,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    title: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n    },\n    hiddenTab: {\n      display: \"none\",\n    },\n  });\n\ninterface ClassOverviewProps extends WithStyles<typeof styles> {\n  klass: Class;\n}\n\nfunction a11yProps(index: number): { id: string; \"aria-controls\": string } {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`,\n  };\n}\n\ninterface TabProps {\n  tab: number;\n}\n\nclass ClassOverviewView extends Component<ClassOverviewProps, TabProps> {\n  constructor(props: ClassOverviewProps) {\n    super(props);\n    this.state = {\n      tab:\n        this.props.klass.constructors.length > 0\n          ? 0\n          : this.props.klass.statics.length > 0\n          ? 1\n          : this.props.klass.methods.length > 0\n          ? 2\n          : 3,\n    };\n  }\n  render(): JSX.Element {\n    const classes = this.props.classes;\n    const klass = this.props.klass;\n    let kind = \"\";\n    if (klass.kind === CLASS_KIND_CLASS) {\n      kind = \"Class\";\n    } else if (klass.kind === CLASS_KIND_INTERFACE) {\n      kind = \"Interface\";\n    } else if (klass.kind === CLASS_KIND_MIXIN) {\n      kind = \"Mixin\";\n    } else {\n      throw new Error(\"Unknown class kind: \" + klass.kind);\n    }\n    return (\n      <div className={classes.root}>\n        <div className={classes.title}>\n          <Typography variant=\"h4\">{kind} summary</Typography>\n        </div>\n        <Divider />\n        <Tabs\n          value={this.state.tab}\n          aria-label=\"Class overview\"\n          textColor=\"primary\"\n          indicatorColor=\"primary\"\n        >\n          <Tab\n            label=\"Constructors\"\n            {...a11yProps(0)}\n            onClick={(): void => this.setState({ tab: 0 })}\n            className={klass.constructors.length > 0 ? \"\" : classes.hiddenTab}\n          />\n          <Tab\n            label=\"Statics\"\n            {...a11yProps(1)}\n            onClick={(): void => this.setState({ tab: 1 })}\n            className={klass.statics.length > 0 ? \"\" : classes.hiddenTab}\n          />\n          <Tab\n            label=\"Methods\"\n            {...a11yProps(2)}\n            onClick={(): void => this.setState({ tab: 2 })}\n            className={klass.methods.length > 0 ? \"\" : classes.hiddenTab}\n          />\n          <Tab\n            label=\"Fields\"\n            {...a11yProps(3)}\n            onClick={(): void => this.setState({ tab: 3 })}\n            className={klass.fields.length > 0 ? \"\" : classes.hiddenTab}\n          />\n        </Tabs>\n        <TablePanel\n          tab={0}\n          active={this.state.tab}\n          tabData={klass.constructors}\n          hideReturnTypes={true}\n          ariaLabel=\"Constructors\"\n        />\n        <TablePanel\n          tab={1}\n          active={this.state.tab}\n          tabData={klass.statics}\n          ariaLabel=\"Statics\"\n        />\n        <TablePanel\n          tab={2}\n          active={this.state.tab}\n          tabData={klass.methods}\n          ariaLabel=\"Methods\"\n        />\n        <TablePanel\n          tab={3}\n          active={this.state.tab}\n          tabFieldData={klass.fields}\n          ariaLabel=\"Fields\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(ClassOverviewView);\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Component } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { classFrom, classUrlFromRef } from \"../../misc/util\";\nimport {\n  CLASS_KIND_CLASS,\n  CLASS_KIND_INTERFACE,\n  CLASS_KIND_MIXIN,\n  Libraries,\n} from \"../../model/model\";\nimport Fields from \"../doc/Fields\";\nimport Functions from \"../doc/Functions\";\nimport Toitdocs from \"../doc/Toitdocs\";\nimport { TypeReference } from \"../doc/Type\";\nimport ClassOverview from \"./ClassOverview\";\n\nexport interface ClassInfoParams {\n  libraryName: string;\n  className: string;\n}\n\nexport interface ClassInfoProps extends RouteComponentProps<ClassInfoParams> {\n  libraries: Libraries;\n}\n\nexport default class ClassInfoView extends Component<ClassInfoProps> {\n  componentDidMount(): void {\n    const hashId = this.props.location.hash.substring(1);\n    const element = document.getElementById(hashId);\n    element?.scrollIntoView(true);\n    analytics.page(\"toitdocs\");\n  }\n\n  render(): React.ReactNode {\n    const classInfo = classFrom(\n      this.props.match.params.libraryName,\n      this.props.match.params.className,\n      this.props.libraries\n    );\n    if (!classInfo) {\n      return this.notFound(this.props.match.params.className);\n    }\n    let kind = \"\";\n    if (classInfo.kind === CLASS_KIND_CLASS) {\n      kind = \"Class\";\n    } else if (classInfo.kind === CLASS_KIND_INTERFACE) {\n      kind = \"Interface\";\n    } else if (classInfo.kind === CLASS_KIND_MIXIN) {\n      kind = \"Mixin\";\n    } else {\n      throw new Error(\"Unknown class kind: \" + classInfo.kind);\n    }\n\n    return (\n      <>\n        <Typography variant=\"h2\" component=\"h2\">\n          {kind} {classInfo.name}\n        </Typography>\n        {(classInfo.extends ||\n          classInfo.interfaces.length !== 0 ||\n          classInfo.mixins.length !== 0) && (\n          <div>\n            {classInfo.extends && (\n              <>\n                extends <TypeReference reference={classInfo.extends} />\n              </>\n            )}\n            {classInfo.mixins.length !== 0 && \" with \"}\n            {classInfo.mixins.map((ref) => {\n              const key = classUrlFromRef(ref);\n              return (\n                <span key={key}>\n                  <TypeReference reference={ref} />{\" \"}\n                </span>\n              );\n            })}\n            {classInfo.interfaces.length !== 0 && \" implements \"}\n            {classInfo.interfaces.map((ref) => {\n              const key = classUrlFromRef(ref);\n              return (\n                <span key={key}>\n                  <TypeReference reference={ref} />{\" \"}\n                </span>\n              );\n            })}\n          </div>\n        )}\n        {classInfo.toitdoc && <Toitdocs value={classInfo.toitdoc} />}\n        <ClassOverview klass={classInfo} />\n        {classInfo.constructors.length > 0 && (\n          <Functions\n            functions={classInfo.constructors}\n            title=\"Constructors\"\n            hideReturnTypes\n          />\n        )}\n        {classInfo.statics.length > 0 && (\n          <Functions functions={classInfo.statics} title=\"Statics\" />\n        )}\n        {classInfo.methods.length > 0 && (\n          <Functions functions={classInfo.methods} title=\"Methods\" />\n        )}\n        {classInfo.fields.length > 0 && <Fields fields={classInfo.fields} />}\n      </>\n    );\n  }\n\n  notFound(className: string): JSX.Element {\n    return (\n      <Typography variant=\"h4\">\n        {\"Error: Class \" + className + \" not found\"}\n      </Typography>\n    );\n  }\n}\n","import { connect } from \"react-redux\";\nimport ClassInfoView, {\n  ClassInfoProps,\n} from \"../../components/main/ClassInfoView\";\nimport { RootState } from \"../../redux/doc\";\n\nconst mapStateToProps = (\n  state: RootState\n): Pick<ClassInfoProps, \"libraries\"> => {\n  return {\n    libraries: state.doc.libraries || {},\n  };\n};\n\nexport default connect(mapStateToProps)(ClassInfoView);\n","import React from \"react\";\nimport { classUrlFromRef } from \"../../misc/util\";\nimport { Class } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\n\ninterface ClassesProps {\n  classes: Class[];\n  title: string;\n}\n\nexport default function Classes(props: ClassesProps): JSX.Element {\n  return (\n    <DetailsList\n      title={props.title}\n      elements={props.classes.map((klass, i) => {\n        return {\n          name: klass.name,\n          description: <></>,\n          key: \"class_\" + i,\n          id: \"\",\n          link: classUrlFromRef(klass.id),\n          toitdoc: klass.toitdoc,\n          toitdocHeaderOnly: true,\n          isInherited: false,\n        };\n      })}\n    />\n  );\n}\n","import React from \"react\";\nimport { Global } from \"../../model/model\";\nimport DetailsList from \"../general/DetailsList\";\n\ninterface GlobalsProps {\n  globals: Global[];\n  title: string;\n}\n\nexport default function Globals(props: GlobalsProps): JSX.Element {\n  return (\n    <DetailsList\n      title={props.title}\n      elements={props.globals.map((global, i) => {\n        return {\n          name: global.name,\n          description: <></>,\n          key: \"global_\" + i,\n          id: global.name,\n          toitdoc: global.toitdoc,\n          isInherited: false,\n        };\n      })}\n    />\n  );\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport { Theme } from \"@material-ui/core\";\nimport {\n  createStyles,\n  StyleRules,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Component } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { libraryFrom } from \"../../misc/util\";\nimport { Libraries } from \"../../model/model\";\nimport CodeBlock from \"../general/CodeBlock\";\nimport Classes from \"../doc/Classes\";\nimport Functions from \"../doc/Functions\";\nimport Globals from \"../doc/Globals\";\nimport Toitdocs from \"../doc/Toitdocs\";\nimport { viewMode, ViewMode } from \"../../App\";\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      width: \"100%\",\n    },\n    importingText: {\n      marginBottom: theme.spacing(2),\n    },\n    heading: {\n      marginBottom: theme.spacing(3),\n    },\n  });\n\nexport interface LibraryInfoParams {\n  libraryName: string;\n}\n\nexport interface LibraryInfoProps\n  extends WithStyles<typeof styles>,\n    RouteComponentProps<LibraryInfoParams> {\n  libraries: Libraries;\n}\n\nclass LibraryInfoView extends Component<LibraryInfoProps> {\n  componentDidMount(): void {\n    const hashId = this.props.location.hash.substring(1);\n    const element = document.getElementById(hashId);\n    element?.scrollIntoView(true);\n    analytics.page(\"toitdocs\");\n  }\n\n  render(): JSX.Element {\n    const libName = this.props.match.params.libraryName;\n    const library = libraryFrom(libName, this.props.libraries);\n    if (!library) {\n      return this.notFound(libName);\n    }\n\n    const importPath = libName.replace(/\\//g, \".\");\n    let isCoreExported = false;\n    let noImport = false;\n    let isCore = false;\n\n    if (viewMode === ViewMode.SDK) {\n      isCoreExported = libName.startsWith(\"core/\");\n      const unexported = /^core\\/.*_impl$/;\n      if (isCoreExported && unexported.exec(libName)) {\n        isCoreExported = false;\n      }\n      isCore = libName === \"core\";\n      noImport = isCoreExported || isCore;\n    }\n\n    return (\n      <>\n        <div className={this.props.classes.heading}>\n          <Typography component=\"h2\" variant=\"h2\">\n            Library {library.name}\n          </Typography>\n        </div>\n        <div className={this.props.classes.importingText}>\n          {noImport ? (\n            <Typography>\n              This is {isCoreExported ? \"exported from\" : \"\"} the core library,\n              which means you {isCore ? \"usually\" : \"\"} don&#39;t need to import\n              it.\n            </Typography>\n          ) : (\n            <div>\n              <Typography>To use this library in your code:</Typography>\n              <CodeBlock code={\"import \" + importPath} />\n            </div>\n          )}\n        </div>\n        {library.toitdoc && <Toitdocs value={library.toitdoc} />}\n        {Object.keys(library.interfaces).length > 0 && (\n          <Classes\n            classes={Object.values(library.interfaces)}\n            title=\"Interfaces\"\n          />\n        )}\n        {Object.keys(library.exportedInterfaces).length > 0 && (\n          <Classes\n            classes={Object.values(library.exportedInterfaces)}\n            title=\"Exported interfaces\"\n          />\n        )}\n        {Object.keys(library.mixins).length > 0 && (\n          <Classes classes={Object.values(library.mixins)} title=\"Mixins\" />\n        )}\n        {Object.keys(library.exportedMixins).length > 0 && (\n          <Classes\n            classes={Object.values(library.exportedMixins)}\n            title=\"Exported mixins\"\n          />\n        )}\n        {Object.keys(library.classes).length > 0 && (\n          <Classes classes={Object.values(library.classes)} title=\"Classes\" />\n        )}\n        {Object.keys(library.exportedClasses).length > 0 && (\n          <Classes\n            classes={Object.values(library.exportedClasses)}\n            title=\"Exported classes\"\n          />\n        )}\n        {library.globals.length > 0 && (\n          <Globals globals={library.globals} title=\"Globals\" />\n        )}\n        {library.exportedGlobals.length > 0 && (\n          <Globals globals={library.exportedGlobals} title=\"Exported globals\" />\n        )}\n        {library.functions.length > 0 && (\n          <Functions functions={library.functions} title=\"Functions\" />\n        )}\n        {library.exportedFunctions.length > 0 && (\n          <Functions\n            functions={library.exportedFunctions}\n            title=\"Exported functions\"\n          />\n        )}\n      </>\n    );\n  }\n\n  notFound(libraryName: string): JSX.Element {\n    return (\n      <Typography variant=\"h4\">\n        {\"Error: Library \" + libraryName + \" not found\"}\n      </Typography>\n    );\n  }\n}\n\nexport default withStyles(styles)(LibraryInfoView);\n","import { connect } from \"react-redux\";\nimport LibraryInfoView, {\n  LibraryInfoProps,\n} from \"../../components/main/LibraryInfoView\";\nimport { RootState } from \"../../redux/doc\";\n\nfunction mapStateToProps(\n  state: RootState\n): Pick<LibraryInfoProps, \"libraries\"> {\n  return {\n    libraries: state.doc.libraries || {},\n  };\n}\n\nexport default connect(mapStateToProps)(LibraryInfoView);\n","import { ViewMode, packageName, viewMode } from \"../App\";\nimport {\n  CATEGORY_FUNDAMENTAL,\n  CATEGORY_JUST_THERE,\n  CATEGORY_MISC,\n  CATEGORY_SUB,\n  CLASS_KIND_CLASS,\n  CLASS_KIND_INTERFACE,\n  CLASS_KIND_MIXIN,\n  Category,\n  Class,\n  ClassKind,\n  Classes,\n  DOC_DOCREF,\n  DOC_EXPRESSION_CODE,\n  DOC_EXPRESSION_TEXT,\n  DOC_STATEMENT_CODE_SECTION,\n  DOC_STATEMENT_ITEM,\n  DOC_STATEMENT_ITEMIZED,\n  DOC_STATEMENT_PARAGRAPH,\n  Doc,\n  DocExpression,\n  DocSection,\n  DocStatement,\n  Field,\n  Function,\n  Global,\n  Libraries,\n  Library,\n  Method,\n  Parameter,\n  Shape,\n  Type,\n} from \"../model/model\";\nimport {\n  ClassMemberType,\n  LinkRef,\n  LinkRefKind,\n  TopLevelItemRef,\n  TopLevelItemType,\n  TopLevelRef,\n} from \"../model/reference\";\nimport {\n  OBJECT_TYPE_EXPRESSION_CODE,\n  OBJECT_TYPE_EXPRESSION_TEXT,\n  OBJECT_TYPE_STATEMENT_CODE_SECTION,\n  OBJECT_TYPE_STATEMENT_ITEMIZED,\n  OBJECT_TYPE_STATEMENT_PARAGRAPH,\n  OBJECT_TYPE_TOITDOCREF,\n  TOIT_CATEGORY_FUNDAMENTAL,\n  TOIT_CATEGORY_JUST_THERE,\n  TOIT_CATEGORY_MISC,\n  TOIT_CATEGORY_SUB,\n  TOIT_CLASS_KIND_CLASS,\n  TOIT_CLASS_KIND_INTERFACE,\n  TOIT_CLASS_KIND_MIXIN,\n  ToitCategory,\n  ToitClass,\n  ToitClassKind,\n  ToitDoc,\n  ToitDocRef,\n  ToitDocRefKind,\n  ToitExpression,\n  ToitField,\n  ToitFunction,\n  ToitGlobal,\n  ToitLibrary,\n  ToitModule,\n  ToitParameter,\n  ToitReference,\n  ToitSection,\n  ToitShape,\n  ToitStatement,\n  ToitType,\n} from \"./doc\";\n\n// Slightly hackish: we keep a few global variables, so we don't need to\n// pass them around everywhere.\n// TODO(florian): move all the conversion functions into a class and store the state there.\nlet sdkPath: string[] | undefined = undefined;\nlet packagesPath: string[] | undefined = undefined;\nlet packageNames: { [name: string]: string } | undefined = undefined;\n\nconst SDK_LIBS_URL = \"https://libs.toit.io\";\nconst PACKAGES_URL = \"https://pkg.toit.io\";\n\nfunction libraryName(name: string): string {\n  return name.endsWith(\".toit\") ? name.substring(0, name.length - 5) : name;\n}\n\ntype UrlAndPath = {\n  url: string;\n  path: string[];\n};\n\nfunction isSdkPath(path: string[]): boolean {\n  if (sdkPath === undefined) {\n    return false;\n  }\n  if (path.length < sdkPath.length) {\n    return false;\n  }\n  for (let i = 0; i < sdkPath.length; i++) {\n    if (path[i] !== sdkPath[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isPackagePath(path: string[]): boolean {\n  if (packagesPath === undefined) {\n    return false;\n  }\n  if (path.length < packagesPath.length) {\n    return false;\n  }\n  for (let i = 0; i < packagesPath.length; i++) {\n    if (path[i] !== packagesPath[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction buildPackageUrlAndPath(path: string[]): UrlAndPath {\n  // Example path:\n  // [\".packages\", \"github.com\", \"toitware\", \"toit-morse\", \"1.0.6\", \"src\", \"morse.toit\"]\n  // We need to drop the \".packages\" (done by the slice below).\n  // The ID of the package is everything before the version number.\n  // The version number is always prefixed by \"src\".\n  // Note: a valid source can't have dots in the name. This means that anything of the form\n  // X.Y.Z can't be part of the source path.\n  let srcIndex = packagesPath!.length;\n  while (true) {\n    srcIndex = path.indexOf(\"src\", srcIndex);\n    if (srcIndex === -1) {\n      break;\n    }\n    if (srcIndex >= 1 && /^\\d+\\.\\d+\\.\\d+$/.exec(path[srcIndex - 1])) {\n      break;\n    }\n    srcIndex++;\n  }\n  if (srcIndex === -1) {\n    // No \"src\" in the path.\n    return {\n      url: \"\",\n      path: path,\n    };\n  }\n  const versionNumber = path[srcIndex - 1];\n  const packageIdSegments = path.slice(packagesPath!.length, srcIndex - 1);\n  const packageId = packageIdSegments.join(\"/\");\n  const packageName = packageNames![packageId];\n  const nestedPath = path.slice(srcIndex + 1);\n  nestedPath.unshift(packageName);\n\n  if (packageName === undefined) {\n    // Not a package we know about.\n    return {\n      url: \"\",\n      path: path,\n    };\n  }\n\n  const url = PACKAGES_URL + \"/\" + packageId + \"@\" + versionNumber + \"/docs\";\n\n  return {\n    url: url,\n    path: nestedPath,\n  };\n}\n\nfunction urlAndPathFrom(path: string[]): UrlAndPath {\n  path = path.slice(); // Make a copy.\n  let url = \"\";\n  if (viewMode === ViewMode.Package) {\n    if (path.length > 0) {\n      if (isSdkPath(path)) {\n        url = SDK_LIBS_URL;\n        path = path.slice(sdkPath!.length + 1); // Also drop the 'lib'.\n      } else if (isPackagePath(path)) {\n        const urlPath = buildPackageUrlAndPath(path);\n        url = urlPath.url;\n        // We don't return immediately so we can manipulate the path below.\n        path = urlPath.path;\n      } else {\n        // Replace the 'src' with the package name.\n        path[0] = packageName;\n      }\n    }\n  } else if (path.length > 0 && path[0] === \"lib\") {\n    // Get rid of the first \"lib\" entry.\n    path.shift();\n  }\n  const len = path.length;\n  if (len === 0) {\n    return {\n      url: url,\n      path: path,\n    };\n  }\n  path[len - 1] = libraryName(path[len - 1]);\n  if (len === 1) {\n    return {\n      url: url,\n      path: path,\n    };\n  }\n  if (path[len - 1] === path[len - 2]) {\n    // Something like lib/net/net.toit.\n    // In that case the net.toit is presented as 'lib.net' (as this is how it would\n    // be imported).\n    path.length--;\n  }\n  return {\n    url: url,\n    path: path,\n  };\n}\n\nfunction shapeFrom(toitShape: ToitShape): Shape {\n  return {\n    arity: toitShape.arity,\n    totalBlockCount: toitShape.total_block_count,\n    namedBlockCount: toitShape.named_block_count,\n    names: toitShape.names,\n  };\n}\n\nfunction linkRefKindFrom(toitDocRefKind: ToitDocRefKind): LinkRefKind {\n  switch (toitDocRefKind) {\n    case \"other\":\n      return \"other\";\n    case \"class\":\n      return \"class\";\n    case \"global\":\n      return \"global\";\n    case \"global-method\":\n      return \"global-method\";\n    case \"static-method\":\n      return \"static-method\";\n    case \"constructor\":\n      return \"constructor\";\n    case \"factory\":\n      return \"factory\";\n    case \"method\":\n      return \"method\";\n    case \"field\":\n      return \"field\";\n    default:\n      console.error(\"Unknown ToitDocRefKind\", toitDocRefKind);\n      return \"unknown\";\n  }\n}\n\nfunction linkRefFrom(toitDocRef: ToitDocRef): LinkRef {\n  let url = \"\";\n  let path = [] as string[];\n  if (toitDocRef.path) {\n    const urlPath = urlAndPathFrom(toitDocRef.path);\n    url = urlPath.url;\n    path = urlPath.path;\n  }\n\n  return {\n    kind: linkRefKindFrom(toitDocRef.kind),\n    baseUrl: url,\n    path: path,\n    holder: toitDocRef.holder || \"\",\n    name: toitDocRef.name,\n    shape: toitDocRef.shape ? shapeFrom(toitDocRef.shape) : undefined,\n  };\n}\n\nfunction docExpressionFrom(toitExpression: ToitExpression): DocExpression {\n  switch (toitExpression.object_type) {\n    case OBJECT_TYPE_EXPRESSION_CODE:\n      return {\n        type: DOC_EXPRESSION_CODE,\n        text: toitExpression.text,\n      };\n    case OBJECT_TYPE_EXPRESSION_TEXT:\n      return {\n        type: DOC_EXPRESSION_TEXT,\n        text: toitExpression.text,\n      };\n    case OBJECT_TYPE_TOITDOCREF:\n      return {\n        type: DOC_DOCREF,\n        text: toitExpression.text,\n        reference: linkRefFrom(toitExpression),\n      };\n  }\n}\n\nfunction docStatementFrom(toitStatement: ToitStatement): DocStatement {\n  switch (toitStatement.object_type) {\n    case OBJECT_TYPE_STATEMENT_PARAGRAPH:\n      return {\n        type: DOC_STATEMENT_PARAGRAPH,\n        expressions: toitStatement.expressions.map((toitExpression) =>\n          docExpressionFrom(toitExpression)\n        ),\n      };\n    case OBJECT_TYPE_STATEMENT_ITEMIZED:\n      return {\n        type: DOC_STATEMENT_ITEMIZED,\n        items: toitStatement.items.map((toitItem) => {\n          return {\n            type: DOC_STATEMENT_ITEM,\n            statements: toitItem.statements.map((s) => docStatementFrom(s)),\n          };\n        }),\n      };\n    case OBJECT_TYPE_STATEMENT_CODE_SECTION:\n      return {\n        type: DOC_STATEMENT_CODE_SECTION,\n        text: toitStatement.text,\n      };\n  }\n}\n\nfunction docSectionFrom(toitSection: ToitSection): DocSection {\n  return {\n    title: toitSection.title,\n    statements: toitSection.statements.map((toitStatement) =>\n      docStatementFrom(toitStatement)\n    ),\n  };\n}\n\nfunction docFrom(toitDoc: ToitDoc): Doc {\n  return toitDoc.map((toitSection) => docSectionFrom(toitSection));\n}\n\nfunction referenceFrom(toitReference: ToitReference): TopLevelItemRef {\n  const urlPath = urlAndPathFrom(toitReference.path);\n  return {\n    name: toitReference.name,\n    libraryRef: {\n      name: toitReference.name,\n      baseUrl: urlPath.url,\n      path: urlPath.path,\n    },\n  };\n}\n\nfunction typeFrom(toitType: ToitType): Type {\n  const reference = toitType.reference\n    ? referenceFrom(toitType.reference)\n    : undefined;\n\n  return {\n    isNone: toitType.is_none,\n    isAny: toitType.is_any,\n    isBlock: toitType.is_block,\n    reference: reference,\n  };\n}\n\nfunction parameterFrom(toitParameter: ToitParameter): Parameter {\n  return {\n    name: toitParameter.name,\n    isBlock: toitParameter.is_block,\n    isNamed: toitParameter.is_named,\n    isRequired: toitParameter.is_required,\n    type: typeFrom(toitParameter.type),\n  };\n}\n\nfunction fieldFrom(\n  toitField: ToitField,\n  classRef: TopLevelItemRef,\n  offset: number\n): Field {\n  return {\n    name: toitField.name,\n    id: {\n      name: toitField.name,\n      classRef: classRef,\n      type: \"field\",\n      offset: offset,\n    },\n    type: typeFrom(toitField.type),\n    toitdoc: toitField.toitdoc ? docFrom(toitField.toitdoc) : undefined,\n    isInherited: toitField.is_inherited,\n  };\n}\n\nfunction methodFrom(\n  toitMethod: ToitFunction,\n  classRef: TopLevelItemRef,\n  type: ClassMemberType,\n  offset: number\n): Method {\n  const parameters = toitMethod.parameters.map((parameter) =>\n    parameterFrom(parameter)\n  );\n\n  return {\n    name: toitMethod.name,\n    id: {\n      name: toitMethod.name,\n      classRef: classRef,\n      type: type,\n      offset: offset,\n    },\n    parameters: parameters,\n    returnType: typeFrom(toitMethod.return_type),\n    toitdoc: toitMethod.toitdoc ? docFrom(toitMethod.toitdoc) : undefined,\n    shape: toitMethod.shape ? shapeFrom(toitMethod.shape) : undefined,\n    isInherited: toitMethod.is_inherited,\n  };\n}\n\nfunction classKindFrom(kind: ToitClassKind): ClassKind {\n  switch (kind) {\n    case TOIT_CLASS_KIND_CLASS:\n      return CLASS_KIND_CLASS;\n    case TOIT_CLASS_KIND_INTERFACE:\n      return CLASS_KIND_INTERFACE;\n    case TOIT_CLASS_KIND_MIXIN:\n      return CLASS_KIND_MIXIN;\n  }\n}\n\nfunction classFrom(\n  toitClass: ToitClass,\n  libraryRef: TopLevelRef,\n  type: TopLevelItemType,\n  offset: number\n): Class {\n  const classId = {\n    name: toitClass.name,\n    libraryRef: libraryRef,\n    type: type,\n    offset: offset,\n  };\n\n  const extend = toitClass.extends\n    ? referenceFrom(toitClass.extends)\n    : undefined;\n\n  const interfaces = toitClass.interfaces.map((inter, index) =>\n    referenceFrom(inter)\n  );\n  const mixins = toitClass.mixins.map((mixin, index) => referenceFrom(mixin));\n\n  const fields = toitClass.structure.fields.map((field, index) =>\n    fieldFrom(field, classId, index)\n  );\n  const constructors = toitClass.structure.constructors\n    .concat(toitClass.structure.factories)\n    .map((constructor, index) =>\n      methodFrom(constructor, classId, \"constructor\", index)\n    );\n  const statics = toitClass.structure.statics.map((statik, index) =>\n    methodFrom(statik, classId, \"static\", index)\n  );\n  const methods = toitClass.structure.methods.map((method, index) =>\n    methodFrom(method, classId, \"method\", index)\n  );\n\n  return {\n    name: toitClass.name,\n    id: classId,\n    kind: classKindFrom(toitClass.kind),\n    extends: extend,\n    interfaces: interfaces,\n    mixins: mixins,\n    fields: fields,\n    constructors: constructors,\n    statics: statics,\n    methods: methods,\n    toitdoc: toitClass.toitdoc ? docFrom(toitClass.toitdoc) : undefined,\n  };\n}\n\nfunction globalFrom(\n  toitGlobal: ToitGlobal,\n  libraryRef: TopLevelRef,\n  type: TopLevelItemType,\n  offset: number\n): Global {\n  return {\n    name: toitGlobal.name,\n    id: {\n      name: toitGlobal.name,\n      libraryRef: libraryRef,\n      type: type,\n      offset: offset,\n    },\n    toitdoc: toitGlobal.toitdoc ? docFrom(toitGlobal.toitdoc) : undefined,\n  };\n}\n\nfunction functionFrom(\n  toitFunction: ToitFunction,\n  libraryRef: TopLevelRef,\n  type: TopLevelItemType,\n  offset: number\n): Function {\n  const parameters = toitFunction.parameters.map((parameter) =>\n    parameterFrom(parameter)\n  );\n\n  return {\n    name: toitFunction.name,\n    id: {\n      name: toitFunction.name,\n      libraryRef: libraryRef,\n      type: type,\n      offset: offset,\n    },\n    parameters: parameters,\n    returnType: typeFrom(toitFunction.return_type),\n    toitdoc: toitFunction.toitdoc ? docFrom(toitFunction.toitdoc) : undefined,\n    shape: toitFunction.shape ? shapeFrom(toitFunction.shape) : undefined,\n    isInherited: false,\n  };\n}\n\nfunction categoryFrom(category: ToitCategory): Category {\n  switch (category) {\n    case TOIT_CATEGORY_FUNDAMENTAL:\n      return CATEGORY_FUNDAMENTAL;\n    case TOIT_CATEGORY_JUST_THERE:\n      return CATEGORY_JUST_THERE;\n    case TOIT_CATEGORY_MISC:\n      return CATEGORY_MISC;\n    case TOIT_CATEGORY_SUB:\n      return CATEGORY_SUB;\n  }\n}\n\nfunction libraryFromModule(toitModule: ToitModule, path: string[]): Library {\n  const name = libraryName(toitModule.name);\n  const libraryId = { name: name, baseUrl: \"\", path: [...path, name] };\n\n  let classes = {} as Classes;\n  let interfaces = {} as Classes;\n  let mixins = {} as Classes;\n  let exportedClasses = {} as Classes;\n  let exportedInterfaces = {} as Classes;\n  let exportedMixins = {} as Classes;\n\n  toitModule.classes.forEach((klass, index) => {\n    classes = {\n      ...classes,\n      [klass.name]: classFrom(klass, libraryId, \"class\", index),\n    };\n  });\n  toitModule.interfaces.forEach((inter, index) => {\n    interfaces = {\n      ...interfaces,\n      [inter.name]: classFrom(inter, libraryId, \"class\", index),\n    };\n  });\n  toitModule.mixins.forEach((mixin, index) => {\n    mixins = {\n      ...mixins,\n      [mixin.name]: classFrom(mixin, libraryId, \"class\", index),\n    };\n  });\n  toitModule.export_classes.forEach((klass, index) => {\n    exportedClasses = {\n      ...exportedClasses,\n      [klass.name]: classFrom(klass, libraryId, \"exported_class\", index),\n    };\n  });\n  toitModule.export_interfaces.forEach((inter, index) => {\n    exportedInterfaces = {\n      ...exportedInterfaces,\n      [inter.name]: classFrom(inter, libraryId, \"exported_class\", index),\n    };\n  });\n  toitModule.export_mixins.forEach((mixin, index) => {\n    exportedMixins = {\n      ...exportedMixins,\n      [mixin.name]: classFrom(mixin, libraryId, \"exported_class\", index),\n    };\n  });\n  const globals = toitModule.globals.map((global, index) =>\n    globalFrom(global, libraryId, \"global\", index)\n  );\n  const exportedGlobals = toitModule.export_globals.map((global, index) =>\n    globalFrom(global, libraryId, \"exported_global\", index)\n  );\n  const functions = toitModule.functions.map((f, index) =>\n    functionFrom(f, libraryId, \"function\", index)\n  );\n  const exportedFunctions = toitModule.export_functions.map((f, index) =>\n    functionFrom(f, libraryId, \"exported_function\", index)\n  );\n\n  return {\n    name: name,\n    id: libraryId,\n    libraries: {},\n    classes: classes,\n    interfaces: interfaces,\n    mixins: mixins,\n    exportedClasses: exportedClasses,\n    exportedInterfaces: exportedInterfaces,\n    exportedMixins: exportedMixins,\n    globals: globals,\n    exportedGlobals: exportedGlobals,\n    functions: functions,\n    exportedFunctions: exportedFunctions,\n    toitdoc: toitModule.toitdoc ? docFrom(toitModule.toitdoc) : undefined,\n    category: categoryFrom(toitModule.category),\n  };\n}\n\nfunction mergeLibraries(library: Library, otherLibrary: Library): Library {\n  if (library.name !== otherLibrary.name) {\n    throw Error(\"Only libraries with the same name can be merged\");\n  }\n  if (JSON.stringify(library.id) !== JSON.stringify(otherLibrary.id)) {\n    throw Error(\"Only libraries with the same id can be merged\");\n  }\n  return {\n    name: library.name,\n    id: library.id,\n    libraries: { ...library.libraries, ...otherLibrary.libraries },\n    classes: { ...library.classes, ...otherLibrary.classes },\n    interfaces: { ...library.interfaces, ...otherLibrary.interfaces },\n    mixins: { ...library.mixins, ...otherLibrary.mixins },\n    exportedClasses: {\n      ...library.exportedClasses,\n      ...otherLibrary.exportedClasses,\n    },\n    exportedInterfaces: {\n      ...library.exportedInterfaces,\n      ...otherLibrary.exportedInterfaces,\n    },\n    exportedMixins: {\n      ...library.exportedMixins,\n      ...otherLibrary.exportedMixins,\n    },\n    globals: { ...library.globals, ...otherLibrary.globals },\n    exportedGlobals: {\n      ...library.exportedGlobals,\n      ...otherLibrary.exportedGlobals,\n    },\n    functions: { ...library.functions, ...otherLibrary.functions },\n    exportedFunctions: {\n      ...library.exportedFunctions,\n      ...otherLibrary.exportedFunctions,\n    },\n    // TODO(florian): we currently just pick the toitdoc of the first\n    // library.\n    toitdoc: library.toitdoc || otherLibrary.toitdoc,\n    // TODO(florian): we currently just pick the category of the first\n    // library.\n    category: library.category,\n  };\n}\n\nfunction libraryFromLibrary(\n  toitLibrary: ToitLibrary,\n  path: string[],\n  root?: boolean\n): Library {\n  let libraries = {} as Libraries;\n\n  const name = toitLibrary.name;\n  const libraryPath = root ? [] : [...path, name];\n\n  Object.values(toitLibrary.libraries).forEach((lib) => {\n    if (libraries[lib.name]) {\n      console.log(\"Name clash\", lib.name);\n    }\n    libraries = {\n      ...libraries,\n      [lib.name]: libraryFromLibrary(lib, libraryPath),\n    };\n  });\n\n  let libraryContent = undefined as Library | undefined;\n\n  Object.values(toitLibrary.modules).forEach((module) => {\n    const subLibraryName = libraryName(module.name);\n    if (subLibraryName === name) {\n      libraryContent = libraryFromModule(module, path);\n      return;\n    }\n    if (libraries[subLibraryName]) {\n      console.log(\"Name clash\", subLibraryName);\n      const libLibrary = libraries[subLibraryName];\n      libraries = {\n        ...libraries,\n        [subLibraryName]: mergeLibraries(\n          libLibrary,\n          libraryFromModule(module, libraryPath)\n        ),\n      };\n      return;\n    }\n    libraries = {\n      ...libraries,\n      [subLibraryName]: libraryFromModule(module, libraryPath),\n    };\n  });\n\n  return {\n    name: name,\n    id: { name: name, baseUrl: \"\", path: libraryPath },\n    libraries: libraries,\n    classes: libraryContent ? libraryContent.classes : {},\n    interfaces: libraryContent ? libraryContent.interfaces : {},\n    mixins: libraryContent ? libraryContent.mixins : {},\n    exportedClasses: libraryContent ? libraryContent.exportedClasses : {},\n    exportedInterfaces: libraryContent ? libraryContent.exportedInterfaces : {},\n    exportedMixins: libraryContent ? libraryContent.exportedMixins : {},\n    globals: libraryContent ? libraryContent.globals : [],\n    exportedGlobals: libraryContent ? libraryContent.exportedGlobals : [],\n    functions: libraryContent ? libraryContent.functions : [],\n    exportedFunctions: libraryContent ? libraryContent.exportedFunctions : [],\n    toitdoc: libraryContent ? libraryContent.toitdoc : undefined,\n    category: categoryFrom(toitLibrary.category),\n  };\n}\n\nfunction appendToIDPath(lib: Library, prefix: string): void {\n  lib.id.path.unshift(prefix);\n  for (const name in lib.libraries) {\n    appendToIDPath(lib.libraries[name], prefix);\n  }\n}\n\nfunction foldLibrary(topLibrary: Library, subLibrary: Library): void {\n  if (topLibrary.libraries[subLibrary.name]) {\n    console.log(\n      \"name clash when re-order libraries in package mode\",\n      subLibrary.name\n    );\n  }\n  topLibrary.libraries[subLibrary.name] = subLibrary;\n  appendToIDPath(subLibrary, topLibrary.name);\n}\n\nexport function modelFrom(\n  rootLibrary: ToitLibrary,\n  viewMode: ViewMode,\n  packageName: string,\n  generatorSdkPath: string[] | undefined,\n  generatorPackagesPath: string[] | undefined,\n  generatorPackageNames: { [name: string]: string } | undefined\n): Libraries {\n  sdkPath = generatorSdkPath;\n  packagesPath = generatorPackagesPath;\n  packageNames = generatorPackageNames;\n\n  let model = libraryFromLibrary(rootLibrary, [], true).libraries;\n\n  // In package mode if we have more libraries top level, we will re-order the libraries.\n  // Such that the library named the same as the package will be the top-level library.\n  if (viewMode === ViewMode.Package) {\n    // @TODO(jesper): Changing the toitdoc generator to know of package names would make it\n    //                possible to change it there instead.\n    //                That way import/module logic would be encapsuled in the compiler.\n    let rootLibrary = model[packageName];\n    if (rootLibrary === undefined) {\n      // This is the case of unstructure mode. here we make a fake rootLibrary and fold all\n      // top-libraries under that rootLibrary.\n      rootLibrary = {\n        name: packageName,\n        id: { name: packageName, baseUrl: \"\", path: [packageName] },\n        libraries: {},\n        classes: {},\n        interfaces: {},\n        mixins: {},\n        exportedClasses: {},\n        exportedInterfaces: {},\n        exportedMixins: {},\n        globals: [],\n        exportedGlobals: [],\n        functions: [],\n        exportedFunctions: [],\n        toitdoc: [],\n        category: \"misc\",\n      };\n    }\n    const topLibraries = Object.keys(model);\n    topLibraries.forEach((name) => {\n      if (name === packageName) {\n        return;\n      }\n      foldLibrary(rootLibrary, model[name]);\n      if (rootLibrary.libraries[name]) {\n        console.log(\"name clash when re-order libraries in package mode\", name);\n      }\n    });\n    model = { [packageName]: rootLibrary };\n  }\n  return model;\n}\n","export const OBJECT_TYPE_SECTION = \"section\";\nexport const OBJECT_TYPE_STATEMENT_CODE_SECTION = \"statement_code_section\";\nexport const OBJECT_TYPE_STATEMENT_ITEMIZED = \"statement_itemized\";\nexport const OBJECT_TYPE_STATEMENT_ITEM = \"statement_item\";\nexport const OBJECT_TYPE_STATEMENT_PARAGRAPH = \"statement_paragraph\";\nexport const OBJECT_TYPE_EXPRESSION_CODE = \"expression_code\";\nexport const OBJECT_TYPE_EXPRESSION_TEXT = \"expression_text\";\nexport const OBJECT_TYPE_TOITDOCREF = \"toitdocref\";\nexport const OBJECT_TYPE_FUNCTION = \"function\";\nexport const OBJECT_TYPE_PARAMETER = \"parameter\";\nexport const OBJECT_TYPE_FIELD = \"field\";\nexport const OBJECT_TYPE_CLASS = \"class\";\nexport const OBJECT_TYPE_MODULE = \"module\";\nexport const OBJECT_TYPE_GLOBAL = \"global\";\nexport const OBJECT_TYPE_LIBRARY = \"library\";\nexport const OBJECT_TYPE_EXPRESSION = \"expression\";\nexport const OBJECT_TYPE_SHAPE = \"shape\";\n\nexport type ObjectTypeExpression =\n  | typeof OBJECT_TYPE_EXPRESSION_CODE\n  | typeof OBJECT_TYPE_EXPRESSION_TEXT\n  | typeof OBJECT_TYPE_TOITDOCREF;\n\nexport interface ToitObject {\n  sdk_version: string;\n  pkg_name?: string;\n  sdk_path?: string[];\n  packages_path?: string[];\n  package_names?: { [key: string]: string };\n  libraries: ToitLibraries;\n}\n\nexport const TOIT_CATEGORY_FUNDAMENTAL = \"fundamental\";\nexport const TOIT_CATEGORY_JUST_THERE = \"just_there\";\nexport const TOIT_CATEGORY_MISC = \"misc\";\nexport const TOIT_CATEGORY_SUB = \"sub\";\n\nexport type ToitCategory =\n  | typeof TOIT_CATEGORY_FUNDAMENTAL\n  | typeof TOIT_CATEGORY_JUST_THERE\n  | typeof TOIT_CATEGORY_MISC\n  | typeof TOIT_CATEGORY_SUB;\n\nexport const TOIT_CLASS_KIND_CLASS = \"class\";\nexport const TOIT_CLASS_KIND_INTERFACE = \"interface\";\nexport const TOIT_CLASS_KIND_MIXIN = \"mixin\";\n\nexport type ToitClassKind =\n  | typeof TOIT_CLASS_KIND_CLASS\n  | typeof TOIT_CLASS_KIND_INTERFACE\n  | typeof TOIT_CLASS_KIND_MIXIN;\n\nexport interface ToitLibrary {\n  object_type: typeof OBJECT_TYPE_LIBRARY;\n  modules: ToitModules;\n  path: string[];\n  libraries: ToitLibraries;\n  name: string;\n  category: ToitCategory;\n}\n\nexport interface ToitLibraries {\n  [libraryName: string]: ToitLibrary;\n}\n\nexport interface ToitType {\n  object_type: \"reference\";\n  is_none: boolean;\n  is_any: boolean;\n  is_block: boolean;\n  reference: ToitReference;\n}\n\nexport interface ToitParameter {\n  object_type: typeof OBJECT_TYPE_PARAMETER;\n  name: string;\n  is_block: boolean;\n  is_named: boolean;\n  is_required: boolean;\n  type: ToitType;\n}\n\nexport interface ToitReference {\n  object_type: \"reference\";\n  name: string;\n  path: string[];\n}\n\nexport interface ToitModule {\n  object_type: typeof OBJECT_TYPE_MODULE;\n  name: string;\n  classes: ToitClass[];\n  interfaces: ToitClass[];\n  mixins: ToitClass[];\n  export_classes: ToitClass[];\n  export_interfaces: ToitClass[];\n  export_mixins: ToitClass[];\n  globals: ToitGlobal[];\n  export_globals: ToitGlobal[];\n  functions: ToitFunction[];\n  export_functions: ToitFunction[];\n  toitdoc?: ToitDoc;\n  category: ToitCategory;\n}\n\nexport interface ToitModules {\n  [moduleName: string]: ToitModule;\n}\n\nexport interface ToitGlobal {\n  object_type: typeof OBJECT_TYPE_GLOBAL;\n  name: string;\n  toitdoc: ToitDoc | null;\n}\n\nexport interface ToitFunction {\n  object_type: typeof OBJECT_TYPE_FUNCTION;\n  name: string;\n  parameters: ToitParameter[];\n  return_type: ToitType;\n  toitdoc: ToitDoc | null;\n  shape?: ToitShape;\n  is_inherited: boolean;\n}\n\nexport interface ToitClass {\n  object_type: typeof OBJECT_TYPE_CLASS;\n  name: string;\n  kind: ToitClassKind;\n  toitdoc: ToitDoc | null;\n  structure: ToitStructure;\n  extends: ToitReference;\n  interfaces: ToitReference[];\n  mixins: ToitReference[];\n}\n\nexport interface ToitStructure {\n  statics: ToitFunction[];\n  constructors: ToitFunction[];\n  factories: ToitFunction[];\n  fields: ToitField[];\n  methods: ToitFunction[];\n}\n\nexport interface ToitField {\n  object_type: typeof OBJECT_TYPE_FIELD;\n  name: string;\n  type: ToitType;\n  toitdoc: ToitDoc | null;\n  is_inherited: boolean;\n}\n\nexport interface ToitShape {\n  object_type: typeof OBJECT_TYPE_SHAPE;\n  arity: number;\n  total_block_count: number;\n  named_block_count: number;\n  names: string[];\n}\n\n// ToitDoc related\n\nexport type ToitDoc = ToitSection[];\n\nexport interface ToitSection {\n  object_type: typeof OBJECT_TYPE_SECTION;\n  title: string | null;\n  statements: ToitStatement[];\n}\n\nexport type ToitStatement =\n  | ToitStatementParagraph\n  | ToitStatementItemized\n  | ToitStatementCodeSection;\n\nexport interface ToitStatementItemized {\n  object_type: typeof OBJECT_TYPE_STATEMENT_ITEMIZED;\n  items: ToitStatementItem[];\n}\n\nexport interface ToitStatementItem {\n  object_type: typeof OBJECT_TYPE_STATEMENT_ITEM;\n  statements: ToitStatement[];\n}\n\nexport interface ToitStatementCodeSection {\n  object_type: typeof OBJECT_TYPE_STATEMENT_CODE_SECTION;\n  text: string;\n}\n\nexport interface ToitStatementParagraph {\n  object_type: typeof OBJECT_TYPE_STATEMENT_PARAGRAPH;\n  expressions: ToitExpression[];\n}\n\nexport type ToitExpression =\n  | ToitExpressionCode\n  | ToitExpressionText\n  | ToitDocRef;\n\nexport interface ToitExpressionCode {\n  object_type: typeof OBJECT_TYPE_EXPRESSION_CODE;\n  text: string;\n}\n\nexport interface ToitExpressionText {\n  object_type: typeof OBJECT_TYPE_EXPRESSION_TEXT;\n  text: string;\n}\n\nexport type ToitDocRefKind =\n  | \"other\"\n  | \"class\"\n  | \"global\"\n  | \"global-method\"\n  | \"static-method\"\n  | \"constructor\"\n  | \"factory\"\n  | \"method\"\n  | \"field\"\n  | \"\";\n\nexport interface ToitDocRef {\n  object_type: typeof OBJECT_TYPE_TOITDOCREF;\n  kind: ToitDocRefKind;\n  text: string;\n  path: string[] | null;\n  holder: string | null;\n  name: string;\n  shape: ToitShape | null;\n}\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport {\n  classUrlFromRef,\n  functionUrlFromRef,\n  libraryUrlFromRef,\n  methodUrlFromRef,\n} from \"../misc/util\";\nimport {\n  Class,\n  Function,\n  Libraries,\n  Library,\n  Method,\n  Parameter,\n  Type,\n} from \"./model\";\nimport { ClassMemberRef, TopLevelItemRef, TopLevelRef } from \"./reference\";\n\nfunction typeString(type: Type): string {\n  if (type.isNone) {\n    return \"none\";\n  }\n  if (type.isAny) {\n    return \"any\";\n  }\n  if (type.isBlock) {\n    return \"[block]\";\n  }\n  return type.reference?.name || \"unknown\";\n}\n\nfunction parametersString(parameters: Parameter[]): string {\n  return parameters\n    .map((parameter) => {\n      let param = parameter.name;\n      if (parameter.isNamed) {\n        param = \"--\" + param;\n      }\n      if (parameter.isBlock) {\n        param = \"[\" + param + \"]\";\n        return param;\n      }\n      return param + \"/\" + typeString(parameter.type);\n    })\n    .join(\" \");\n}\n\nfunction flattenMethod(\n  libraries: Libraries,\n  method: Method,\n  result: SearchableModel\n): void {\n  result.methods.push({\n    name: method.name,\n    ref: method.id,\n    className: method.id.classRef.name,\n    parameters: parametersString(method.parameters),\n    url: methodUrlFromRef(libraries, method.id),\n    type: \"method\",\n  });\n}\n\nfunction flattenFunction(\n  libraries: Libraries,\n  fhunction: Function,\n  result: SearchableModel\n): void {\n  result.functions.push({\n    name: fhunction.name,\n    ref: fhunction.id,\n    parameters: parametersString(fhunction.parameters),\n    url: functionUrlFromRef(libraries, fhunction.id),\n    type: \"function\",\n  });\n}\n\nfunction flattenClass(\n  libraries: Libraries,\n  klass: Class,\n  result: SearchableModel\n): void {\n  result.classes.push({\n    name: klass.name,\n    ref: klass.id,\n    url: classUrlFromRef(klass.id),\n    type: \"class\",\n  });\n\n  klass.statics\n    .concat(klass.methods)\n    .forEach((m) => flattenMethod(libraries, m, result));\n}\n\nfunction flattenInterface(\n  libraries: Libraries,\n  inter: Class,\n  result: SearchableModel\n): void {\n  result.interfaces.push({\n    name: inter.name,\n    ref: inter.id,\n    url: classUrlFromRef(inter.id),\n    type: \"interface\",\n  });\n\n  inter.statics\n    .concat(inter.methods)\n    .forEach((m) => flattenMethod(libraries, m, result));\n}\n\nfunction flattenMixin(\n  libraries: Libraries,\n  mixin: Class,\n  result: SearchableModel\n): void {\n  result.mixins.push({\n    name: mixin.name,\n    ref: mixin.id,\n    url: classUrlFromRef(mixin.id),\n    type: \"mixin\",\n  });\n\n  mixin.statics\n    .concat(mixin.methods)\n    .forEach((m) => flattenMethod(libraries, m, result));\n}\n\nfunction flattenLibrary(\n  libraries: Libraries,\n  library: Library,\n  result: SearchableModel\n): void {\n  result.libraries.push({\n    name: library.name,\n    ref: library.id,\n    url: libraryUrlFromRef(library.id),\n    type: \"library\",\n  });\n\n  Object.values(library.libraries).forEach((m) =>\n    flattenLibrary(libraries, m, result)\n  );\n  Object.values(library.interfaces).forEach((inter) =>\n    flattenInterface(libraries, inter, result)\n  );\n  Object.values(library.mixins).forEach((mixin) =>\n    flattenMixin(libraries, mixin, result)\n  );\n  Object.values(library.classes).forEach((c) =>\n    flattenClass(libraries, c, result)\n  );\n  Object.values(library.functions).forEach((f) =>\n    flattenFunction(libraries, f, result)\n  );\n}\n\nexport function flatten(libraries: Libraries | undefined): SearchableModel {\n  const result = {\n    libraries: [],\n    classes: [],\n    interfaces: [],\n    mixins: [],\n    functions: [],\n    methods: [],\n  };\n  if (!libraries) {\n    return result;\n  }\n\n  Object.values(libraries).forEach((m) => flattenLibrary(libraries, m, result));\n  return result;\n}\n\ntype SearchableType =\n  | \"library\"\n  | \"class\"\n  | \"interface\"\n  | \"mixin\"\n  | \"function\"\n  | \"method\";\n\nexport interface Searchable {\n  type: SearchableType;\n  name: string;\n  url: string;\n}\n\nexport interface SearchableModel {\n  libraries: SearchableLibrary[];\n  classes: SearchableClass[];\n  interfaces: SearchableInterface[];\n  mixins: SearchableMixin[];\n  functions: SearchableFunction[];\n  methods: SearchableMethod[];\n}\n\nexport interface SearchableLibrary extends Searchable {\n  name: string;\n  ref: TopLevelRef;\n  url: string;\n  type: \"library\";\n}\n\nexport interface SearchableClass extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  url: string;\n  type: \"class\";\n}\n\nexport interface SearchableInterface extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  url: string;\n  type: \"interface\";\n}\n\nexport interface SearchableMixin extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  url: string;\n  type: \"mixin\";\n}\n\nexport interface SearchableFunction extends Searchable {\n  name: string;\n  ref: TopLevelItemRef;\n  parameters: string;\n  url: string;\n  type: \"function\";\n}\n\nexport interface SearchableMethod extends Searchable {\n  name: string;\n  ref: ClassMemberRef;\n  className: string;\n  parameters: string;\n  url: string;\n  type: \"method\";\n}\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  ViewMode,\n  getMetaValue,\n  packageName,\n  setPackageName,\n  setViewMode,\n  viewMode,\n} from \"../App\";\nimport { modelFrom } from \"../generator/convert\";\nimport { ToitObject } from \"../generator/doc\";\nimport { Libraries } from \"../model/model\";\nimport { SearchableModel, flatten } from \"../model/search\";\n\nexport interface RootState {\n  doc: DocState;\n}\n\nexport const fetchDoc = createAsyncThunk(\n  \"docdata/fetch\",\n  async (version: string) => {\n    const docPath =\n      process.env.PUBLIC_URL + getMetaValue(\"toitdoc-path\", \"/sdk/\");\n    const response = await fetch(docPath + version + \".json\");\n    return (await response.json()) as ToitObject;\n  }\n);\n\nexport interface DocState {\n  sdkVersion?: string;\n  version?: string;\n  libraries?: Libraries;\n  searchableModel?: SearchableModel;\n  error?: string;\n}\n\nconst initialState: DocState = {\n  sdkVersion: undefined,\n  libraries: undefined,\n  version: undefined,\n  searchableModel: undefined,\n  error: undefined,\n};\n\nexport const doc = createSlice({\n  name: \"doc\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    let rootPath = getMetaValue(\"toitdoc-root-library\", \"lib\");\n    builder\n      .addCase(fetchDoc.pending, (state, action) => {\n        state = initialState;\n      })\n      .addCase(fetchDoc.fulfilled, (state, action) => {\n        const sdkVersion = action.payload.sdk_version;\n        const sdkPath = action.payload.sdk_path;\n        const packagesPath = action.payload.packages_path;\n        const packageNames = action.payload.package_names;\n        state.sdkVersion = sdkVersion;\n        // Instead of getting the root-path, package-name and view-mode through a header,\n        // get/deduce it from the json file.\n        const pkgName = action.payload.pkg_name;\n        if (pkgName) {\n          setPackageName(pkgName);\n          setViewMode(ViewMode.Package);\n          rootPath = \"src\";\n        }\n        state.libraries = modelFrom(\n          action.payload.libraries[rootPath],\n          viewMode,\n          packageName,\n          sdkPath,\n          packagesPath,\n          packageNames\n        );\n        state.searchableModel = flatten(state.libraries);\n      })\n      .addCase(fetchDoc.rejected, (state, action) => {\n        state.error = action.error.message;\n      });\n  },\n});\n","// Copyright (C) 2020 Toitware ApS. All rights reserved.\n\nimport styled from \"@emotion/styled\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AnyAction, ThunkDispatch } from \"@reduxjs/toolkit\";\nimport CookieConsent from \"@toitware/cookie-consent\";\nimport React, { Component, useEffect, useMemo } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  BrowserRouter,\n  Redirect,\n  Route,\n  RouteComponentProps,\n  useLocation,\n} from \"react-router-dom\";\nimport { length, sideBarTheme, theme } from \"./assets/theme\";\nimport \"./assets/typography.css\";\nimport ErrorBoundary from \"./components/ErrorPage\";\nimport HeaderBar from \"./components/header/HeaderBar\";\nimport { ClassInfoParams } from \"./components/main/ClassInfoView\";\nimport { LibraryInfoParams } from \"./components/main/LibraryInfoView\";\nimport WelcomePage from \"./components/main/WelcomePage\";\nimport NavigationView, {\n  NavigationParams,\n} from \"./components/navigation/NavigationView\";\nimport ThemeProvider from \"./components/ThemeProvider\";\nimport ClassInfo from \"./containers/main/ClassInfo\";\nimport LibraryInfo from \"./containers/main/LibraryInfo\";\nimport { Libraries } from \"./model/model\";\nimport { fetchDoc, RootState } from \"./redux/doc\";\n\nconst mapStateToProps = (\n  state: RootState\n): Pick<AppProps, \"libraries\" | \"version\" | \"sdkVersion\"> => {\n  return {\n    version: state.doc.version,\n    sdkVersion: state.doc.sdkVersion,\n    libraries: state.doc.libraries,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<RootState, void, AnyAction>\n): Pick<AppProps, \"fetchDoc\"> => {\n  return {\n    fetchDoc: (version: string): void => {\n      void dispatch(fetchDoc(version));\n    },\n  };\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    \"@global\": {\n      body: {\n        margin: 0,\n        fontFamily: \"Roboto\",\n      },\n\n      code: {\n        fontFamily: \"monospace\",\n        fontSize: 14,\n      },\n\n      \"*\": {\n        boxSizing: \"border-box\",\n      },\n      \"a:link\": {\n        color: theme.palette.primary.main,\n        textDecoration: \"none\",\n      },\n      \"a:visited\": {\n        color: theme.palette.primary.main,\n        textDecoration: \"none\",\n      },\n      \"a:hover\": {\n        textDecoration: \"underline\",\n      },\n    },\n    appContainer: {\n      position: \"relative\",\n    },\n  })\n);\n\nconst ContentWrapper = styled.div`\n  padding-top: calc(3rem + ${({ theme }) => length(theme.layout.headerHeight)});\n  margin-left: ${({ theme }) => length(theme.layout.sidebarWidth)};\n`;\n\nconst Content = styled.div`\n  padding-left: 3rem;\n  padding-right: 3rem;\n  min-height: calc(100vh - ${({ theme }) => length(theme.layout.footerHeight)});\n  /* max-width: 44rem; The width I'd actually like to use once the sidebar is implemented */\n  max-width: 55rem;\n  margin: 0 auto;\n\n  *[id] {\n    /* Make sure that anchor links aren't hidden behind the header */\n    scroll-margin-top: ${({ theme }) => length(theme.layout.headerHeight)};\n  }\n`;\n\nconst Footer = styled.footer`\n  text-align: center;\n  padding: 0 3rem;\n  height: ${({ theme }) => length(theme.layout.headerHeight)};\n  margin-left: ${({ theme }) => length(theme.layout.sidebarWidth)};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  top: calc(50% - 20px);\n  left: calc(50% - 20px);\n`;\n\ninterface AppProps {\n  versionFromParams: string;\n  libraries?: Libraries;\n  sdkVersion?: string;\n  version?: string;\n  fetchDoc: (version: string) => void;\n}\n\nexport function getMetaValue(key: string, def = \"\"): string {\n  if (typeof document === \"undefined\") {\n    return def;\n  }\n\n  // Check if the meta `key` is set.\n  const obj = document.querySelector('meta[name=\"' + key + '\"]');\n  if (obj) {\n    return obj.getAttribute(\"content\") || def;\n  }\n  return def;\n}\n\nfunction getBaseURL(): string {\n  const def = process.env.PUBLIC_URL;\n  const obj = document.querySelector(\"base[href]\");\n  return obj?.getAttribute(\"href\") || def;\n}\nexport const baseURL = getBaseURL();\n\nexport enum ViewMode {\n  Package = \"package\",\n  SDK = \"sdk\",\n}\n\nexport let viewMode = getMetaValue(\"toitdoc-mode\", \"sdk\") as ViewMode;\nexport let packageName = getMetaValue(\"toitdoc-package-name\");\n\nexport function setViewMode(newMode: ViewMode): void {\n  viewMode = newMode;\n}\nexport function setPackageName(newName: string): void {\n  packageName = newName;\n}\n\nclass App extends Component<AppProps> {\n  componentDidMount(): void {\n    this.props.fetchDoc(this.props.versionFromParams);\n  }\n\n  render(): JSX.Element {\n    return (\n      <>\n        <ThemeProvider theme={theme}>\n          <BrowserRouter basename={baseURL}>\n            <AppContent {...this.props} />\n          </BrowserRouter>\n        </ThemeProvider>\n      </>\n    );\n  }\n}\n\nconst FixedNavigationView = styled(NavigationView)`\n  position: fixed;\n  width: ${(props): string => length(props.theme.layout.sidebarWidth)};\n  height: 100vh;\n  top: 0;\n  left: 0;\n`;\n\nfunction AppContent(props: AppProps): JSX.Element {\n  const classes = useStyles(props);\n  const segmentAPIKey = useMemo(() => getMetaValue(\"segment-key\"), []);\n\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  const packageURL =\n    props.libraries !== undefined ? `/${packageName}/library-summary` : \"\";\n\n  return (\n    <>\n      {props.libraries !== undefined ? (\n        <>\n          <div className={classes.appContainer}>\n            <ErrorBoundary>\n              <HeaderBar />\n            </ErrorBoundary>\n            <ThemeProvider theme={sideBarTheme}>\n              <Route\n                exact\n                path=\"/\"\n                render={(\n                  routeProps: RouteComponentProps<NavigationParams>\n                ): React.ReactNode => <FixedNavigationView {...routeProps} />}\n              />\n              <Route\n                exact\n                path=\"/:libraryName*/:rest\"\n                render={(\n                  routeProps: RouteComponentProps<NavigationParams>\n                ): React.ReactNode => <FixedNavigationView {...routeProps} />}\n              />\n            </ThemeProvider>\n\n            <ContentWrapper>\n              <Content>\n                <ErrorBoundary>\n                  {viewMode === ViewMode.Package ? (\n                    <Route exact path=\"/\">\n                      <Redirect to={packageURL} />\n                    </Route>\n                  ) : (\n                    <Route exact path=\"/\" component={WelcomePage} />\n                  )}\n                  <Route\n                    exact\n                    path=\"/:libraryName+/library-summary\"\n                    render={(\n                      routeProps: RouteComponentProps<LibraryInfoParams>\n                    ): React.ReactNode => <LibraryInfo {...routeProps} />}\n                  />\n                  <Route\n                    exact\n                    path=\"/:libraryName+/class-:className\"\n                    render={(\n                      routeProps: RouteComponentProps<ClassInfoParams>\n                    ): React.ReactNode => <ClassInfo {...routeProps} />}\n                  />\n                </ErrorBoundary>\n              </Content>\n            </ContentWrapper>\n            <Footer>SDK version: {props.sdkVersion}</Footer>\n          </div>\n        </>\n      ) : (\n        <StyledCircularProgress disableShrink />\n      )}\n      <CookieConsent\n        segmentKey={segmentAPIKey}\n        changeConsent={false}\n        show={true}\n      />\n    </>\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, combineReducers, createStore } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport App from \"./App\";\nimport { doc } from \"./redux/doc\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst rootReducer = combineReducers({\n  doc: doc.reducer,\n});\n\nconst store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\n\nconst searchParams = new URLSearchParams(window.location.search);\nlet version = \"latest\";\nif (searchParams.has(\"version\")) {\n  version = searchParams.get(\"version\") || version;\n}\n\nrender(\n  <Provider store={store}>\n    <App versionFromParams={version} />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}